{
  "version": 3,
  "sources": ["../src/libraries/jsdelivr-header.js", "../src/libraries/npm/mithril@2.2.3/render/vnode.js", "../src/libraries/npm/mithril@2.2.3/render/hyperscriptVnode.js", "../src/libraries/npm/mithril@2.2.3/util/hasOwn.js", "../src/libraries/npm/mithril@2.2.3/render/hyperscript.js", "../src/libraries/npm/mithril@2.2.3/render/trust.js", "../src/libraries/npm/mithril@2.2.3/render/fragment.js", "../src/libraries/npm/mithril@2.2.3/hyperscript.js", "../src/libraries/npm/mithril@2.2.3/render/domFor.js", "../src/libraries/npm/mithril@2.2.3/render/render.js", "../src/libraries/npm/mithril@2.2.3/render.js", "../src/libraries/npm/mithril@2.2.3/api/mount-redraw.js", "../src/libraries/npm/mithril@2.2.3/mount-redraw.js", "../src/libraries/npm/mithril@2.2.3/querystring/build.js", "../src/libraries/npm/mithril@2.2.3/util/assign.js", "../src/libraries/npm/mithril@2.2.3/pathname/build.js", "../src/libraries/npm/mithril@2.2.3/request/request.js", "../src/libraries/npm/mithril@2.2.3/request.js", "../src/libraries/npm/mithril@2.2.3/querystring/parse.js", "../src/libraries/npm/mithril@2.2.3/pathname/parse.js", "../src/libraries/npm/mithril@2.2.3/pathname/compileTemplate.js", "../src/libraries/npm/mithril@2.2.3/util/censor.js", "../src/libraries/npm/mithril@2.2.3/api/router.js", "../src/libraries/npm/mithril@2.2.3/route.js", "../src/libraries/npm/mithril@2.2.3/index.js", "../src/libraries/nanoid.ts", "../src/libraries/mithril-toast.ts", "../src/pages/add-bulk.ts", "../src/pages/add-scan.ts", "../src/pages/add-search.ts", "../src/libraries/mithril-material-3/core.ts", "../src/libraries/mithril-material-3/button.ts", "../src/libraries/mithril-material-3/fab.ts", "../src/libraries/mithril-material-3/icon/base.ts", "../src/libraries/mithril-material-3/icon/add.ts", "../src/pages/bookshelf/index.ts", "../src/utils/index.ts", "../src/database/client.ts", "../src/libraries/mithril-material-3/icon/more-vert.ts", "../src/components/header.ts", "../src/components/bookcover.ts", "../src/components/bookshelf.ts", "../src/libraries/mithril-material-3/nav.ts", "../src/libraries/mithril-material-3/icon/label.ts", "../src/libraries/mithril-material-3/icon/shelves.ts", "../src/libraries/mithril-material-3/icon/shopping-mode.ts", "../src/libraries/mithril-material-3/icon/settings.ts", "../src/pages/layout.ts", "../src/pages/bookshelves/index.ts", "../src/pages/tags/index.ts", "../src/pages/wishlist/index.ts", "../src/components/base/label.ts", "../src/components/base/select.ts", "../src/pages/settings/index.ts", "../src/main.ts"],
  "sourcesContent": ["/**\n * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.\n * Original file: /npm/mithril@2.2.3/index.js\n *\n * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files\n */\n", "\"use strict\"\n\nfunction Vnode(tag, key, attrs, children, text, dom) {\n\treturn {tag: tag, key: key, attrs: attrs, children: children, text: text, dom: dom, domSize: undefined, state: undefined, events: undefined, instance: undefined}\n}\nVnode.normalize = function(node) {\n\tif (Array.isArray(node)) return Vnode(\"[\", undefined, undefined, Vnode.normalizeChildren(node), undefined, undefined)\n\tif (node == null || typeof node === \"boolean\") return null\n\tif (typeof node === \"object\") return node\n\treturn Vnode(\"#\", undefined, undefined, String(node), undefined, undefined)\n}\nVnode.normalizeChildren = function(input) {\n\tvar children = []\n\tif (input.length) {\n\t\tvar isKeyed = input[0] != null && input[0].key != null\n\t\t// Note: this is a *very* perf-sensitive check.\n\t\t// Fun fact: merging the loop like this is somehow faster than splitting\n\t\t// it, noticeably so.\n\t\tfor (var i = 1; i < input.length; i++) {\n\t\t\tif ((input[i] != null && input[i].key != null) !== isKeyed) {\n\t\t\t\tthrow new TypeError(\n\t\t\t\t\tisKeyed && (input[i] != null || typeof input[i] === \"boolean\")\n\t\t\t\t\t\t? \"In fragments, vnodes must either all have keys or none have keys. You may wish to consider using an explicit keyed empty fragment, m.fragment({key: ...}), instead of a hole.\"\n\t\t\t\t\t\t: \"In fragments, vnodes must either all have keys or none have keys.\"\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t\tfor (var i = 0; i < input.length; i++) {\n\t\t\tchildren[i] = Vnode.normalize(input[i])\n\t\t}\n\t}\n\treturn children\n}\n\nmodule.exports = Vnode\n", "\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\n\n// Call via `hyperscriptVnode.apply(startOffset, arguments)`\n//\n// The reason I do it this way, forwarding the arguments and passing the start\n// offset in `this`, is so I don't have to create a temporary array in a\n// performance-critical path.\n//\n// In native ES6, I'd instead add a final `...args` parameter to the\n// `hyperscript` and `fragment` factories and define this as\n// `hyperscriptVnode(...args)`, since modern engines do optimize that away. But\n// ES5 (what Mithril.js requires thanks to IE support) doesn't give me that luxury,\n// and engines aren't nearly intelligent enough to do either of these:\n//\n// 1. Elide the allocation for `[].slice.call(arguments, 1)` when it's passed to\n//    another function only to be indexed.\n// 2. Elide an `arguments` allocation when it's passed to any function other\n//    than `Function.prototype.apply` or `Reflect.apply`.\n//\n// In ES6, it'd probably look closer to this (I'd need to profile it, though):\n// module.exports = function(attrs, ...children) {\n//     if (attrs == null || typeof attrs === \"object\" && attrs.tag == null && !Array.isArray(attrs)) {\n//         if (children.length === 1 && Array.isArray(children[0])) children = children[0]\n//     } else {\n//         children = children.length === 0 && Array.isArray(attrs) ? attrs : [attrs, ...children]\n//         attrs = undefined\n//     }\n//\n//     if (attrs == null) attrs = {}\n//     return Vnode(\"\", attrs.key, attrs, children)\n// }\nmodule.exports = function() {\n\tvar attrs = arguments[this], start = this + 1, children\n\n\tif (attrs == null) {\n\t\tattrs = {}\n\t} else if (typeof attrs !== \"object\" || attrs.tag != null || Array.isArray(attrs)) {\n\t\tattrs = {}\n\t\tstart = this\n\t}\n\n\tif (arguments.length === start + 1) {\n\t\tchildren = arguments[start]\n\t\tif (!Array.isArray(children)) children = [children]\n\t} else {\n\t\tchildren = []\n\t\twhile (start < arguments.length) children.push(arguments[start++])\n\t}\n\n\treturn Vnode(\"\", attrs.key, attrs, children)\n}\n", "// This exists so I'm only saving it once.\n\"use strict\"\n\nmodule.exports = {}.hasOwnProperty\n", "\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\nvar hyperscriptVnode = require(\"./hyperscriptVnode\")\nvar hasOwn = require(\"../util/hasOwn\")\n\nvar selectorParser = /(?:(^|#|\\.)([^#\\.\\[\\]]+))|(\\[(.+?)(?:\\s*=\\s*(\"|'|)((?:\\\\[\"'\\]]|.)*?)\\5)?\\])/g\nvar selectorCache = {}\n\nfunction isEmpty(object) {\n\tfor (var key in object) if (hasOwn.call(object, key)) return false\n\treturn true\n}\n\nfunction compileSelector(selector) {\n\tvar match, tag = \"div\", classes = [], attrs = {}\n\twhile (match = selectorParser.exec(selector)) {\n\t\tvar type = match[1], value = match[2]\n\t\tif (type === \"\" && value !== \"\") tag = value\n\t\telse if (type === \"#\") attrs.id = value\n\t\telse if (type === \".\") classes.push(value)\n\t\telse if (match[3][0] === \"[\") {\n\t\t\tvar attrValue = match[6]\n\t\t\tif (attrValue) attrValue = attrValue.replace(/\\\\([\"'])/g, \"$1\").replace(/\\\\\\\\/g, \"\\\\\")\n\t\t\tif (match[4] === \"class\") classes.push(attrValue)\n\t\t\telse attrs[match[4]] = attrValue === \"\" ? attrValue : attrValue || true\n\t\t}\n\t}\n\tif (classes.length > 0) attrs.className = classes.join(\" \")\n\treturn selectorCache[selector] = {tag: tag, attrs: attrs}\n}\n\nfunction execSelector(state, vnode) {\n\tvar attrs = vnode.attrs\n\tvar hasClass = hasOwn.call(attrs, \"class\")\n\tvar className = hasClass ? attrs.class : attrs.className\n\n\tvnode.tag = state.tag\n\tvnode.attrs = {}\n\n\tif (!isEmpty(state.attrs) && !isEmpty(attrs)) {\n\t\tvar newAttrs = {}\n\n\t\tfor (var key in attrs) {\n\t\t\tif (hasOwn.call(attrs, key)) newAttrs[key] = attrs[key]\n\t\t}\n\n\t\tattrs = newAttrs\n\t}\n\n\tfor (var key in state.attrs) {\n\t\tif (hasOwn.call(state.attrs, key) && key !== \"className\" && !hasOwn.call(attrs, key)){\n\t\t\tattrs[key] = state.attrs[key]\n\t\t}\n\t}\n\tif (className != null || state.attrs.className != null) attrs.className =\n\t\tclassName != null\n\t\t\t? state.attrs.className != null\n\t\t\t\t? String(state.attrs.className) + \" \" + String(className)\n\t\t\t\t: className\n\t\t\t: state.attrs.className != null\n\t\t\t\t? state.attrs.className\n\t\t\t\t: null\n\n\tif (hasClass) attrs.class = null\n\n\tfor (var key in attrs) {\n\t\tif (hasOwn.call(attrs, key) && key !== \"key\") {\n\t\t\tvnode.attrs = attrs\n\t\t\tbreak\n\t\t}\n\t}\n\n\treturn vnode\n}\n\nfunction hyperscript(selector) {\n\tif (selector == null || typeof selector !== \"string\" && typeof selector !== \"function\" && typeof selector.view !== \"function\") {\n\t\tthrow Error(\"The selector must be either a string or a component.\");\n\t}\n\n\tvar vnode = hyperscriptVnode.apply(1, arguments)\n\n\tif (typeof selector === \"string\") {\n\t\tvnode.children = Vnode.normalizeChildren(vnode.children)\n\t\tif (selector !== \"[\") return execSelector(selectorCache[selector] || compileSelector(selector), vnode)\n\t}\n\n\tvnode.tag = selector\n\treturn vnode\n}\n\nmodule.exports = hyperscript\n", "\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\n\nmodule.exports = function(html) {\n\tif (html == null) html = \"\"\n\treturn Vnode(\"<\", undefined, undefined, html, undefined, undefined)\n}\n", "\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\nvar hyperscriptVnode = require(\"./hyperscriptVnode\")\n\nmodule.exports = function() {\n\tvar vnode = hyperscriptVnode.apply(0, arguments)\n\n\tvnode.tag = \"[\"\n\tvnode.children = Vnode.normalizeChildren(vnode.children)\n\treturn vnode\n}\n", "\"use strict\"\n\nvar hyperscript = require(\"./render/hyperscript\")\n\nhyperscript.trust = require(\"./render/trust\")\nhyperscript.fragment = require(\"./render/fragment\")\n\nmodule.exports = hyperscript\n", "\"use strict\"\n\nvar delayedRemoval = new WeakMap\n\nfunction *domFor({dom, domSize}, {generation} = {}) {\n\tif (dom != null) do {\n\t\tconst {nextSibling} = dom\n\n\t\tif (delayedRemoval.get(dom) === generation) {\n\t\t\tyield dom\n\t\t\tdomSize--\n\t\t}\n\n\t\tdom = nextSibling\n\t}\n\twhile (domSize)\n}\n\nmodule.exports = {\n\tdelayedRemoval: delayedRemoval,\n\tdomFor: domFor,\n}", "\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\nvar df = require(\"../render/domFor\")\nvar delayedRemoval = df.delayedRemoval\nvar domFor = df.domFor\n\nmodule.exports = function($window) {\n\tvar $doc = $window && $window.document\n\n\tvar nameSpace = {\n\t\tsvg: \"http://www.w3.org/2000/svg\",\n\t\tmath: \"http://www.w3.org/1998/Math/MathML\"\n\t}\n\n\tvar currentRedraw\n\tvar currentRender\n\n\tfunction getNameSpace(vnode) {\n\t\treturn vnode.attrs && vnode.attrs.xmlns || nameSpace[vnode.tag]\n\t}\n\n\t//sanity check to discourage people from doing `vnode.state = ...`\n\tfunction checkState(vnode, original) {\n\t\tif (vnode.state !== original) throw new Error(\"'vnode.state' must not be modified.\")\n\t}\n\n\t//Note: the hook is passed as the `this` argument to allow proxying the\n\t//arguments without requiring a full array allocation to do so. It also\n\t//takes advantage of the fact the current `vnode` is the first argument in\n\t//all lifecycle methods.\n\tfunction callHook(vnode) {\n\t\tvar original = vnode.state\n\t\ttry {\n\t\t\treturn this.apply(original, arguments)\n\t\t} finally {\n\t\t\tcheckState(vnode, original)\n\t\t}\n\t}\n\n\t// IE11 (at least) throws an UnspecifiedError when accessing document.activeElement when\n\t// inside an iframe. Catch and swallow this error, and heavy-handidly return null.\n\tfunction activeElement() {\n\t\ttry {\n\t\t\treturn $doc.activeElement\n\t\t} catch (e) {\n\t\t\treturn null\n\t\t}\n\t}\n\t//create\n\tfunction createNodes(parent, vnodes, start, end, hooks, nextSibling, ns) {\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) {\n\t\t\t\tcreateNode(parent, vnode, hooks, ns, nextSibling)\n\t\t\t}\n\t\t}\n\t}\n\tfunction createNode(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar tag = vnode.tag\n\t\tif (typeof tag === \"string\") {\n\t\t\tvnode.state = {}\n\t\t\tif (vnode.attrs != null) initLifecycle(vnode.attrs, vnode, hooks)\n\t\t\tswitch (tag) {\n\t\t\t\tcase \"#\": createText(parent, vnode, nextSibling); break\n\t\t\t\tcase \"<\": createHTML(parent, vnode, ns, nextSibling); break\n\t\t\t\tcase \"[\": createFragment(parent, vnode, hooks, ns, nextSibling); break\n\t\t\t\tdefault: createElement(parent, vnode, hooks, ns, nextSibling)\n\t\t\t}\n\t\t}\n\t\telse createComponent(parent, vnode, hooks, ns, nextSibling)\n\t}\n\tfunction createText(parent, vnode, nextSibling) {\n\t\tvnode.dom = $doc.createTextNode(vnode.children)\n\t\tinsertDOM(parent, vnode.dom, nextSibling)\n\t}\n\tvar possibleParents = {caption: \"table\", thead: \"table\", tbody: \"table\", tfoot: \"table\", tr: \"tbody\", th: \"tr\", td: \"tr\", colgroup: \"table\", col: \"colgroup\"}\n\tfunction createHTML(parent, vnode, ns, nextSibling) {\n\t\tvar match = vnode.children.match(/^\\s*?<(\\w+)/im) || []\n\t\t// not using the proper parent makes the child element(s) vanish.\n\t\t//     var div = document.createElement(\"div\")\n\t\t//     div.innerHTML = \"<td>i</td><td>j</td>\"\n\t\t//     console.log(div.innerHTML)\n\t\t// --> \"ij\", no <td> in sight.\n\t\tvar temp = $doc.createElement(possibleParents[match[1]] || \"div\")\n\t\tif (ns === \"http://www.w3.org/2000/svg\") {\n\t\t\ttemp.innerHTML = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\">\" + vnode.children + \"</svg>\"\n\t\t\ttemp = temp.firstChild\n\t\t} else {\n\t\t\ttemp.innerHTML = vnode.children\n\t\t}\n\t\tvnode.dom = temp.firstChild\n\t\tvnode.domSize = temp.childNodes.length\n\t\t// Capture nodes to remove, so we don't confuse them.\n\t\tvar fragment = $doc.createDocumentFragment()\n\t\tvar child\n\t\twhile (child = temp.firstChild) {\n\t\t\tfragment.appendChild(child)\n\t\t}\n\t\tinsertDOM(parent, fragment, nextSibling)\n\t}\n\tfunction createFragment(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar fragment = $doc.createDocumentFragment()\n\t\tif (vnode.children != null) {\n\t\t\tvar children = vnode.children\n\t\t\tcreateNodes(fragment, children, 0, children.length, hooks, null, ns)\n\t\t}\n\t\tvnode.dom = fragment.firstChild\n\t\tvnode.domSize = fragment.childNodes.length\n\t\tinsertDOM(parent, fragment, nextSibling)\n\t}\n\tfunction createElement(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar tag = vnode.tag\n\t\tvar attrs = vnode.attrs\n\t\tvar is = attrs && attrs.is\n\n\t\tns = getNameSpace(vnode) || ns\n\n\t\tvar element = ns ?\n\t\t\tis ? $doc.createElementNS(ns, tag, {is: is}) : $doc.createElementNS(ns, tag) :\n\t\t\tis ? $doc.createElement(tag, {is: is}) : $doc.createElement(tag)\n\t\tvnode.dom = element\n\n\t\tif (attrs != null) {\n\t\t\tsetAttrs(vnode, attrs, ns)\n\t\t}\n\n\t\tinsertDOM(parent, element, nextSibling)\n\n\t\tif (!maybeSetContentEditable(vnode)) {\n\t\t\tif (vnode.children != null) {\n\t\t\t\tvar children = vnode.children\n\t\t\t\tcreateNodes(element, children, 0, children.length, hooks, null, ns)\n\t\t\t\tif (vnode.tag === \"select\" && attrs != null) setLateSelectAttrs(vnode, attrs)\n\t\t\t}\n\t\t}\n\t}\n\tfunction initComponent(vnode, hooks) {\n\t\tvar sentinel\n\t\tif (typeof vnode.tag.view === \"function\") {\n\t\t\tvnode.state = Object.create(vnode.tag)\n\t\t\tsentinel = vnode.state.view\n\t\t\tif (sentinel.$$reentrantLock$$ != null) return\n\t\t\tsentinel.$$reentrantLock$$ = true\n\t\t} else {\n\t\t\tvnode.state = void 0\n\t\t\tsentinel = vnode.tag\n\t\t\tif (sentinel.$$reentrantLock$$ != null) return\n\t\t\tsentinel.$$reentrantLock$$ = true\n\t\t\tvnode.state = (vnode.tag.prototype != null && typeof vnode.tag.prototype.view === \"function\") ? new vnode.tag(vnode) : vnode.tag(vnode)\n\t\t}\n\t\tinitLifecycle(vnode.state, vnode, hooks)\n\t\tif (vnode.attrs != null) initLifecycle(vnode.attrs, vnode, hooks)\n\t\tvnode.instance = Vnode.normalize(callHook.call(vnode.state.view, vnode))\n\t\tif (vnode.instance === vnode) throw Error(\"A view cannot return the vnode it received as argument\")\n\t\tsentinel.$$reentrantLock$$ = null\n\t}\n\tfunction createComponent(parent, vnode, hooks, ns, nextSibling) {\n\t\tinitComponent(vnode, hooks)\n\t\tif (vnode.instance != null) {\n\t\t\tcreateNode(parent, vnode.instance, hooks, ns, nextSibling)\n\t\t\tvnode.dom = vnode.instance.dom\n\t\t\tvnode.domSize = vnode.dom != null ? vnode.instance.domSize : 0\n\t\t}\n\t\telse {\n\t\t\tvnode.domSize = 0\n\t\t}\n\t}\n\n\t//update\n\t/**\n\t * @param {Element|Fragment} parent - the parent element\n\t * @param {Vnode[] | null} old - the list of vnodes of the last `render()` call for\n\t *                               this part of the tree\n\t * @param {Vnode[] | null} vnodes - as above, but for the current `render()` call.\n\t * @param {Function[]} hooks - an accumulator of post-render hooks (oncreate/onupdate)\n\t * @param {Element | null} nextSibling - the next DOM node if we're dealing with a\n\t *                                       fragment that is not the last item in its\n\t *                                       parent\n\t * @param {'svg' | 'math' | String | null} ns) - the current XML namespace, if any\n\t * @returns void\n\t */\n\t// This function diffs and patches lists of vnodes, both keyed and unkeyed.\n\t//\n\t// We will:\n\t//\n\t// 1. describe its general structure\n\t// 2. focus on the diff algorithm optimizations\n\t// 3. discuss DOM node operations.\n\n\t// ## Overview:\n\t//\n\t// The updateNodes() function:\n\t// - deals with trivial cases\n\t// - determines whether the lists are keyed or unkeyed based on the first non-null node\n\t//   of each list.\n\t// - diffs them and patches the DOM if needed (that's the brunt of the code)\n\t// - manages the leftovers: after diffing, are there:\n\t//   - old nodes left to remove?\n\t// \t - new nodes to insert?\n\t// \t deal with them!\n\t//\n\t// The lists are only iterated over once, with an exception for the nodes in `old` that\n\t// are visited in the fourth part of the diff and in the `removeNodes` loop.\n\n\t// ## Diffing\n\t//\n\t// Reading https://github.com/localvoid/ivi/blob/ddc09d06abaef45248e6133f7040d00d3c6be853/packages/ivi/src/vdom/implementation.ts#L617-L837\n\t// may be good for context on longest increasing subsequence-based logic for moving nodes.\n\t//\n\t// In order to diff keyed lists, one has to\n\t//\n\t// 1) match nodes in both lists, per key, and update them accordingly\n\t// 2) create the nodes present in the new list, but absent in the old one\n\t// 3) remove the nodes present in the old list, but absent in the new one\n\t// 4) figure out what nodes in 1) to move in order to minimize the DOM operations.\n\t//\n\t// To achieve 1) one can create a dictionary of keys => index (for the old list), then iterate\n\t// over the new list and for each new vnode, find the corresponding vnode in the old list using\n\t// the map.\n\t// 2) is achieved in the same step: if a new node has no corresponding entry in the map, it is new\n\t// and must be created.\n\t// For the removals, we actually remove the nodes that have been updated from the old list.\n\t// The nodes that remain in that list after 1) and 2) have been performed can be safely removed.\n\t// The fourth step is a bit more complex and relies on the longest increasing subsequence (LIS)\n\t// algorithm.\n\t//\n\t// the longest increasing subsequence is the list of nodes that can remain in place. Imagine going\n\t// from `1,2,3,4,5` to `4,5,1,2,3` where the numbers are not necessarily the keys, but the indices\n\t// corresponding to the keyed nodes in the old list (keyed nodes `e,d,c,b,a` => `b,a,e,d,c` would\n\t//  match the above lists, for example).\n\t//\n\t// In there are two increasing subsequences: `4,5` and `1,2,3`, the latter being the longest. We\n\t// can update those nodes without moving them, and only call `insertNode` on `4` and `5`.\n\t//\n\t// @localvoid adapted the algo to also support node deletions and insertions (the `lis` is actually\n\t// the longest increasing subsequence *of old nodes still present in the new list*).\n\t//\n\t// It is a general algorithm that is fireproof in all circumstances, but it requires the allocation\n\t// and the construction of a `key => oldIndex` map, and three arrays (one with `newIndex => oldIndex`,\n\t// the `LIS` and a temporary one to create the LIS).\n\t//\n\t// So we cheat where we can: if the tails of the lists are identical, they are guaranteed to be part of\n\t// the LIS and can be updated without moving them.\n\t//\n\t// If two nodes are swapped, they are guaranteed not to be part of the LIS, and must be moved (with\n\t// the exception of the last node if the list is fully reversed).\n\t//\n\t// ## Finding the next sibling.\n\t//\n\t// `updateNode()` and `createNode()` expect a nextSibling parameter to perform DOM operations.\n\t// When the list is being traversed top-down, at any index, the DOM nodes up to the previous\n\t// vnode reflect the content of the new list, whereas the rest of the DOM nodes reflect the old\n\t// list. The next sibling must be looked for in the old list using `getNextSibling(... oldStart + 1 ...)`.\n\t//\n\t// In the other scenarios (swaps, upwards traversal, map-based diff),\n\t// the new vnodes list is traversed upwards. The DOM nodes at the bottom of the list reflect the\n\t// bottom part of the new vnodes list, and we can use the `v.dom`  value of the previous node\n\t// as the next sibling (cached in the `nextSibling` variable).\n\n\n\t// ## DOM node moves\n\t//\n\t// In most scenarios `updateNode()` and `createNode()` perform the DOM operations. However,\n\t// this is not the case if the node moved (second and fourth part of the diff algo). We move\n\t// the old DOM nodes before updateNode runs because it enables us to use the cached `nextSibling`\n\t// variable rather than fetching it using `getNextSibling()`.\n\n\tfunction updateNodes(parent, old, vnodes, hooks, nextSibling, ns) {\n\t\tif (old === vnodes || old == null && vnodes == null) return\n\t\telse if (old == null || old.length === 0) createNodes(parent, vnodes, 0, vnodes.length, hooks, nextSibling, ns)\n\t\telse if (vnodes == null || vnodes.length === 0) removeNodes(parent, old, 0, old.length)\n\t\telse {\n\t\t\tvar isOldKeyed = old[0] != null && old[0].key != null\n\t\t\tvar isKeyed = vnodes[0] != null && vnodes[0].key != null\n\t\t\tvar start = 0, oldStart = 0\n\t\t\tif (!isOldKeyed) while (oldStart < old.length && old[oldStart] == null) oldStart++\n\t\t\tif (!isKeyed) while (start < vnodes.length && vnodes[start] == null) start++\n\t\t\tif (isOldKeyed !== isKeyed) {\n\t\t\t\tremoveNodes(parent, old, oldStart, old.length)\n\t\t\t\tcreateNodes(parent, vnodes, start, vnodes.length, hooks, nextSibling, ns)\n\t\t\t} else if (!isKeyed) {\n\t\t\t\t// Don't index past the end of either list (causes deopts).\n\t\t\t\tvar commonLength = old.length < vnodes.length ? old.length : vnodes.length\n\t\t\t\t// Rewind if necessary to the first non-null index on either side.\n\t\t\t\t// We could alternatively either explicitly create or remove nodes when `start !== oldStart`\n\t\t\t\t// but that would be optimizing for sparse lists which are more rare than dense ones.\n\t\t\t\tstart = start < oldStart ? start : oldStart\n\t\t\t\tfor (; start < commonLength; start++) {\n\t\t\t\t\to = old[start]\n\t\t\t\t\tv = vnodes[start]\n\t\t\t\t\tif (o === v || o == null && v == null) continue\n\t\t\t\t\telse if (o == null) createNode(parent, v, hooks, ns, getNextSibling(old, start + 1, nextSibling))\n\t\t\t\t\telse if (v == null) removeNode(parent, o)\n\t\t\t\t\telse updateNode(parent, o, v, hooks, getNextSibling(old, start + 1, nextSibling), ns)\n\t\t\t\t}\n\t\t\t\tif (old.length > commonLength) removeNodes(parent, old, start, old.length)\n\t\t\t\tif (vnodes.length > commonLength) createNodes(parent, vnodes, start, vnodes.length, hooks, nextSibling, ns)\n\t\t\t} else {\n\t\t\t\t// keyed diff\n\t\t\t\tvar oldEnd = old.length - 1, end = vnodes.length - 1, map, o, v, oe, ve, topSibling\n\n\t\t\t\t// bottom-up\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\toe = old[oldEnd]\n\t\t\t\t\tve = vnodes[end]\n\t\t\t\t\tif (oe.key !== ve.key) break\n\t\t\t\t\tif (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns)\n\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\toldEnd--, end--\n\t\t\t\t}\n\t\t\t\t// top-down\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\to = old[oldStart]\n\t\t\t\t\tv = vnodes[start]\n\t\t\t\t\tif (o.key !== v.key) break\n\t\t\t\t\toldStart++, start++\n\t\t\t\t\tif (o !== v) updateNode(parent, o, v, hooks, getNextSibling(old, oldStart, nextSibling), ns)\n\t\t\t\t}\n\t\t\t\t// swaps and list reversals\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\tif (start === end) break\n\t\t\t\t\tif (o.key !== ve.key || oe.key !== v.key) break\n\t\t\t\t\ttopSibling = getNextSibling(old, oldStart, nextSibling)\n\t\t\t\t\tmoveDOM(parent, oe, topSibling)\n\t\t\t\t\tif (oe !== v) updateNode(parent, oe, v, hooks, topSibling, ns)\n\t\t\t\t\tif (++start <= --end) moveDOM(parent, o, nextSibling)\n\t\t\t\t\tif (o !== ve) updateNode(parent, o, ve, hooks, nextSibling, ns)\n\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\toldStart++; oldEnd--\n\t\t\t\t\toe = old[oldEnd]\n\t\t\t\t\tve = vnodes[end]\n\t\t\t\t\to = old[oldStart]\n\t\t\t\t\tv = vnodes[start]\n\t\t\t\t}\n\t\t\t\t// bottom up once again\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\tif (oe.key !== ve.key) break\n\t\t\t\t\tif (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns)\n\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\toldEnd--, end--\n\t\t\t\t\toe = old[oldEnd]\n\t\t\t\t\tve = vnodes[end]\n\t\t\t\t}\n\t\t\t\tif (start > end) removeNodes(parent, old, oldStart, oldEnd + 1)\n\t\t\t\telse if (oldStart > oldEnd) createNodes(parent, vnodes, start, end + 1, hooks, nextSibling, ns)\n\t\t\t\telse {\n\t\t\t\t\t// inspired by ivi https://github.com/ivijs/ivi/ by Boris Kaul\n\t\t\t\t\tvar originalNextSibling = nextSibling, vnodesLength = end - start + 1, oldIndices = new Array(vnodesLength), li=0, i=0, pos = 2147483647, matched = 0, map, lisIndices\n\t\t\t\t\tfor (i = 0; i < vnodesLength; i++) oldIndices[i] = -1\n\t\t\t\t\tfor (i = end; i >= start; i--) {\n\t\t\t\t\t\tif (map == null) map = getKeyMap(old, oldStart, oldEnd + 1)\n\t\t\t\t\t\tve = vnodes[i]\n\t\t\t\t\t\tvar oldIndex = map[ve.key]\n\t\t\t\t\t\tif (oldIndex != null) {\n\t\t\t\t\t\t\tpos = (oldIndex < pos) ? oldIndex : -1 // becomes -1 if nodes were re-ordered\n\t\t\t\t\t\t\toldIndices[i-start] = oldIndex\n\t\t\t\t\t\t\toe = old[oldIndex]\n\t\t\t\t\t\t\told[oldIndex] = null\n\t\t\t\t\t\t\tif (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns)\n\t\t\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\t\t\tmatched++\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tnextSibling = originalNextSibling\n\t\t\t\t\tif (matched !== oldEnd - oldStart + 1) removeNodes(parent, old, oldStart, oldEnd + 1)\n\t\t\t\t\tif (matched === 0) createNodes(parent, vnodes, start, end + 1, hooks, nextSibling, ns)\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (pos === -1) {\n\t\t\t\t\t\t\t// the indices of the indices of the items that are part of the\n\t\t\t\t\t\t\t// longest increasing subsequence in the oldIndices list\n\t\t\t\t\t\t\tlisIndices = makeLisIndices(oldIndices)\n\t\t\t\t\t\t\tli = lisIndices.length - 1\n\t\t\t\t\t\t\tfor (i = end; i >= start; i--) {\n\t\t\t\t\t\t\t\tv = vnodes[i]\n\t\t\t\t\t\t\t\tif (oldIndices[i-start] === -1) createNode(parent, v, hooks, ns, nextSibling)\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tif (lisIndices[li] === i - start) li--\n\t\t\t\t\t\t\t\t\telse moveDOM(parent, v, nextSibling)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (v.dom != null) nextSibling = vnodes[i].dom\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfor (i = end; i >= start; i--) {\n\t\t\t\t\t\t\t\tv = vnodes[i]\n\t\t\t\t\t\t\t\tif (oldIndices[i-start] === -1) createNode(parent, v, hooks, ns, nextSibling)\n\t\t\t\t\t\t\t\tif (v.dom != null) nextSibling = vnodes[i].dom\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction updateNode(parent, old, vnode, hooks, nextSibling, ns) {\n\t\tvar oldTag = old.tag, tag = vnode.tag\n\t\tif (oldTag === tag) {\n\t\t\tvnode.state = old.state\n\t\t\tvnode.events = old.events\n\t\t\tif (shouldNotUpdate(vnode, old)) return\n\t\t\tif (typeof oldTag === \"string\") {\n\t\t\t\tif (vnode.attrs != null) {\n\t\t\t\t\tupdateLifecycle(vnode.attrs, vnode, hooks)\n\t\t\t\t}\n\t\t\t\tswitch (oldTag) {\n\t\t\t\t\tcase \"#\": updateText(old, vnode); break\n\t\t\t\t\tcase \"<\": updateHTML(parent, old, vnode, ns, nextSibling); break\n\t\t\t\t\tcase \"[\": updateFragment(parent, old, vnode, hooks, nextSibling, ns); break\n\t\t\t\t\tdefault: updateElement(old, vnode, hooks, ns)\n\t\t\t\t}\n\t\t\t}\n\t\t\telse updateComponent(parent, old, vnode, hooks, nextSibling, ns)\n\t\t}\n\t\telse {\n\t\t\tremoveNode(parent, old)\n\t\t\tcreateNode(parent, vnode, hooks, ns, nextSibling)\n\t\t}\n\t}\n\tfunction updateText(old, vnode) {\n\t\tif (old.children.toString() !== vnode.children.toString()) {\n\t\t\told.dom.nodeValue = vnode.children\n\t\t}\n\t\tvnode.dom = old.dom\n\t}\n\tfunction updateHTML(parent, old, vnode, ns, nextSibling) {\n\t\tif (old.children !== vnode.children) {\n\t\t\tremoveDOM(parent, old, undefined)\n\t\t\tcreateHTML(parent, vnode, ns, nextSibling)\n\t\t}\n\t\telse {\n\t\t\tvnode.dom = old.dom\n\t\t\tvnode.domSize = old.domSize\n\t\t}\n\t}\n\tfunction updateFragment(parent, old, vnode, hooks, nextSibling, ns) {\n\t\tupdateNodes(parent, old.children, vnode.children, hooks, nextSibling, ns)\n\t\tvar domSize = 0, children = vnode.children\n\t\tvnode.dom = null\n\t\tif (children != null) {\n\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\tvar child = children[i]\n\t\t\t\tif (child != null && child.dom != null) {\n\t\t\t\t\tif (vnode.dom == null) vnode.dom = child.dom\n\t\t\t\t\tdomSize += child.domSize || 1\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (domSize !== 1) vnode.domSize = domSize\n\t\t}\n\t}\n\tfunction updateElement(old, vnode, hooks, ns) {\n\t\tvar element = vnode.dom = old.dom\n\t\tns = getNameSpace(vnode) || ns\n\n\t\tif (vnode.tag === \"textarea\") {\n\t\t\tif (vnode.attrs == null) vnode.attrs = {}\n\t\t}\n\t\tupdateAttrs(vnode, old.attrs, vnode.attrs, ns)\n\t\tif (!maybeSetContentEditable(vnode)) {\n\t\t\tupdateNodes(element, old.children, vnode.children, hooks, null, ns)\n\t\t}\n\t}\n\tfunction updateComponent(parent, old, vnode, hooks, nextSibling, ns) {\n\t\tvnode.instance = Vnode.normalize(callHook.call(vnode.state.view, vnode))\n\t\tif (vnode.instance === vnode) throw Error(\"A view cannot return the vnode it received as argument\")\n\t\tupdateLifecycle(vnode.state, vnode, hooks)\n\t\tif (vnode.attrs != null) updateLifecycle(vnode.attrs, vnode, hooks)\n\t\tif (vnode.instance != null) {\n\t\t\tif (old.instance == null) createNode(parent, vnode.instance, hooks, ns, nextSibling)\n\t\t\telse updateNode(parent, old.instance, vnode.instance, hooks, nextSibling, ns)\n\t\t\tvnode.dom = vnode.instance.dom\n\t\t\tvnode.domSize = vnode.instance.domSize\n\t\t}\n\t\telse if (old.instance != null) {\n\t\t\tremoveNode(parent, old.instance)\n\t\t\tvnode.dom = undefined\n\t\t\tvnode.domSize = 0\n\t\t}\n\t\telse {\n\t\t\tvnode.dom = old.dom\n\t\t\tvnode.domSize = old.domSize\n\t\t}\n\t}\n\tfunction getKeyMap(vnodes, start, end) {\n\t\tvar map = Object.create(null)\n\t\tfor (; start < end; start++) {\n\t\t\tvar vnode = vnodes[start]\n\t\t\tif (vnode != null) {\n\t\t\t\tvar key = vnode.key\n\t\t\t\tif (key != null) map[key] = start\n\t\t\t}\n\t\t}\n\t\treturn map\n\t}\n\t// Lifted from ivi https://github.com/ivijs/ivi/\n\t// takes a list of unique numbers (-1 is special and can\n\t// occur multiple times) and returns an array with the indices\n\t// of the items that are part of the longest increasing\n\t// subsequence\n\tvar lisTemp = []\n\tfunction makeLisIndices(a) {\n\t\tvar result = [0]\n\t\tvar u = 0, v = 0, i = 0\n\t\tvar il = lisTemp.length = a.length\n\t\tfor (var i = 0; i < il; i++) lisTemp[i] = a[i]\n\t\tfor (var i = 0; i < il; ++i) {\n\t\t\tif (a[i] === -1) continue\n\t\t\tvar j = result[result.length - 1]\n\t\t\tif (a[j] < a[i]) {\n\t\t\t\tlisTemp[i] = j\n\t\t\t\tresult.push(i)\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\tu = 0\n\t\t\tv = result.length - 1\n\t\t\twhile (u < v) {\n\t\t\t\t// Fast integer average without overflow.\n\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\tvar c = (u >>> 1) + (v >>> 1) + (u & v & 1)\n\t\t\t\tif (a[result[c]] < a[i]) {\n\t\t\t\t\tu = c + 1\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tv = c\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (a[i] < a[result[u]]) {\n\t\t\t\tif (u > 0) lisTemp[i] = result[u - 1]\n\t\t\t\tresult[u] = i\n\t\t\t}\n\t\t}\n\t\tu = result.length\n\t\tv = result[u - 1]\n\t\twhile (u-- > 0) {\n\t\t\tresult[u] = v\n\t\t\tv = lisTemp[v]\n\t\t}\n\t\tlisTemp.length = 0\n\t\treturn result\n\t}\n\n\tfunction getNextSibling(vnodes, i, nextSibling) {\n\t\tfor (; i < vnodes.length; i++) {\n\t\t\tif (vnodes[i] != null && vnodes[i].dom != null) return vnodes[i].dom\n\t\t}\n\t\treturn nextSibling\n\t}\n\n\t// This handles fragments with zombie children (removed from vdom, but persisted in DOM through onbeforeremove)\n\tfunction moveDOM(parent, vnode, nextSibling) {\n\t\tif (vnode.dom != null) {\n\t\t\tvar target\n\t\t\tif (vnode.domSize == null) {\n\t\t\t\t// don't allocate for the common case\n\t\t\t\ttarget = vnode.dom\n\t\t\t} else {\n\t\t\t\ttarget = $doc.createDocumentFragment()\n\t\t\t\tfor (var dom of domFor(vnode)) target.appendChild(dom)\n\t\t\t}\n\t\t\tinsertDOM(parent, target, nextSibling)\n\t\t}\n\t}\n\n\tfunction insertDOM(parent, dom, nextSibling) {\n\t\tif (nextSibling != null) parent.insertBefore(dom, nextSibling)\n\t\telse parent.appendChild(dom)\n\t}\n\n\tfunction maybeSetContentEditable(vnode) {\n\t\tif (vnode.attrs == null || (\n\t\t\tvnode.attrs.contenteditable == null && // attribute\n\t\t\tvnode.attrs.contentEditable == null // property\n\t\t)) return false\n\t\tvar children = vnode.children\n\t\tif (children != null && children.length === 1 && children[0].tag === \"<\") {\n\t\t\tvar content = children[0].children\n\t\t\tif (vnode.dom.innerHTML !== content) vnode.dom.innerHTML = content\n\t\t}\n\t\telse if (children != null && children.length !== 0) throw new Error(\"Child node of a contenteditable must be trusted.\")\n\t\treturn true\n\t}\n\n\t//remove\n\tfunction removeNodes(parent, vnodes, start, end) {\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) removeNode(parent, vnode)\n\t\t}\n\t}\n\tfunction removeNode(parent, vnode) {\n\t\tvar mask = 0\n\t\tvar original = vnode.state\n\t\tvar stateResult, attrsResult\n\t\tif (typeof vnode.tag !== \"string\" && typeof vnode.state.onbeforeremove === \"function\") {\n\t\t\tvar result = callHook.call(vnode.state.onbeforeremove, vnode)\n\t\t\tif (result != null && typeof result.then === \"function\") {\n\t\t\t\tmask = 1\n\t\t\t\tstateResult = result\n\t\t\t}\n\t\t}\n\t\tif (vnode.attrs && typeof vnode.attrs.onbeforeremove === \"function\") {\n\t\t\tvar result = callHook.call(vnode.attrs.onbeforeremove, vnode)\n\t\t\tif (result != null && typeof result.then === \"function\") {\n\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\tmask |= 2\n\t\t\t\tattrsResult = result\n\t\t\t}\n\t\t}\n\t\tcheckState(vnode, original)\n\t\tvar generation\n\t\t// If we can, try to fast-path it and avoid all the overhead of awaiting\n\t\tif (!mask) {\n\t\t\tonremove(vnode)\n\t\t\tremoveDOM(parent, vnode, generation)\n\t\t} else {\n\t\t\tgeneration = currentRender\n\t\t\tfor (var dom of domFor(vnode)) delayedRemoval.set(dom, generation)\n\t\t\tif (stateResult != null) {\n\t\t\t\tstateResult.finally(function () {\n\t\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\t\tif (mask & 1) {\n\t\t\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\t\t\tmask &= 2\n\t\t\t\t\t\tif (!mask) {\n\t\t\t\t\t\t\tcheckState(vnode, original)\n\t\t\t\t\t\t\tonremove(vnode)\n\t\t\t\t\t\t\tremoveDOM(parent, vnode, generation)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t\tif (attrsResult != null) {\n\t\t\t\tattrsResult.finally(function () {\n\t\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\t\tif (mask & 2) {\n\t\t\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\t\t\tmask &= 1\n\t\t\t\t\t\tif (!mask) {\n\t\t\t\t\t\t\tcheckState(vnode, original)\n\t\t\t\t\t\t\tonremove(vnode)\n\t\t\t\t\t\t\tremoveDOM(parent, vnode, generation)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\tfunction removeDOM(parent, vnode, generation) {\n\t\tif (vnode.dom == null) return\n\t\tif (vnode.domSize == null) {\n\t\t\t// don't allocate for the common case\n\t\t\tif (delayedRemoval.get(vnode.dom) === generation) parent.removeChild(vnode.dom)\n\t\t} else {\n\t\t\tfor (var dom of domFor(vnode, {generation})) parent.removeChild(dom)\n\t\t}\n\t}\n\n\tfunction onremove(vnode) {\n\t\tif (typeof vnode.tag !== \"string\" && typeof vnode.state.onremove === \"function\") callHook.call(vnode.state.onremove, vnode)\n\t\tif (vnode.attrs && typeof vnode.attrs.onremove === \"function\") callHook.call(vnode.attrs.onremove, vnode)\n\t\tif (typeof vnode.tag !== \"string\") {\n\t\t\tif (vnode.instance != null) onremove(vnode.instance)\n\t\t} else {\n\t\t\tvar children = vnode.children\n\t\t\tif (Array.isArray(children)) {\n\t\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t\tvar child = children[i]\n\t\t\t\t\tif (child != null) onremove(child)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t//attrs\n\tfunction setAttrs(vnode, attrs, ns) {\n\t\t// If you assign an input type that is not supported by IE 11 with an assignment expression, an error will occur.\n\t\t//\n\t\t// Also, the DOM does things to inputs based on the value, so it needs set first.\n\t\t// See: https://github.com/MithrilJS/mithril.js/issues/2622\n\t\tif (vnode.tag === \"input\" && attrs.type != null) vnode.dom.setAttribute(\"type\", attrs.type)\n\t\tvar isFileInput = attrs != null && vnode.tag === \"input\" && attrs.type === \"file\"\n\t\tfor (var key in attrs) {\n\t\t\tsetAttr(vnode, key, null, attrs[key], ns, isFileInput)\n\t\t}\n\t}\n\tfunction setAttr(vnode, key, old, value, ns, isFileInput) {\n\t\tif (key === \"key\" || key === \"is\" || value == null || isLifecycleMethod(key) || (old === value && !isFormAttribute(vnode, key)) && typeof value !== \"object\" || key === \"type\" && vnode.tag === \"input\") return\n\t\tif (key[0] === \"o\" && key[1] === \"n\") return updateEvent(vnode, key, value)\n\t\tif (key.slice(0, 6) === \"xlink:\") vnode.dom.setAttributeNS(\"http://www.w3.org/1999/xlink\", key.slice(6), value)\n\t\telse if (key === \"style\") updateStyle(vnode.dom, old, value)\n\t\telse if (hasPropertyKey(vnode, key, ns)) {\n\t\t\tif (key === \"value\") {\n\t\t\t\t// Only do the coercion if we're actually going to check the value.\n\t\t\t\t/* eslint-disable no-implicit-coercion */\n\t\t\t\t//setting input[value] to same value by typing on focused element moves cursor to end in Chrome\n\t\t\t\t//setting input[type=file][value] to same value causes an error to be generated if it's non-empty\n\t\t\t\tif ((vnode.tag === \"input\" || vnode.tag === \"textarea\") && vnode.dom.value === \"\" + value && (isFileInput || vnode.dom === activeElement())) return\n\t\t\t\t//setting select[value] to same value while having select open blinks select dropdown in Chrome\n\t\t\t\tif (vnode.tag === \"select\" && old !== null && vnode.dom.value === \"\" + value) return\n\t\t\t\t//setting option[value] to same value while having select open blinks select dropdown in Chrome\n\t\t\t\tif (vnode.tag === \"option\" && old !== null && vnode.dom.value === \"\" + value) return\n\t\t\t\t//setting input[type=file][value] to different value is an error if it's non-empty\n\t\t\t\t// Not ideal, but it at least works around the most common source of uncaught exceptions for now.\n\t\t\t\tif (isFileInput && \"\" + value !== \"\") { console.error(\"`value` is read-only on file inputs!\"); return }\n\t\t\t\t/* eslint-enable no-implicit-coercion */\n\t\t\t}\n\t\t\tvnode.dom[key] = value\n\t\t} else {\n\t\t\tif (typeof value === \"boolean\") {\n\t\t\t\tif (value) vnode.dom.setAttribute(key, \"\")\n\t\t\t\telse vnode.dom.removeAttribute(key)\n\t\t\t}\n\t\t\telse vnode.dom.setAttribute(key === \"className\" ? \"class\" : key, value)\n\t\t}\n\t}\n\tfunction removeAttr(vnode, key, old, ns) {\n\t\tif (key === \"key\" || key === \"is\" || old == null || isLifecycleMethod(key)) return\n\t\tif (key[0] === \"o\" && key[1] === \"n\") updateEvent(vnode, key, undefined)\n\t\telse if (key === \"style\") updateStyle(vnode.dom, old, null)\n\t\telse if (\n\t\t\thasPropertyKey(vnode, key, ns)\n\t\t\t&& key !== \"className\"\n\t\t\t&& key !== \"title\" // creates \"null\" as title\n\t\t\t&& !(key === \"value\" && (\n\t\t\t\tvnode.tag === \"option\"\n\t\t\t\t|| vnode.tag === \"select\" && vnode.dom.selectedIndex === -1 && vnode.dom === activeElement()\n\t\t\t))\n\t\t\t&& !(vnode.tag === \"input\" && key === \"type\")\n\t\t) {\n\t\t\tvnode.dom[key] = null\n\t\t} else {\n\t\t\tvar nsLastIndex = key.indexOf(\":\")\n\t\t\tif (nsLastIndex !== -1) key = key.slice(nsLastIndex + 1)\n\t\t\tif (old !== false) vnode.dom.removeAttribute(key === \"className\" ? \"class\" : key)\n\t\t}\n\t}\n\tfunction setLateSelectAttrs(vnode, attrs) {\n\t\tif (\"value\" in attrs) {\n\t\t\tif(attrs.value === null) {\n\t\t\t\tif (vnode.dom.selectedIndex !== -1) vnode.dom.value = null\n\t\t\t} else {\n\t\t\t\tvar normalized = \"\" + attrs.value // eslint-disable-line no-implicit-coercion\n\t\t\t\tif (vnode.dom.value !== normalized || vnode.dom.selectedIndex === -1) {\n\t\t\t\t\tvnode.dom.value = normalized\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (\"selectedIndex\" in attrs) setAttr(vnode, \"selectedIndex\", null, attrs.selectedIndex, undefined)\n\t}\n\tfunction updateAttrs(vnode, old, attrs, ns) {\n\t\tif (old && old === attrs) {\n\t\t\tconsole.warn(\"Don't reuse attrs object, use new object for every redraw, this will throw in next major\")\n\t\t}\n\t\tif (attrs != null) {\n\t\t\t// If you assign an input type that is not supported by IE 11 with an assignment expression, an error will occur.\n\t\t\t//\n\t\t\t// Also, the DOM does things to inputs based on the value, so it needs set first.\n\t\t\t// See: https://github.com/MithrilJS/mithril.js/issues/2622\n\t\t\tif (vnode.tag === \"input\" && attrs.type != null) vnode.dom.setAttribute(\"type\", attrs.type)\n\t\t\tvar isFileInput = vnode.tag === \"input\" && attrs.type === \"file\"\n\t\t\tfor (var key in attrs) {\n\t\t\t\tsetAttr(vnode, key, old && old[key], attrs[key], ns, isFileInput)\n\t\t\t}\n\t\t}\n\t\tvar val\n\t\tif (old != null) {\n\t\t\tfor (var key in old) {\n\t\t\t\tif (((val = old[key]) != null) && (attrs == null || attrs[key] == null)) {\n\t\t\t\t\tremoveAttr(vnode, key, val, ns)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction isFormAttribute(vnode, attr) {\n\t\treturn attr === \"value\" || attr === \"checked\" || attr === \"selectedIndex\" || attr === \"selected\" && vnode.dom === activeElement() || vnode.tag === \"option\" && vnode.dom.parentNode === $doc.activeElement\n\t}\n\tfunction isLifecycleMethod(attr) {\n\t\treturn attr === \"oninit\" || attr === \"oncreate\" || attr === \"onupdate\" || attr === \"onremove\" || attr === \"onbeforeremove\" || attr === \"onbeforeupdate\"\n\t}\n\tfunction hasPropertyKey(vnode, key, ns) {\n\t\t// Filter out namespaced keys\n\t\treturn ns === undefined && (\n\t\t\t// If it's a custom element, just keep it.\n\t\t\tvnode.tag.indexOf(\"-\") > -1 || vnode.attrs != null && vnode.attrs.is ||\n\t\t\t// If it's a normal element, let's try to avoid a few browser bugs.\n\t\t\tkey !== \"href\" && key !== \"list\" && key !== \"form\" && key !== \"width\" && key !== \"height\"// && key !== \"type\"\n\t\t\t// Defer the property check until *after* we check everything.\n\t\t) && key in vnode.dom\n\t}\n\n\t//style\n\tvar uppercaseRegex = /[A-Z]/g\n\tfunction toLowerCase(capital) { return \"-\" + capital.toLowerCase() }\n\tfunction normalizeKey(key) {\n\t\treturn key[0] === \"-\" && key[1] === \"-\" ? key :\n\t\t\tkey === \"cssFloat\" ? \"float\" :\n\t\t\t\tkey.replace(uppercaseRegex, toLowerCase)\n\t}\n\tfunction updateStyle(element, old, style) {\n\t\tif (old === style) {\n\t\t\t// Styles are equivalent, do nothing.\n\t\t} else if (style == null) {\n\t\t\t// New style is missing, just clear it.\n\t\t\telement.style = \"\"\n\t\t} else if (typeof style !== \"object\") {\n\t\t\t// New style is a string, let engine deal with patching.\n\t\t\telement.style = style\n\t\t} else if (old == null || typeof old !== \"object\") {\n\t\t\t// `old` is missing or a string, `style` is an object.\n\t\t\telement.style.cssText = \"\"\n\t\t\t// Add new style properties\n\t\t\tfor (var key in style) {\n\t\t\t\tvar value = style[key]\n\t\t\t\tif (value != null) element.style.setProperty(normalizeKey(key), String(value))\n\t\t\t}\n\t\t} else {\n\t\t\t// Both old & new are (different) objects.\n\t\t\t// Update style properties that have changed\n\t\t\tfor (var key in style) {\n\t\t\t\tvar value = style[key]\n\t\t\t\tif (value != null && (value = String(value)) !== String(old[key])) {\n\t\t\t\t\telement.style.setProperty(normalizeKey(key), value)\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Remove style properties that no longer exist\n\t\t\tfor (var key in old) {\n\t\t\t\tif (old[key] != null && style[key] == null) {\n\t\t\t\t\telement.style.removeProperty(normalizeKey(key))\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Here's an explanation of how this works:\n\t// 1. The event names are always (by design) prefixed by `on`.\n\t// 2. The EventListener interface accepts either a function or an object\n\t//    with a `handleEvent` method.\n\t// 3. The object does not inherit from `Object.prototype`, to avoid\n\t//    any potential interference with that (e.g. setters).\n\t// 4. The event name is remapped to the handler before calling it.\n\t// 5. In function-based event handlers, `ev.target === this`. We replicate\n\t//    that below.\n\t// 6. In function-based event handlers, `return false` prevents the default\n\t//    action and stops event propagation. We replicate that below.\n\tfunction EventDict() {\n\t\t// Save this, so the current redraw is correctly tracked.\n\t\tthis._ = currentRedraw\n\t}\n\tEventDict.prototype = Object.create(null)\n\tEventDict.prototype.handleEvent = function (ev) {\n\t\tvar handler = this[\"on\" + ev.type]\n\t\tvar result\n\t\tif (typeof handler === \"function\") result = handler.call(ev.currentTarget, ev)\n\t\telse if (typeof handler.handleEvent === \"function\") handler.handleEvent(ev)\n\t\tif (this._ && ev.redraw !== false) (0, this._)()\n\t\tif (result === false) {\n\t\t\tev.preventDefault()\n\t\t\tev.stopPropagation()\n\t\t}\n\t}\n\n\t//event\n\tfunction updateEvent(vnode, key, value) {\n\t\tif (vnode.events != null) {\n\t\t\tvnode.events._ = currentRedraw\n\t\t\tif (vnode.events[key] === value) return\n\t\t\tif (value != null && (typeof value === \"function\" || typeof value === \"object\")) {\n\t\t\t\tif (vnode.events[key] == null) vnode.dom.addEventListener(key.slice(2), vnode.events, false)\n\t\t\t\tvnode.events[key] = value\n\t\t\t} else {\n\t\t\t\tif (vnode.events[key] != null) vnode.dom.removeEventListener(key.slice(2), vnode.events, false)\n\t\t\t\tvnode.events[key] = undefined\n\t\t\t}\n\t\t} else if (value != null && (typeof value === \"function\" || typeof value === \"object\")) {\n\t\t\tvnode.events = new EventDict()\n\t\t\tvnode.dom.addEventListener(key.slice(2), vnode.events, false)\n\t\t\tvnode.events[key] = value\n\t\t}\n\t}\n\n\t//lifecycle\n\tfunction initLifecycle(source, vnode, hooks) {\n\t\tif (typeof source.oninit === \"function\") callHook.call(source.oninit, vnode)\n\t\tif (typeof source.oncreate === \"function\") hooks.push(callHook.bind(source.oncreate, vnode))\n\t}\n\tfunction updateLifecycle(source, vnode, hooks) {\n\t\tif (typeof source.onupdate === \"function\") hooks.push(callHook.bind(source.onupdate, vnode))\n\t}\n\tfunction shouldNotUpdate(vnode, old) {\n\t\tdo {\n\t\t\tif (vnode.attrs != null && typeof vnode.attrs.onbeforeupdate === \"function\") {\n\t\t\t\tvar force = callHook.call(vnode.attrs.onbeforeupdate, vnode, old)\n\t\t\t\tif (force !== undefined && !force) break\n\t\t\t}\n\t\t\tif (typeof vnode.tag !== \"string\" && typeof vnode.state.onbeforeupdate === \"function\") {\n\t\t\t\tvar force = callHook.call(vnode.state.onbeforeupdate, vnode, old)\n\t\t\t\tif (force !== undefined && !force) break\n\t\t\t}\n\t\t\treturn false\n\t\t} while (false); // eslint-disable-line no-constant-condition\n\t\tvnode.dom = old.dom\n\t\tvnode.domSize = old.domSize\n\t\tvnode.instance = old.instance\n\t\t// One would think having the actual latest attributes would be ideal,\n\t\t// but it doesn't let us properly diff based on our current internal\n\t\t// representation. We have to save not only the old DOM info, but also\n\t\t// the attributes used to create it, as we diff *that*, not against the\n\t\t// DOM directly (with a few exceptions in `setAttr`). And, of course, we\n\t\t// need to save the children and text as they are conceptually not\n\t\t// unlike special \"attributes\" internally.\n\t\tvnode.attrs = old.attrs\n\t\tvnode.children = old.children\n\t\tvnode.text = old.text\n\t\treturn true\n\t}\n\n\tvar currentDOM\n\n\treturn function(dom, vnodes, redraw) {\n\t\tif (!dom) throw new TypeError(\"DOM element being rendered to does not exist.\")\n\t\tif (currentDOM != null && dom.contains(currentDOM)) {\n\t\t\tthrow new TypeError(\"Node is currently being rendered to and thus is locked.\")\n\t\t}\n\t\tvar prevRedraw = currentRedraw\n\t\tvar prevDOM = currentDOM\n\t\tvar hooks = []\n\t\tvar active = activeElement()\n\t\tvar namespace = dom.namespaceURI\n\n\t\tcurrentDOM = dom\n\t\tcurrentRedraw = typeof redraw === \"function\" ? redraw : undefined\n\t\tcurrentRender = {}\n\t\ttry {\n\t\t\t// First time rendering into a node clears it out\n\t\t\tif (dom.vnodes == null) dom.textContent = \"\"\n\t\t\tvnodes = Vnode.normalizeChildren(Array.isArray(vnodes) ? vnodes : [vnodes])\n\t\t\tupdateNodes(dom, dom.vnodes, vnodes, hooks, null, namespace === \"http://www.w3.org/1999/xhtml\" ? undefined : namespace)\n\t\t\tdom.vnodes = vnodes\n\t\t\t// `document.activeElement` can return null: https://html.spec.whatwg.org/multipage/interaction.html#dom-document-activeelement\n\t\t\tif (active != null && activeElement() !== active && typeof active.focus === \"function\") active.focus()\n\t\t\tfor (var i = 0; i < hooks.length; i++) hooks[i]()\n\t\t} finally {\n\t\t\tcurrentRedraw = prevRedraw\n\t\t\tcurrentDOM = prevDOM\n\t\t}\n\t}\n}\n", "\"use strict\"\n\nmodule.exports = require(\"./render/render\")(typeof window !== \"undefined\" ? window : null)\n", "\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\n\nmodule.exports = function(render, schedule, console) {\n\tvar subscriptions = []\n\tvar pending = false\n\tvar offset = -1\n\n\tfunction sync() {\n\t\tfor (offset = 0; offset < subscriptions.length; offset += 2) {\n\t\t\ttry { render(subscriptions[offset], Vnode(subscriptions[offset + 1]), redraw) }\n\t\t\tcatch (e) { console.error(e) }\n\t\t}\n\t\toffset = -1\n\t}\n\n\tfunction redraw() {\n\t\tif (!pending) {\n\t\t\tpending = true\n\t\t\tschedule(function() {\n\t\t\t\tpending = false\n\t\t\t\tsync()\n\t\t\t})\n\t\t}\n\t}\n\n\tredraw.sync = sync\n\n\tfunction mount(root, component) {\n\t\tif (component != null && component.view == null && typeof component !== \"function\") {\n\t\t\tthrow new TypeError(\"m.mount expects a component, not a vnode.\")\n\t\t}\n\n\t\tvar index = subscriptions.indexOf(root)\n\t\tif (index >= 0) {\n\t\t\tsubscriptions.splice(index, 2)\n\t\t\tif (index <= offset) offset -= 2\n\t\t\trender(root, [])\n\t\t}\n\n\t\tif (component != null) {\n\t\t\tsubscriptions.push(root, component)\n\t\t\trender(root, Vnode(component), redraw)\n\t\t}\n\t}\n\n\treturn {mount: mount, redraw: redraw}\n}\n", "\"use strict\"\n\nvar render = require(\"./render\")\n\nmodule.exports = require(\"./api/mount-redraw\")(render, typeof requestAnimationFrame !== \"undefined\" ? requestAnimationFrame : null, typeof console !== \"undefined\" ? console : null)\n", "\"use strict\"\n\nmodule.exports = function(object) {\n\tif (Object.prototype.toString.call(object) !== \"[object Object]\") return \"\"\n\n\tvar args = []\n\tfor (var key in object) {\n\t\tdestructure(key, object[key])\n\t}\n\n\treturn args.join(\"&\")\n\n\tfunction destructure(key, value) {\n\t\tif (Array.isArray(value)) {\n\t\t\tfor (var i = 0; i < value.length; i++) {\n\t\t\t\tdestructure(key + \"[\" + i + \"]\", value[i])\n\t\t\t}\n\t\t}\n\t\telse if (Object.prototype.toString.call(value) === \"[object Object]\") {\n\t\t\tfor (var i in value) {\n\t\t\t\tdestructure(key + \"[\" + i + \"]\", value[i])\n\t\t\t}\n\t\t}\n\t\telse args.push(encodeURIComponent(key) + (value != null && value !== \"\" ? \"=\" + encodeURIComponent(value) : \"\"))\n\t}\n}\n", "// This exists so I'm only saving it once.\n\"use strict\"\n\nvar hasOwn = require(\"./hasOwn\")\n\nmodule.exports = Object.assign || function(target, source) {\n\tfor (var key in source) {\n\t\tif (hasOwn.call(source, key)) target[key] = source[key]\n\t}\n}\n", "\"use strict\"\n\nvar buildQueryString = require(\"../querystring/build\")\nvar assign = require(\"../util/assign\")\n\n// Returns `path` from `template` + `params`\nmodule.exports = function(template, params) {\n\tif ((/:([^\\/\\.-]+)(\\.{3})?:/).test(template)) {\n\t\tthrow new SyntaxError(\"Template parameter names must be separated by either a '/', '-', or '.'.\")\n\t}\n\tif (params == null) return template\n\tvar queryIndex = template.indexOf(\"?\")\n\tvar hashIndex = template.indexOf(\"#\")\n\tvar queryEnd = hashIndex < 0 ? template.length : hashIndex\n\tvar pathEnd = queryIndex < 0 ? queryEnd : queryIndex\n\tvar path = template.slice(0, pathEnd)\n\tvar query = {}\n\n\tassign(query, params)\n\n\tvar resolved = path.replace(/:([^\\/\\.-]+)(\\.{3})?/g, function(m, key, variadic) {\n\t\tdelete query[key]\n\t\t// If no such parameter exists, don't interpolate it.\n\t\tif (params[key] == null) return m\n\t\t// Escape normal parameters, but not variadic ones.\n\t\treturn variadic ? params[key] : encodeURIComponent(String(params[key]))\n\t})\n\n\t// In case the template substitution adds new query/hash parameters.\n\tvar newQueryIndex = resolved.indexOf(\"?\")\n\tvar newHashIndex = resolved.indexOf(\"#\")\n\tvar newQueryEnd = newHashIndex < 0 ? resolved.length : newHashIndex\n\tvar newPathEnd = newQueryIndex < 0 ? newQueryEnd : newQueryIndex\n\tvar result = resolved.slice(0, newPathEnd)\n\n\tif (queryIndex >= 0) result += template.slice(queryIndex, queryEnd)\n\tif (newQueryIndex >= 0) result += (queryIndex < 0 ? \"?\" : \"&\") + resolved.slice(newQueryIndex, newQueryEnd)\n\tvar querystring = buildQueryString(query)\n\tif (querystring) result += (queryIndex < 0 && newQueryIndex < 0 ? \"?\" : \"&\") + querystring\n\tif (hashIndex >= 0) result += template.slice(hashIndex)\n\tif (newHashIndex >= 0) result += (hashIndex < 0 ? \"\" : \"&\") + resolved.slice(newHashIndex)\n\treturn result\n}\n", "\"use strict\"\n\nvar buildPathname = require(\"../pathname/build\")\nvar hasOwn = require(\"../util/hasOwn\")\n\nmodule.exports = function($window, oncompletion) {\n\tfunction PromiseProxy(executor) {\n\t\treturn new Promise(executor)\n\t}\n\n\tfunction makeRequest(url, args) {\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\turl = buildPathname(url, args.params)\n\t\t\tvar method = args.method != null ? args.method.toUpperCase() : \"GET\"\n\t\t\tvar body = args.body\n\t\t\tvar assumeJSON = (args.serialize == null || args.serialize === JSON.serialize) && !(body instanceof $window.FormData || body instanceof $window.URLSearchParams)\n\t\t\tvar responseType = args.responseType || (typeof args.extract === \"function\" ? \"\" : \"json\")\n\n\t\t\tvar xhr = new $window.XMLHttpRequest(), aborted = false, isTimeout = false\n\t\t\tvar original = xhr, replacedAbort\n\t\t\tvar abort = xhr.abort\n\n\t\t\txhr.abort = function() {\n\t\t\t\taborted = true\n\t\t\t\tabort.call(this)\n\t\t\t}\n\n\t\t\txhr.open(method, url, args.async !== false, typeof args.user === \"string\" ? args.user : undefined, typeof args.password === \"string\" ? args.password : undefined)\n\n\t\t\tif (assumeJSON && body != null && !hasHeader(args, \"content-type\")) {\n\t\t\t\txhr.setRequestHeader(\"Content-Type\", \"application/json; charset=utf-8\")\n\t\t\t}\n\t\t\tif (typeof args.deserialize !== \"function\" && !hasHeader(args, \"accept\")) {\n\t\t\t\txhr.setRequestHeader(\"Accept\", \"application/json, text/*\")\n\t\t\t}\n\t\t\tif (args.withCredentials) xhr.withCredentials = args.withCredentials\n\t\t\tif (args.timeout) xhr.timeout = args.timeout\n\t\t\txhr.responseType = responseType\n\n\t\t\tfor (var key in args.headers) {\n\t\t\t\tif (hasOwn.call(args.headers, key)) {\n\t\t\t\t\txhr.setRequestHeader(key, args.headers[key])\n\t\t\t\t}\n\t\t\t}\n\n\t\t\txhr.onreadystatechange = function(ev) {\n\t\t\t\t// Don't throw errors on xhr.abort().\n\t\t\t\tif (aborted) return\n\n\t\t\t\tif (ev.target.readyState === 4) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar success = (ev.target.status >= 200 && ev.target.status < 300) || ev.target.status === 304 || (/^file:\\/\\//i).test(url)\n\t\t\t\t\t\t// When the response type isn't \"\" or \"text\",\n\t\t\t\t\t\t// `xhr.responseText` is the wrong thing to use.\n\t\t\t\t\t\t// Browsers do the right thing and throw here, and we\n\t\t\t\t\t\t// should honor that and do the right thing by\n\t\t\t\t\t\t// preferring `xhr.response` where possible/practical.\n\t\t\t\t\t\tvar response = ev.target.response, message\n\n\t\t\t\t\t\tif (responseType === \"json\") {\n\t\t\t\t\t\t\t// For IE and Edge, which don't implement\n\t\t\t\t\t\t\t// `responseType: \"json\"`.\n\t\t\t\t\t\t\tif (!ev.target.responseType && typeof args.extract !== \"function\") {\n\t\t\t\t\t\t\t\t// Handle no-content which will not parse.\n\t\t\t\t\t\t\t\ttry { response = JSON.parse(ev.target.responseText) }\n\t\t\t\t\t\t\t\tcatch (e) { response = null }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (!responseType || responseType === \"text\") {\n\t\t\t\t\t\t\t// Only use this default if it's text. If a parsed\n\t\t\t\t\t\t\t// document is needed on old IE and friends (all\n\t\t\t\t\t\t\t// unsupported), the user should use a custom\n\t\t\t\t\t\t\t// `config` instead. They're already using this at\n\t\t\t\t\t\t\t// their own risk.\n\t\t\t\t\t\t\tif (response == null) response = ev.target.responseText\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (typeof args.extract === \"function\") {\n\t\t\t\t\t\t\tresponse = args.extract(ev.target, args)\n\t\t\t\t\t\t\tsuccess = true\n\t\t\t\t\t\t} else if (typeof args.deserialize === \"function\") {\n\t\t\t\t\t\t\tresponse = args.deserialize(response)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (success) {\n\t\t\t\t\t\t\tif (typeof args.type === \"function\") {\n\t\t\t\t\t\t\t\tif (Array.isArray(response)) {\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < response.length; i++) {\n\t\t\t\t\t\t\t\t\t\tresponse[i] = new args.type(response[i])\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse response = new args.type(response)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tresolve(response)\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tvar completeErrorResponse = function() {\n\t\t\t\t\t\t\t\ttry { message = ev.target.responseText }\n\t\t\t\t\t\t\t\tcatch (e) { message = response }\n\t\t\t\t\t\t\t\tvar error = new Error(message)\n\t\t\t\t\t\t\t\terror.code = ev.target.status\n\t\t\t\t\t\t\t\terror.response = response\n\t\t\t\t\t\t\t\treject(error)\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (xhr.status === 0) {\n\t\t\t\t\t\t\t\t// Use setTimeout to push this code block onto the event queue\n\t\t\t\t\t\t\t\t// This allows `xhr.ontimeout` to run in the case that there is a timeout\n\t\t\t\t\t\t\t\t// Without this setTimeout, `xhr.ontimeout` doesn't have a chance to reject\n\t\t\t\t\t\t\t\t// as `xhr.onreadystatechange` will run before it\n\t\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\t\tif (isTimeout) return\n\t\t\t\t\t\t\t\t\tcompleteErrorResponse()\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t} else completeErrorResponse()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\treject(e)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\txhr.ontimeout = function (ev) {\n\t\t\t\tisTimeout = true\n\t\t\t\tvar error = new Error(\"Request timed out\")\n\t\t\t\terror.code = ev.target.status\n\t\t\t\treject(error)\n\t\t\t}\n\n\t\t\tif (typeof args.config === \"function\") {\n\t\t\t\txhr = args.config(xhr, args, url) || xhr\n\n\t\t\t\t// Propagate the `abort` to any replacement XHR as well.\n\t\t\t\tif (xhr !== original) {\n\t\t\t\t\treplacedAbort = xhr.abort\n\t\t\t\t\txhr.abort = function() {\n\t\t\t\t\t\taborted = true\n\t\t\t\t\t\treplacedAbort.call(this)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (body == null) xhr.send()\n\t\t\telse if (typeof args.serialize === \"function\") xhr.send(args.serialize(body))\n\t\t\telse if (body instanceof $window.FormData || body instanceof $window.URLSearchParams) xhr.send(body)\n\t\t\telse xhr.send(JSON.stringify(body))\n\t\t})\n\t}\n\n\t// In case the global Promise is some userland library's where they rely on\n\t// `foo instanceof this.constructor`, `this.constructor.resolve(value)`, or\n\t// similar. Let's *not* break them.\n\tPromiseProxy.prototype = Promise.prototype\n\tPromiseProxy.__proto__ = Promise // eslint-disable-line no-proto\n\n\tfunction hasHeader(args, name) {\n\t\tfor (var key in args.headers) {\n\t\t\tif (hasOwn.call(args.headers, key) && key.toLowerCase() === name) return true\n\t\t}\n\t\treturn false\n\t}\n\n\treturn {\n\t\trequest: function(url, args) {\n\t\t\tif (typeof url !== \"string\") { args = url; url = url.url }\n\t\t\telse if (args == null) args = {}\n\t\t\tvar promise = makeRequest(url, args)\n\t\t\tif (args.background === true) return promise\n\t\t\tvar count = 0\n\t\t\tfunction complete() {\n\t\t\t\tif (--count === 0 && typeof oncompletion === \"function\") oncompletion()\n\t\t\t}\n\n\t\t\treturn wrap(promise)\n\n\t\t\tfunction wrap(promise) {\n\t\t\t\tvar then = promise.then\n\t\t\t\t// Set the constructor, so engines know to not await or resolve\n\t\t\t\t// this as a native promise. At the time of writing, this is\n\t\t\t\t// only necessary for V8, but their behavior is the correct\n\t\t\t\t// behavior per spec. See this spec issue for more details:\n\t\t\t\t// https://github.com/tc39/ecma262/issues/1577. Also, see the\n\t\t\t\t// corresponding comment in `request/tests/test-request.js` for\n\t\t\t\t// a bit more background on the issue at hand.\n\t\t\t\tpromise.constructor = PromiseProxy\n\t\t\t\tpromise.then = function() {\n\t\t\t\t\tcount++\n\t\t\t\t\tvar next = then.apply(promise, arguments)\n\t\t\t\t\tnext.then(complete, function(e) {\n\t\t\t\t\t\tcomplete()\n\t\t\t\t\t\tif (count === 0) throw e\n\t\t\t\t\t})\n\t\t\t\t\treturn wrap(next)\n\t\t\t\t}\n\t\t\t\treturn promise\n\t\t\t}\n\t\t}\n\t}\n}\n", "\"use strict\"\n\nvar mountRedraw = require(\"./mount-redraw\")\n\nmodule.exports = require(\"./request/request\")(typeof window !== \"undefined\" ? window : null, mountRedraw.redraw)\n", "\"use strict\"\n\nfunction decodeURIComponentSave(str) {\n\ttry {\n\t\treturn decodeURIComponent(str)\n\t} catch(err) {\n\t\treturn str\n\t}\n}\n\nmodule.exports = function(string) {\n\tif (string === \"\" || string == null) return {}\n\tif (string.charAt(0) === \"?\") string = string.slice(1)\n\n\tvar entries = string.split(\"&\"), counters = {}, data = {}\n\tfor (var i = 0; i < entries.length; i++) {\n\t\tvar entry = entries[i].split(\"=\")\n\t\tvar key = decodeURIComponentSave(entry[0])\n\t\tvar value = entry.length === 2 ? decodeURIComponentSave(entry[1]) : \"\"\n\n\t\tif (value === \"true\") value = true\n\t\telse if (value === \"false\") value = false\n\n\t\tvar levels = key.split(/\\]\\[?|\\[/)\n\t\tvar cursor = data\n\t\tif (key.indexOf(\"[\") > -1) levels.pop()\n\t\tfor (var j = 0; j < levels.length; j++) {\n\t\t\tvar level = levels[j], nextLevel = levels[j + 1]\n\t\t\tvar isNumber = nextLevel == \"\" || !isNaN(parseInt(nextLevel, 10))\n\t\t\tif (level === \"\") {\n\t\t\t\tvar key = levels.slice(0, j).join()\n\t\t\t\tif (counters[key] == null) {\n\t\t\t\t\tcounters[key] = Array.isArray(cursor) ? cursor.length : 0\n\t\t\t\t}\n\t\t\t\tlevel = counters[key]++\n\t\t\t}\n\t\t\t// Disallow direct prototype pollution\n\t\t\telse if (level === \"__proto__\") break\n\t\t\tif (j === levels.length - 1) cursor[level] = value\n\t\t\telse {\n\t\t\t\t// Read own properties exclusively to disallow indirect\n\t\t\t\t// prototype pollution\n\t\t\t\tvar desc = Object.getOwnPropertyDescriptor(cursor, level)\n\t\t\t\tif (desc != null) desc = desc.value\n\t\t\t\tif (desc == null) cursor[level] = desc = isNumber ? [] : {}\n\t\t\t\tcursor = desc\n\t\t\t}\n\t\t}\n\t}\n\treturn data\n}\n", "\"use strict\"\n\nvar parseQueryString = require(\"../querystring/parse\")\n\n// Returns `{path, params}` from `url`\nmodule.exports = function(url) {\n\tvar queryIndex = url.indexOf(\"?\")\n\tvar hashIndex = url.indexOf(\"#\")\n\tvar queryEnd = hashIndex < 0 ? url.length : hashIndex\n\tvar pathEnd = queryIndex < 0 ? queryEnd : queryIndex\n\tvar path = url.slice(0, pathEnd).replace(/\\/{2,}/g, \"/\")\n\n\tif (!path) path = \"/\"\n\telse {\n\t\tif (path[0] !== \"/\") path = \"/\" + path\n\t}\n\treturn {\n\t\tpath: path,\n\t\tparams: queryIndex < 0\n\t\t\t? {}\n\t\t\t: parseQueryString(url.slice(queryIndex + 1, queryEnd)),\n\t}\n}\n", "\"use strict\"\n\nvar parsePathname = require(\"./parse\")\n\n// Compiles a template into a function that takes a resolved path (without query\n// strings) and returns an object containing the template parameters with their\n// parsed values. This expects the input of the compiled template to be the\n// output of `parsePathname`. Note that it does *not* remove query parameters\n// specified in the template.\nmodule.exports = function(template) {\n\tvar templateData = parsePathname(template)\n\tvar templateKeys = Object.keys(templateData.params)\n\tvar keys = []\n\tvar regexp = new RegExp(\"^\" + templateData.path.replace(\n\t\t// I escape literal text so people can use things like `:file.:ext` or\n\t\t// `:lang-:locale` in routes. This is all merged into one pass so I\n\t\t// don't also accidentally escape `-` and make it harder to detect it to\n\t\t// ban it from template parameters.\n\t\t/:([^\\/.-]+)(\\.{3}|\\.(?!\\.)|-)?|[\\\\^$*+.()|\\[\\]{}]/g,\n\t\tfunction(m, key, extra) {\n\t\t\tif (key == null) return \"\\\\\" + m\n\t\t\tkeys.push({k: key, r: extra === \"...\"})\n\t\t\tif (extra === \"...\") return \"(.*)\"\n\t\t\tif (extra === \".\") return \"([^/]+)\\\\.\"\n\t\t\treturn \"([^/]+)\" + (extra || \"\")\n\t\t}\n\t) + \"$\")\n\treturn function(data) {\n\t\t// First, check the params. Usually, there isn't any, and it's just\n\t\t// checking a static set.\n\t\tfor (var i = 0; i < templateKeys.length; i++) {\n\t\t\tif (templateData.params[templateKeys[i]] !== data.params[templateKeys[i]]) return false\n\t\t}\n\t\t// If no interpolations exist, let's skip all the ceremony\n\t\tif (!keys.length) return regexp.test(data.path)\n\t\tvar values = regexp.exec(data.path)\n\t\tif (values == null) return false\n\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\tdata.params[keys[i].k] = keys[i].r ? values[i + 1] : decodeURIComponent(values[i + 1])\n\t\t}\n\t\treturn true\n\t}\n}\n", "\"use strict\"\n\n// Note: this is mildly perf-sensitive.\n//\n// It does *not* use `delete` - dynamic `delete`s usually cause objects to bail\n// out into dictionary mode and just generally cause a bunch of optimization\n// issues within engines.\n//\n// Ideally, I would've preferred to do this, if it weren't for the optimization\n// issues:\n//\n// ```js\n// const hasOwn = require(\"./hasOwn\")\n// const magic = [\n//     \"key\", \"oninit\", \"oncreate\", \"onbeforeupdate\", \"onupdate\",\n//     \"onbeforeremove\", \"onremove\",\n// ]\n// module.exports = (attrs, extras) => {\n//     const result = Object.assign(Object.create(null), attrs)\n//     for (const key of magic) delete result[key]\n//     if (extras != null) for (const key of extras) delete result[key]\n//     return result\n// }\n// ```\n\nvar hasOwn = require(\"./hasOwn\")\n// Words in RegExp literals are sometimes mangled incorrectly by the internal bundler, so use RegExp().\nvar magic = new RegExp(\"^(?:key|oninit|oncreate|onbeforeupdate|onupdate|onbeforeremove|onremove)$\")\n\nmodule.exports = function(attrs, extras) {\n\tvar result = {}\n\n\tif (extras != null) {\n\t\tfor (var key in attrs) {\n\t\t\tif (hasOwn.call(attrs, key) && !magic.test(key) && extras.indexOf(key) < 0) {\n\t\t\t\tresult[key] = attrs[key]\n\t\t\t}\n\t\t}\n\t} else {\n\t\tfor (var key in attrs) {\n\t\t\tif (hasOwn.call(attrs, key) && !magic.test(key)) {\n\t\t\t\tresult[key] = attrs[key]\n\t\t\t}\n\t\t}\n\t}\n\n\treturn result\n}\n", "\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\nvar m = require(\"../render/hyperscript\")\n\nvar buildPathname = require(\"../pathname/build\")\nvar parsePathname = require(\"../pathname/parse\")\nvar compileTemplate = require(\"../pathname/compileTemplate\")\nvar assign = require(\"../util/assign\")\nvar censor = require(\"../util/censor\")\n\nvar sentinel = {}\n\nfunction decodeURIComponentSave(component) {\n\ttry {\n\t\treturn decodeURIComponent(component)\n\t} catch(e) {\n\t\treturn component\n\t}\n}\n\nmodule.exports = function($window, mountRedraw) {\n\tvar callAsync = $window == null\n\t\t// In case Mithril.js' loaded globally without the DOM, let's not break\n\t\t? null\n\t\t: typeof $window.setImmediate === \"function\" ? $window.setImmediate : $window.setTimeout\n\tvar p = Promise.resolve()\n\n\tvar scheduled = false\n\n\t// state === 0: init\n\t// state === 1: scheduled\n\t// state === 2: done\n\tvar ready = false\n\tvar state = 0\n\n\tvar compiled, fallbackRoute\n\n\tvar currentResolver = sentinel, component, attrs, currentPath, lastUpdate\n\n\tvar RouterRoot = {\n\t\tonbeforeupdate: function() {\n\t\t\tstate = state ? 2 : 1\n\t\t\treturn !(!state || sentinel === currentResolver)\n\t\t},\n\t\tonremove: function() {\n\t\t\t$window.removeEventListener(\"popstate\", fireAsync, false)\n\t\t\t$window.removeEventListener(\"hashchange\", resolveRoute, false)\n\t\t},\n\t\tview: function() {\n\t\t\tif (!state || sentinel === currentResolver) return\n\t\t\t// Wrap in a fragment to preserve existing key semantics\n\t\t\tvar vnode = [Vnode(component, attrs.key, attrs)]\n\t\t\tif (currentResolver) vnode = currentResolver.render(vnode[0])\n\t\t\treturn vnode\n\t\t},\n\t}\n\n\tvar SKIP = route.SKIP = {}\n\n\tfunction resolveRoute() {\n\t\tscheduled = false\n\t\t// Consider the pathname holistically. The prefix might even be invalid,\n\t\t// but that's not our problem.\n\t\tvar prefix = $window.location.hash\n\t\tif (route.prefix[0] !== \"#\") {\n\t\t\tprefix = $window.location.search + prefix\n\t\t\tif (route.prefix[0] !== \"?\") {\n\t\t\t\tprefix = $window.location.pathname + prefix\n\t\t\t\tif (prefix[0] !== \"/\") prefix = \"/\" + prefix\n\t\t\t}\n\t\t}\n\t\t// This seemingly useless `.concat()` speeds up the tests quite a bit,\n\t\t// since the representation is consistently a relatively poorly\n\t\t// optimized cons string.\n\t\tvar path = prefix.concat()\n\t\t\t.replace(/(?:%[a-f89][a-f0-9])+/gim, decodeURIComponentSave)\n\t\t\t.slice(route.prefix.length)\n\t\tvar data = parsePathname(path)\n\n\t\tassign(data.params, $window.history.state)\n\n\t\tfunction reject(e) {\n\t\t\tconsole.error(e)\n\t\t\tsetPath(fallbackRoute, null, {replace: true})\n\t\t}\n\n\t\tloop(0)\n\t\tfunction loop(i) {\n\t\t\t// state === 0: init\n\t\t\t// state === 1: scheduled\n\t\t\t// state === 2: done\n\t\t\tfor (; i < compiled.length; i++) {\n\t\t\t\tif (compiled[i].check(data)) {\n\t\t\t\t\tvar payload = compiled[i].component\n\t\t\t\t\tvar matchedRoute = compiled[i].route\n\t\t\t\t\tvar localComp = payload\n\t\t\t\t\tvar update = lastUpdate = function(comp) {\n\t\t\t\t\t\tif (update !== lastUpdate) return\n\t\t\t\t\t\tif (comp === SKIP) return loop(i + 1)\n\t\t\t\t\t\tcomponent = comp != null && (typeof comp.view === \"function\" || typeof comp === \"function\")? comp : \"div\"\n\t\t\t\t\t\tattrs = data.params, currentPath = path, lastUpdate = null\n\t\t\t\t\t\tcurrentResolver = payload.render ? payload : null\n\t\t\t\t\t\tif (state === 2) mountRedraw.redraw()\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tstate = 2\n\t\t\t\t\t\t\tmountRedraw.redraw.sync()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// There's no understating how much I *wish* I could\n\t\t\t\t\t// use `async`/`await` here...\n\t\t\t\t\tif (payload.view || typeof payload === \"function\") {\n\t\t\t\t\t\tpayload = {}\n\t\t\t\t\t\tupdate(localComp)\n\t\t\t\t\t}\n\t\t\t\t\telse if (payload.onmatch) {\n\t\t\t\t\t\tp.then(function () {\n\t\t\t\t\t\t\treturn payload.onmatch(data.params, path, matchedRoute)\n\t\t\t\t\t\t}).then(update, path === fallbackRoute ? null : reject)\n\t\t\t\t\t}\n\t\t\t\t\telse update(\"div\")\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (path === fallbackRoute) {\n\t\t\t\tthrow new Error(\"Could not resolve default route \" + fallbackRoute + \".\")\n\t\t\t}\n\t\t\tsetPath(fallbackRoute, null, {replace: true})\n\t\t}\n\t}\n\n\t// Set it unconditionally so `m.route.set` and `m.route.Link` both work,\n\t// even if neither `pushState` nor `hashchange` are supported. It's\n\t// cleared if `hashchange` is used, since that makes it automatically\n\t// async.\n\tfunction fireAsync() {\n\t\tif (!scheduled) {\n\t\t\tscheduled = true\n\t\t\t// TODO: just do `mountRedraw.redraw()` here and elide the timer\n\t\t\t// dependency. Note that this will muck with tests a *lot*, so it's\n\t\t\t// not as easy of a change as it sounds.\n\t\t\tcallAsync(resolveRoute)\n\t\t}\n\t}\n\n\tfunction setPath(path, data, options) {\n\t\tpath = buildPathname(path, data)\n\t\tif (ready) {\n\t\t\tfireAsync()\n\t\t\tvar state = options ? options.state : null\n\t\t\tvar title = options ? options.title : null\n\t\t\tif (options && options.replace) $window.history.replaceState(state, title, route.prefix + path)\n\t\t\telse $window.history.pushState(state, title, route.prefix + path)\n\t\t}\n\t\telse {\n\t\t\t$window.location.href = route.prefix + path\n\t\t}\n\t}\n\n\tfunction route(root, defaultRoute, routes) {\n\t\tif (!root) throw new TypeError(\"DOM element being rendered to does not exist.\")\n\n\t\tcompiled = Object.keys(routes).map(function(route) {\n\t\t\tif (route[0] !== \"/\") throw new SyntaxError(\"Routes must start with a '/'.\")\n\t\t\tif ((/:([^\\/\\.-]+)(\\.{3})?:/).test(route)) {\n\t\t\t\tthrow new SyntaxError(\"Route parameter names must be separated with either '/', '.', or '-'.\")\n\t\t\t}\n\t\t\treturn {\n\t\t\t\troute: route,\n\t\t\t\tcomponent: routes[route],\n\t\t\t\tcheck: compileTemplate(route),\n\t\t\t}\n\t\t})\n\t\tfallbackRoute = defaultRoute\n\t\tif (defaultRoute != null) {\n\t\t\tvar defaultData = parsePathname(defaultRoute)\n\n\t\t\tif (!compiled.some(function (i) { return i.check(defaultData) })) {\n\t\t\t\tthrow new ReferenceError(\"Default route doesn't match any known routes.\")\n\t\t\t}\n\t\t}\n\n\t\tif (typeof $window.history.pushState === \"function\") {\n\t\t\t$window.addEventListener(\"popstate\", fireAsync, false)\n\t\t} else if (route.prefix[0] === \"#\") {\n\t\t\t$window.addEventListener(\"hashchange\", resolveRoute, false)\n\t\t}\n\n\t\tready = true\n\t\tmountRedraw.mount(root, RouterRoot)\n\t\tresolveRoute()\n\t}\n\troute.set = function(path, data, options) {\n\t\tif (lastUpdate != null) {\n\t\t\toptions = options || {}\n\t\t\toptions.replace = true\n\t\t}\n\t\tlastUpdate = null\n\t\tsetPath(path, data, options)\n\t}\n\troute.get = function() {return currentPath}\n\troute.prefix = \"#!\"\n\troute.Link = {\n\t\tview: function(vnode) {\n\t\t\t// Omit the used parameters from the rendered element - they are\n\t\t\t// internal. Also, censor the various lifecycle methods.\n\t\t\t//\n\t\t\t// We don't strip the other parameters because for convenience we\n\t\t\t// let them be specified in the selector as well.\n\t\t\tvar child = m(\n\t\t\t\tvnode.attrs.selector || \"a\",\n\t\t\t\tcensor(vnode.attrs, [\"options\", \"params\", \"selector\", \"onclick\"]),\n\t\t\t\tvnode.children\n\t\t\t)\n\t\t\tvar options, onclick, href\n\n\t\t\t// Let's provide a *right* way to disable a route link, rather than\n\t\t\t// letting people screw up accessibility on accident.\n\t\t\t//\n\t\t\t// The attribute is coerced so users don't get surprised over\n\t\t\t// `disabled: 0` resulting in a button that's somehow routable\n\t\t\t// despite being visibly disabled.\n\t\t\tif (child.attrs.disabled = Boolean(child.attrs.disabled)) {\n\t\t\t\tchild.attrs.href = null\n\t\t\t\tchild.attrs[\"aria-disabled\"] = \"true\"\n\t\t\t\t// If you *really* do want add `onclick` on a disabled link, use\n\t\t\t\t// an `oncreate` hook to add it.\n\t\t\t} else {\n\t\t\t\toptions = vnode.attrs.options\n\t\t\t\tonclick = vnode.attrs.onclick\n\t\t\t\t// Easier to build it now to keep it isomorphic.\n\t\t\t\thref = buildPathname(child.attrs.href, vnode.attrs.params)\n\t\t\t\tchild.attrs.href = route.prefix + href\n\t\t\t\tchild.attrs.onclick = function(e) {\n\t\t\t\t\tvar result\n\t\t\t\t\tif (typeof onclick === \"function\") {\n\t\t\t\t\t\tresult = onclick.call(e.currentTarget, e)\n\t\t\t\t\t} else if (onclick == null || typeof onclick !== \"object\") {\n\t\t\t\t\t\t// do nothing\n\t\t\t\t\t} else if (typeof onclick.handleEvent === \"function\") {\n\t\t\t\t\t\tonclick.handleEvent(e)\n\t\t\t\t\t}\n\n\t\t\t\t\t// Adapted from React Router's implementation:\n\t\t\t\t\t// https://github.com/ReactTraining/react-router/blob/520a0acd48ae1b066eb0b07d6d4d1790a1d02482/packages/react-router-dom/modules/Link.js\n\t\t\t\t\t//\n\t\t\t\t\t// Try to be flexible and intuitive in how we handle links.\n\t\t\t\t\t// Fun fact: links aren't as obvious to get right as you\n\t\t\t\t\t// would expect. There's a lot more valid ways to click a\n\t\t\t\t\t// link than this, and one might want to not simply click a\n\t\t\t\t\t// link, but right click or command-click it to copy the\n\t\t\t\t\t// link target, etc. Nope, this isn't just for blind people.\n\t\t\t\t\tif (\n\t\t\t\t\t\t// Skip if `onclick` prevented default\n\t\t\t\t\t\tresult !== false && !e.defaultPrevented &&\n\t\t\t\t\t\t// Ignore everything but left clicks\n\t\t\t\t\t\t(e.button === 0 || e.which === 0 || e.which === 1) &&\n\t\t\t\t\t\t// Let the browser handle `target=_blank`, etc.\n\t\t\t\t\t\t(!e.currentTarget.target || e.currentTarget.target === \"_self\") &&\n\t\t\t\t\t\t// No modifier keys\n\t\t\t\t\t\t!e.ctrlKey && !e.metaKey && !e.shiftKey && !e.altKey\n\t\t\t\t\t) {\n\t\t\t\t\t\te.preventDefault()\n\t\t\t\t\t\te.redraw = false\n\t\t\t\t\t\troute.set(href, null, options)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn child\n\t\t},\n\t}\n\troute.param = function(key) {\n\t\treturn attrs && key != null ? attrs[key] : attrs\n\t}\n\n\treturn route\n}\n", "\"use strict\"\n\nvar mountRedraw = require(\"./mount-redraw\")\n\nmodule.exports = require(\"./api/router\")(typeof window !== \"undefined\" ? window : null, mountRedraw)\n", "\"use strict\"\n\nvar hyperscript = require(\"./hyperscript\")\nvar request = require(\"./request\")\nvar mountRedraw = require(\"./mount-redraw\")\nvar domFor = require(\"./render/domFor\")\n\nvar m = function m() { return hyperscript.apply(this, arguments) }\nm.m = hyperscript\nm.trust = hyperscript.trust\nm.fragment = hyperscript.fragment\nm.Fragment = \"[\"\nm.mount = mountRedraw.mount\nm.route = require(\"./route\")\nm.render = require(\"./render\")\nm.redraw = mountRedraw.redraw\nm.request = request.request\nm.parseQueryString = require(\"./querystring/parse\")\nm.buildQueryString = require(\"./querystring/build\")\nm.parsePathname = require(\"./pathname/parse\")\nm.buildPathname = require(\"./pathname/build\")\nm.vnode = require(\"./render/vnode\")\nm.censor = require(\"./util/censor\")\nm.domFor = domFor.domFor\n\nmodule.exports = m\n", "const urlAlphabet =\r\n\t\"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict\";\r\n\r\nexport const random = (bytes: number): Uint8Array => {\r\n\treturn crypto.getRandomValues(new Uint8Array(bytes));\r\n};\r\n\r\nexport const customRandom = (\r\n\talphabet: string,\r\n\tdefaultSize: number,\r\n\tgetRandom: (bytes: number) => Uint8Array,\r\n): (() => string) => {\r\n\t// First, a bitmask is necessary to generate the ID. The bitmask makes bytes\r\n\t// values closer to the alphabet size. The bitmask calculates the closest\r\n\t// `2^31 - 1` number, which exceeds the alphabet size.\r\n\t// For example, the bitmask for the alphabet size 30 is 31 (00011111).\r\n\t// `Math.clz32` is not used, because it is not available in browsers.\r\n\tconst mask = (2 << (Math.log(alphabet.length - 1) / Math.LN2)) - 1;\r\n\t// Though, the bitmask solution is not perfect since the bytes exceeding\r\n\t// the alphabet size are refused. Therefore, to reliably generate the ID,\r\n\t// the random bytes redundancy has to be satisfied.\r\n\r\n\t// Note: every hardware random generator call is performance expensive,\r\n\t// because the system call for entropy collection takes a lot of time.\r\n\t// So, to avoid additional system calls, extra bytes are requested in advance.\r\n\r\n\t// Next, a step determines how many random bytes to generate.\r\n\t// The number of random bytes gets decided upon the ID size, mask,\r\n\t// alphabet size, and magic number 1.6 (using 1.6 peaks at performance\r\n\t// according to benchmarks).\r\n\r\n\t// `-~f => Math.ceil(f)` if f is a float\r\n\t// `-~i => i + 1` if i is an integer\r\n\tconst step = -~((1.6 * mask * defaultSize) / alphabet.length);\r\n\r\n\treturn (size = defaultSize) => {\r\n\t\tlet id = \"\";\r\n\t\twhile (true) {\r\n\t\t\tconst bytes = getRandom(step);\r\n\t\t\t// A compact alternative for `for (var i = 0; i < step; i++)`.\r\n\t\t\tlet j = step;\r\n\t\t\twhile (j--) {\r\n\t\t\t\t// Adding `|| ''` refuses a random byte that exceeds the alphabet size.\r\n\t\t\t\tid += alphabet[bytes[j] & mask] || \"\";\r\n\t\t\t\tif (id.length === size) return id;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n};\r\n\r\nexport const customAlphabet = (alphabet: string, size = 21): (() => string) => {\r\n\treturn customRandom(alphabet, size, random);\r\n};\r\n\r\nexport const nanoid = (size = 21): string => {\r\n\tlet id = \"\";\r\n\tconst bytes = crypto.getRandomValues(new Uint8Array(size));\r\n\t// biome-ignore lint/style/noParameterAssign: <explanation>\r\n\twhile (size--) {\r\n\t\t// Using the bitwise AND operator to \"cap\" the value of\r\n\t\t// the random byte from 255 to 63, in that way we can make sure\r\n\t\t// that the value will be a valid index for the \"chars\" string.\r\n\t\tid += urlAlphabet[bytes[size] & 63];\r\n\t}\r\n\treturn id;\r\n};\r\n", "import m from \"./mithril\";\r\nimport { nanoid } from \"./nanoid\";\r\n\r\nenum Type {\r\n\tInfo = 0,\r\n\tSuccess = 1,\r\n\tWarning = 2,\r\n\tDanger = 3,\r\n}\r\n\r\ninterface Toast {\r\n\tid: string;\r\n\ttype: Type;\r\n\ttext: string;\r\n\ttimeout: number;\r\n}\r\n\r\ninterface State {\r\n\tlist: Toast[];\r\n\tdestroy: (toast: Toast) => void;\r\n}\r\n\r\nconst state: State = {\r\n\tlist: [],\r\n\tdestroy: (toast: Toast) => {\r\n\t\tconst index = state.list.findIndex((entry) => entry.id === toast.id);\r\n\t\tstate.list.slice(index, 1);\r\n\t},\r\n};\r\n\r\nexport const addSuccess = (text: string, timeout = 3000) => {\r\n\tstate.list.push({ id: nanoid(), type: Type.Success, text, timeout });\r\n};\r\n\r\nexport const addInfo = (text: string, timeout = 3000) => {\r\n\tstate.list.push({ id: nanoid(), type: Type.Info, text, timeout });\r\n};\r\n\r\nexport const addWarning = (text: string, timeout = 3000) => {\r\n\tstate.list.push({ id: nanoid(), type: Type.Warning, text, timeout });\r\n};\r\n\r\nexport const addDanger = (text: string, timeout = 3000) => {\r\n\tstate.list.push({ id: nanoid(), type: Type.Danger, text, timeout });\r\n};\r\n\r\nexport const Drawer: m.ClosureComponent = () => {\r\n\treturn {\r\n\t\tview: () => {\r\n\t\t\treturn m(\r\n\t\t\t\t\"div\",\r\n\t\t\t\tstate.list.map((toast) => {\r\n\t\t\t\t\treturn m(\"div\", { key: toast.id }, m(Bread, { toast: toast }));\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t},\r\n\t};\r\n};\r\n\r\ninterface BreadAttrs extends m.Attributes {\r\n\ttoast: Toast;\r\n}\r\n\r\nconst Bread: m.ClosureComponent<BreadAttrs> = () => {\r\n\treturn {\r\n\t\toninit: (vnode) => {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tstate.destroy(vnode.attrs.toast);\r\n\t\t\t}, vnode.attrs.toast.timeout);\r\n\t\t},\r\n\t\tonbeforeremove: (vnode) => {\r\n\t\t\tvnode.dom.classList.add(\"\");\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tstate.destroy(vnode.attrs.toast);\r\n\t\t\t\tm.redraw();\r\n\t\t\t}, 300);\r\n\t\t},\r\n\t\tview: (vnode) => {\r\n\t\t\treturn m(\"div\");\r\n\t\t},\r\n\t};\r\n};\r\n", "import type m from \"@/mithril\";\r\n\r\nexport const AddBulk: m.ClosureComponent = (vnode) => {\r\n\treturn {\r\n\t\tview: (vnode) => {},\r\n\t};\r\n};\r\n\r\nexport default AddBulk;\r\n", "import type m from \"@/mithril\";\r\n\r\nexport const AddScan: m.ClosureComponent = (vnode) => {\r\n\treturn {\r\n\t\tview: (vnode) => {},\r\n\t};\r\n};\r\n\r\nexport default AddScan;\r\n", "import type m from \"@/mithril\";\r\n\r\nexport const AddSearch: m.ClosureComponent = (vnode) => {\r\n\treturn {\r\n\t\tview: (vnode) => {},\r\n\t};\r\n};\r\n\r\nexport default AddSearch;\r\n", "export type Elevation = \"none\" | \"small\" | \"medium\" | \"large\";\r\nexport type Kind = \"fill\" | \"primary\" | \"secondary\" | \"tertiary\";\r\nexport type Shapes = \"round\" | \"square\";\r\nexport type Sizes = \"small\" | \"medium\" | \"large\" | \"extra\";\r\n\r\nexport const defaultElevation: Elevation = \"none\";\r\nexport const ELEVATION: { [KEY in Elevation]: string } = {\r\n\tnone: \"-elevation-none\",\r\n\tsmall: \"-elevation-small\",\r\n\tmedium: \"-elevation-medium\",\r\n\tlarge: \"-elevation-large\",\r\n};\r\n\r\nexport const defaultKind: Kind = \"primary\";\r\nexport const KIND: { [KEY in Kind]: string } = {\r\n\tfill: \"-fill\",\r\n\tprimary: \"-primary\",\r\n\tsecondary: \"-secondary\",\r\n\ttertiary: \"-tertiary\",\r\n};\r\n\r\nexport const defaultShape: Shapes = \"round\";\r\nexport const SHAPE: { [KEY in Shapes]: string } = {\r\n\tround: \"-round\",\r\n\tsquare: \"-square\",\r\n};\r\n\r\nexport const defaultSize: Sizes = \"medium\";\r\nexport const SIZE: { [KEY in Sizes]: string } = {\r\n\tsmall: \"-small\",\r\n\tmedium: \"-medium\",\r\n\tlarge: \"-large\",\r\n\textra: \"-extra\",\r\n};\r\n", "import m from \"@/mithril\";\r\n\r\nimport type { Elevation, Kind, Shapes, Sizes } from \"./core\";\r\nimport { ELEVATION, KIND, SHAPE, SIZE, defaultElevation, defaultKind, defaultShape, defaultSize } from \"./core\";\r\n\r\nexport interface ButtonAttributes extends m.Attributes {\r\n\tdisabled?: boolean;\r\n\ticon?: m.Child;\r\n\r\n\televation?: Elevation;\r\n\tkind?: Kind;\r\n\tshape?: Shapes;\r\n\tsize?: Sizes;\r\n}\r\n\r\nexport const Button: m.ClosureComponent<ButtonAttributes> = () => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\tconst attrs = vnode.attrs;\r\n\r\n\t\t\tconst disabled = attrs.disabled || false;\r\n\r\n\t\t\tconst elevation = ELEVATION[attrs.elevation || defaultElevation];\r\n\t\t\tconst kind = KIND[attrs.kind || defaultKind];\r\n\t\t\tconst shape = SHAPE[attrs.shape || defaultShape];\r\n\t\t\tconst size = SIZE[attrs.size || defaultSize];\r\n\r\n\t\t\treturn m(\r\n\t\t\t\t\"button\",\r\n\t\t\t\t{ class: `a-button ${elevation} ${kind} ${shape} ${size}`, disabled: disabled },\r\n\t\t\t\t[attrs.icon ? attrs.icon : [], vnode.children],\r\n\t\t\t);\r\n\t\t},\r\n\t};\r\n};\r\n", "import m from \"@/mithril\";\r\n\r\nimport type { Elevation, Kind, Sizes } from \"./core\";\r\nimport { ELEVATION, KIND, SIZE, defaultElevation, defaultKind, defaultSize } from \"./core\";\r\n\r\nexport interface FabAttributes extends m.Attributes {\r\n\ticon: m.Child;\r\n\r\n\televation?: Elevation;\r\n\tkind?: Kind;\r\n\tsize?: Sizes;\r\n}\r\n\r\nexport const Fab: m.ClosureComponent<FabAttributes> = () => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\tconst attrs = vnode.attrs;\r\n\r\n\t\t\tconst elevation = ELEVATION[attrs.elevation || defaultElevation];\r\n\t\t\tconst kind = KIND[attrs.kind || defaultKind];\r\n\t\t\tconst size = SIZE[attrs.size || defaultSize];\r\n\r\n\t\t\treturn [\r\n\t\t\t\tvnode.children,\r\n\t\t\t\tm(\"button\", { ...attrs, class: `a-fab ${elevation} ${kind} ${size}` }, [\r\n\t\t\t\t\tattrs.icon,\r\n\t\t\t\t])\r\n\t\t\t];\r\n\t\t},\r\n\t};\r\n};\r\n", "import m from \"@/mithril\";\r\n\r\nexport interface IconProps {\r\n\twidth?: string;\r\n\theight?: string;\r\n\tfill?: string;\r\n\tfilled?: boolean;\r\n}\r\n\r\nexport const IconBase: m.ClosureComponent<IconProps | undefined> = (vnode) => {\r\n\tconst attrs = vnode.attrs || {};\r\n\r\n\tconst width = attrs.width || \"24px\";\r\n\tconst height = attrs.height || \"24px\";\r\n\tconst fill = attrs.fill || \"currentColor\";\r\n\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\treturn m(\r\n\t\t\t\t\"svg\",\r\n\t\t\t\t{\r\n\t\t\t\t\txmlns: \"http://www.w3.org/2000/svg\",\r\n\t\t\t\t\tviewBox: \"0 -960 960 960\",\r\n\t\t\t\t\twidth: width,\r\n\t\t\t\t\theight: height,\r\n\t\t\t\t\tfill: fill,\r\n\t\t\t\t},\r\n\t\t\t\tvnode.children,\r\n\t\t\t);\r\n\t\t},\r\n\t};\r\n};\r\n", "import m from \"@/mithril\";\r\n\r\nimport { IconBase, type IconProps } from \"./base\";\r\n\r\nexport const Add: m.ClosureComponent<IconProps | undefined> = () => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\treturn m(\r\n\t\t\t\tIconBase,\r\n\t\t\t\t{ ...vnode.attrs },\r\n\t\t\t\tm(\"path\", {\r\n\t\t\t\t\td: \"M440-440H200v-80h240v-240h80v240h240v80H520v240h-80v-240Z\",\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t},\r\n\t};\r\n};\r\n", "import m from \"@/mithril\";\r\nimport { Button } from \"@/mithril-material-3/button\";\r\nimport { Fab } from \"@/mithril-material-3/fab\";\r\nimport { Add } from \"@/mithril-material-3/icon/add\";\r\n\r\nexport const Bookshelf: m.ClosureComponent = (vnode) => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\treturn [\r\n\t\t\t\tm(Fab, { kind: \"tertiary\", icon: m(Add) }, [\r\n\t\t\t\t\tm(Button, { icon: m(Add) }, \"Bulk Scan\"),\r\n\t\t\t\t\tm(Button, { icon: m(Add) }, \"Scan\"),\r\n\t\t\t\t\tm(Button, { icon: m(Add) }, \"Add\"),\r\n\t\t\t\t]),\r\n\t\t\t\tm(\"h1\", \"Books!\"),\r\n\t\t\t];\r\n\t\t},\r\n\t};\r\n};", "export type RecursivePartial<T> = {\r\n    [P in keyof T]?: RecursivePartial<T[P]>;\r\n};\r\n\r\ntype OptionInner<T> = { some: true; value: T } | { some: false };\r\n\r\ninterface OptionMatcher<T, O> {\r\n\tsome(value: T): O;\r\n\tnone(): O;\r\n}\r\n\r\nexport class Option<T> {\r\n\tprivate readonly inner: OptionInner<T>;\r\n\r\n\tprivate constructor(inner: OptionInner<T>) {\r\n\t\tthis.inner = inner;\r\n\t}\r\n\r\n\tpublic static Some<T>(value: T): Option<T> {\r\n\t\treturn new Option<T>({ some: true, value: value });\r\n\t}\r\n\r\n\tpublic static None<T, E>(): Option<T> {\r\n\t\treturn new Option<T>({ some: false });\r\n\t}\r\n\r\n\tpublic match<O>(matcher: OptionMatcher<T, O>): O {\r\n\t\tif (this.inner.some) {\r\n\t\t\treturn matcher.some(this.inner.value);\r\n\t\t}\r\n\r\n\t\treturn matcher.none();\r\n\t}\r\n\r\n\tpublic map<O>(fn: (_: T) => O): Option<O> {\r\n\t\treturn this.match({\r\n\t\t\tsome: (t) => Option.Some(fn(t)),\r\n\t\t\tnone: () => Option.None(),\r\n\t\t});\r\n\t}\r\n\r\n\tpublic andThen<O>(fn: (_: T) => Option<O>): Option<O> {\r\n\t\treturn this.match({\r\n\t\t\tsome: (t) => fn(t),\r\n\t\t\tnone: () => Option.None(),\r\n\t\t});\r\n\t}\r\n\r\n\tpublic unwrapOr(value: T | null): T | null {\r\n\t\tif (this.inner.some) {\r\n\t\t\treturn this.inner.value;\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t}\r\n}\r\n\r\nexport const Some = <T>(value: T): Option<T> => {\r\n\treturn Option.Some(value);\r\n};\r\n\r\nexport const None = <T>(): Option<T> => {\r\n\treturn Option.None();\r\n};\r\n\r\ntype ResultInner<T, E> = { ok: true; value: T } | { ok: false; error: E };\r\n\r\ninterface ResultMatcher<T, E, O> {\r\n\tok(value: T): O;\r\n\terr(error: E): O;\r\n}\r\n\r\nexport class Result<T, E = Error> {\r\n\tprivate readonly inner: ResultInner<T, E>;\r\n\r\n\tprivate constructor(inner: ResultInner<T, E>) {\r\n\t\tthis.inner = inner;\r\n\t}\r\n\r\n\tpublic static Ok<T, E>(value: T): Result<T, E> {\r\n\t\treturn new Result<T, E>({ ok: true, value: value });\r\n\t}\r\n\r\n\tpublic static Err<T, E>(error: E): Result<T, E> {\r\n\t\treturn new Result<T, E>({ ok: false, error: error });\r\n\t}\r\n\r\n\tpublic isOk(): boolean {\r\n\t\treturn this.inner.ok;\r\n\t}\r\n\r\n\tpublic match<O>(matcher: ResultMatcher<T, E, O>): O {\r\n\t\tif (this.inner.ok) {\r\n\t\t\treturn matcher.ok(this.inner.value);\r\n\t\t}\r\n\r\n\t\treturn matcher.err(this.inner.error);\r\n\t}\r\n\r\n\tpublic map<O>(fn: (_: T) => O): Result<O, E> {\r\n\t\treturn this.match({\r\n\t\t\tok: (t) => Result.Ok(fn(t)),\r\n\t\t\terr: (e) => Result.Err(e),\r\n\t\t});\r\n\t}\r\n\r\n\tpublic mapErr<O>(fn: (_: E) => O): Result<T, O> {\r\n\t\treturn this.match({\r\n\t\t\tok: (t) => Result.Ok(t),\r\n\t\t\terr: (e) => Result.Err(fn(e)),\r\n\t\t});\r\n\t}\r\n\r\n\tpublic andThen<O>(fn: (_: T) => Result<O, E>): Result<O, E> {\r\n\t\treturn this.match({\r\n\t\t\tok: (t) => fn(t),\r\n\t\t\terr: (e) => Result.Err(e),\r\n\t\t});\r\n\t}\r\n\r\n\tpublic asOk(): Option<T> {\r\n\t\treturn this.match({\r\n\t\t\tok: (t) => Option.Some(t),\r\n\t\t\terr: (_) => Option.None(),\r\n\t\t});\r\n\t}\r\n\r\n\tpublic unwrapOr(value: T | null): T | null {\r\n\t\tif (this.inner.ok) {\r\n\t\t\treturn this.inner.value;\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t}\r\n}\r\n\r\nexport const Ok = <T, E = Error>(value: T): Result<T, E> => {\r\n\treturn Result.Ok(value);\r\n};\r\n\r\nexport const Err = <T, E = Error>(error: E): Result<T, E> => {\r\n\treturn Result.Err(error);\r\n};\r\n\r\nexport const wrapError = <T>(message: string, func: () => T): Result<T> => {\r\n\ttry {\r\n\t\treturn Ok(func());\r\n\t} catch (ex: unknown) {\r\n\t\treturn Err(new Error(message));\r\n\t}\r\n};\r\n\r\nexport const wrapAsyncError = async <T>(message: string, func: () => Promise<T>): Promise<Result<T>> => {\r\n\ttry {\r\n\t\treturn Ok(await func());\r\n\t} catch (ex: unknown) {\r\n\t\treturn Err(new Error(message));\r\n\t}\r\n};\r\n\r\nexport function to<\r\n\t// biome-ignore lint/suspicious/noExplicitAny: <explanation>\r\n\tT extends { readonly __tag: symbol; value: any } = {\r\n\t\treadonly __tag: unique symbol;\r\n\t\tvalue: never;\r\n\t},\r\n>(value: T[\"value\"]): T {\r\n\t// biome-ignore lint/suspicious/noExplicitAny: <explanation>\r\n\treturn value as any as T;\r\n}\r\n\r\nexport function from<\r\n\t// biome-ignore lint/suspicious/noExplicitAny: <explanation>\r\n\tT extends { readonly __tag: symbol; value: any },\r\n>(value: T): T[\"value\"] {\r\n\t// biome-ignore lint/suspicious/noExplicitAny: <explanation>\r\n\treturn value as any as T[\"value\"];\r\n}\r\n\r\nexport function arrayShuffle<T>(array: T[], seed: number): T[] {\r\n\tlet currentIndex = array.length;\r\n\tlet temporaryValue: T;\r\n\tlet randomIndex: number;\r\n\r\n\tconst random = (seed: number) => {\r\n\t\t// biome-ignore lint/style/noParameterAssign: <explanation>\r\n\t\tconst x = Math.sin(seed++) * 10000;\r\n\t\treturn x - Math.floor(x);\r\n\t};\r\n\r\n\t// While there remain elements to shuffle...\r\n\twhile (0 !== currentIndex) {\r\n\t\t// Pick a remaining element...\r\n\t\trandomIndex = Math.floor(random(seed) * currentIndex--);\r\n\r\n\t\t// And swap it with the current element.\r\n\t\ttemporaryValue = array[currentIndex];\r\n\t\tarray[currentIndex] = array[randomIndex];\r\n\t\tarray[randomIndex] = temporaryValue;\r\n\r\n\t\t// biome-ignore lint/style/noParameterAssign: <explanation>\r\n\t\t++seed;\r\n\t}\r\n\r\n\treturn array;\r\n}\r\n\r\nexport const until = (conditionFunction: () => boolean): Promise<void> => {\r\n\tconst poll = (resolve: () => void) => {\r\n\t\tif (conditionFunction()) {\r\n\t\t\tresolve();\r\n\t\t} else {\r\n\t\t\tsetTimeout(() => poll(resolve), 400);\r\n\t\t}\r\n\t};\r\n\r\n\treturn new Promise(poll);\r\n};\r\n", "import type * as api from \"../models/api\";\r\nimport type { Bookshelf, BookshelfId, UserBook } from \"../models/database\";\r\nimport { Err, from, Ok, type Result } from \"../utils\";\r\n\r\ntype FetchResponse<T> =\r\n\t| (Omit<Response, \"json\"> & {\r\n\t\t\tstatus: 200;\r\n\t\t\tjson: () => api.Response<T> | PromiseLike<api.Response<T>>;\r\n\t\t})\r\n\t| (Omit<Response, \"json\"> & {\r\n\t\t\tstatus: 404;\r\n\t\t\tjson: () => api.ErrorNotFound | PromiseLike<api.ErrorNotFound>;\r\n\t\t})\r\n\t| (Omit<Response, \"json\"> & {\r\n\t\t\tstatus: 500;\r\n\t\t\tjson: () => api.ErrorServerError | PromiseLike<api.ErrorServerError>;\r\n\t\t});\r\n\r\nconst fetchWrapper = async <T>(method: string, url: string): Promise<Result<T>> => {\r\n\tconst res = (await fetch(url, {\r\n\t\tmethod: method,\r\n\t\theaders: {\r\n\t\t\tAccept: \"application/json\",\r\n\t\t},\r\n\t})) as FetchResponse<T>;\r\n\r\n\tif (res.status === 200) {\r\n\t\tconst json = await res.json();\r\n\r\n\t\treturn Ok(json.data);\r\n\t}\r\n\r\n\tif (res.status === 404 || res.status === 500) {\r\n\t\tconst json = await res.json();\r\n\r\n\t\treturn Err(new Error(json.message));\r\n\t}\r\n\r\n\treturn Err(new Error(`Fetch '${url}' responded with an unknown status code`));\r\n};\r\n\r\nexport const getBookshelves = async (): Promise<Result<Bookshelf[]>> => fetchWrapper(\"GET\", \"/api/bookshelves\");\r\n\r\nexport const getBooks = async (id: BookshelfId): Promise<Result<UserBook[]>> => fetchWrapper(\"GET\", `/api/bookshelves/${from(id)}`);\r\n", "import m from \"@/mithril\";\r\n\r\nimport { IconBase, type IconProps } from \"./base\";\r\n\r\nexport const MoreVert: m.ClosureComponent<IconProps | undefined> = () => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\treturn m(\r\n\t\t\t\tIconBase,\r\n\t\t\t\t{ ...vnode.attrs },\r\n\t\t\t\tm(\"path\", {\r\n\t\t\t\t\td: \"M480-160q-33 0-56.5-23.5T400-240q0-33 23.5-56.5T480-320q33 0 56.5 23.5T560-240q0 33-23.5 56.5T480-160Zm0-240q-33 0-56.5-23.5T400-480q0-33 23.5-56.5T480-560q33 0 56.5 23.5T560-480q0 33-23.5 56.5T480-400Zm0-240q-33 0-56.5-23.5T400-720q0-33 23.5-56.5T480-800q33 0 56.5 23.5T560-720q0 33-23.5 56.5T480-640Z\",\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t},\r\n\t};\r\n};\r\n", "import m from \"@/mithril\";\r\nimport { MoreVert } from \"@/mithril-material-3/icon/more-vert\";\r\n\r\nexport interface HeaderAttrs extends m.Attributes {\r\n\ttitle: string;\r\n\tsubtitle?: string;\r\n}\r\n\r\nexport const Header: m.ClosureComponent<HeaderAttrs> = () => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\tconst attrs = vnode.attrs;\r\n\r\n\t\t\treturn m(\"div\", { class: \"flex items-center\" }, [\r\n\t\t\t\tm(\"span\", { class: \"flex flex-grow items-center\" }, [\r\n\t\t\t\t\tm(\"h2\", { class: \"text-2xl m-2 text-on-surface\" }, attrs.title),\r\n\t\t\t\t\tattrs.subtitle\r\n\t\t\t\t\t\t? m(\"h2\", { class: \"text-on-surface-variant\" }, attrs.subtitle)\r\n\t\t\t\t\t\t: [],\r\n\t\t\t\t]),\r\n\t\t\t\tm(MoreVert),\r\n\t\t\t]);\r\n\t\t},\r\n\t};\r\n};\r\n", "import m from \"@/mithril\";\r\n\r\nimport type { Book } from \"../models/database\";\r\nimport { from } from \"../utils\";\r\n\r\nexport interface BookCoverProps {\r\n\tentry: Book;\r\n}\r\n\r\nexport const BookCover: m.ClosureComponent<BookCoverProps> = () => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\tconst attrs = vnode.attrs;\r\n\r\n\t\t\treturn m(\r\n\t\t\t\t\"div\",\r\n\t\t\t\t{\r\n\t\t\t\t\tkey: from(attrs.entry.id),\r\n\t\t\t\t\tclass: \"bg-surface-bright rounded h-64 w-36 flex content-center\",\r\n\t\t\t\t},\r\n\t\t\t\t[\r\n\t\t\t\t\tm(\"img\", {\r\n\t\t\t\t\t\tclass: \"aspect-[9/16] max-h-64 max-w-36 object-contain my-auto\",\r\n\t\t\t\t\t\tsrc: attrs.entry.cover,\r\n\t\t\t\t\t}),\r\n\t\t\t\t],\r\n\t\t\t);\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default BookCover;\r\n", "import m from \"@/mithril\";\r\n\r\nimport { Header } from \"./header\";\r\nimport { BookCover } from \"./bookcover\";\r\n\r\nimport { getBooks } from \"../database/client\";\r\nimport type { UserBook, Bookshelf } from \"../models/database\";\r\nimport { Err, from, type Result } from \"../utils\";\r\n\r\nexport interface BookshelfEntryProps {\r\n\tentry: Bookshelf;\r\n}\r\n\r\nexport const BookshelfEntry: m.ClosureComponent<BookshelfEntryProps> = () => {\r\n\tlet books: Result<UserBook[]> = Err(new Error(\"book cover didn't load\"));\r\n\r\n\treturn {\r\n\t\toninit: async (vnode) => {\r\n\t\t\tconst attrs = vnode.attrs;\r\n\r\n\t\t\tbooks = await getBooks(attrs.entry.id);\r\n\r\n\t\t\tm.redraw();\r\n\t\t},\r\n\t\tview: (vnode) => {\r\n\t\t\tconst attrs = vnode.attrs;\r\n\r\n\t\t\treturn books.match({\r\n\t\t\t\tok: (books) => {\r\n\t\t\t\t\treturn m(\"div\", { key: from(attrs.entry.id) }, [\r\n\t\t\t\t\t\tm(Header, { title: attrs.entry.name }),\r\n\t\t\t\t\t\tm(\"div\", { class: \"flex flex-row gap-3.5 overflow-x-scroll\" }, [\r\n\t\t\t\t\t\t\tbooks.map((book) => {\r\n\t\t\t\t\t\t\t\treturn m(BookCover, { entry: book.book });\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t]),\r\n\t\t\t\t\t]);\r\n\t\t\t\t},\r\n\t\t\t\terr: (_) => {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default BookshelfEntry;\r\n", "import m from \"@/mithril\";\r\n\r\nimport type { IconProps } from \"./icon/base\";\r\n\r\nexport interface TabsAttr extends m.Attributes {\r\n\titems: NavItemAttr[];\r\n}\r\n\r\nexport const Nav: m.ClosureComponent<TabsAttr> = () => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\tconst attrs = vnode.attrs;\r\n\r\n\t\t\treturn m(\"div\", { class: \"a-nav\" }, [\r\n\t\t\t\tm(\r\n\t\t\t\t\t\"div\",\r\n\t\t\t\t\t{ class: \"a-nav--container\" },\r\n\t\t\t\t\tattrs.items.map((item) => {\r\n\t\t\t\t\t\treturn m(NavItem, { ...item }, []);\r\n\t\t\t\t\t}),\r\n\t\t\t\t),\r\n\t\t\t]);\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport interface NavItemAttr extends m.RouteLinkAttrs {\r\n\ticon: m.ClosureComponent<IconProps>;\r\n\tbadge?: string;\r\n\tlabel: string;\r\n}\r\n\r\nexport const NavItem: m.ClosureComponent<NavItemAttr> = () => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\tconst attrs = vnode.attrs;\r\n\r\n\t\t\tconst isActive = m.route.get() === attrs.href;\r\n\r\n\t\t\treturn m(\r\n\t\t\t\tm.route.Link,\r\n\t\t\t\t{ ...attrs, class: `a-nav_item${isActive ? \" -active\" : \"\"}` },\r\n\t\t\t\t[\r\n\t\t\t\t\tm(\"div\", { class: \"a-nav_item--icon\" }, [\r\n\t\t\t\t\t\tm(attrs.icon, { filled: isActive }),\r\n\t\t\t\t\t\tattrs.badge ? m(\"div\", { class: \"a-nav_item--badge\" }, []) : [],\r\n\t\t\t\t\t]),\r\n\t\t\t\t\tm(\"div\", { class: \"a-nav_item--text\" }, attrs.label),\r\n\t\t\t\t],\r\n\t\t\t);\r\n\t\t},\r\n\t};\r\n};\r\n", "import m from \"@/mithril\";\r\n\r\nimport { IconBase, type IconProps } from \"./base\";\r\n\r\nexport const Label: m.ClosureComponent<IconProps | undefined> = () => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\tconst attrs = vnode.attrs || {};\r\n\r\n\t\t\tconst filled = attrs.filled || false;\r\n\r\n\t\t\tconst OUTLINED =\r\n\t\t\t\t\"M840-480 666-234q-11 16-28.5 25t-37.5 9H200q-33 0-56.5-23.5T120-280v-400q0-33 23.5-56.5T200-760h400q20 0 37.5 9t28.5 25l174 246Zm-98 0L600-680H200v400h400l142-200Zm-542 0v200-400 200Z\";\r\n\t\t\tconst FILLED =\r\n\t\t\t\t\"M840-480 666-234q-11 16-28.5 25t-37.5 9H200q-33 0-56.5-23.5T120-280v-400q0-33 23.5-56.5T200-760h400q20 0 37.5 9t28.5 25l174 246Z\";\r\n\r\n\t\t\treturn m(\r\n\t\t\t\tIconBase,\r\n\t\t\t\t{ ...vnode.attrs },\r\n\t\t\t\tm(\"path\", {\r\n\t\t\t\t\td: filled ? FILLED : OUTLINED,\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t},\r\n\t};\r\n};\r\n", "import m from \"@/mithril\";\r\n\r\nimport { IconBase, type IconProps } from \"./base\";\r\n\r\nexport const Shelves: m.ClosureComponent<IconProps | undefined> = () => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\tconst attrs = vnode.attrs || {};\r\n\r\n\t\t\tconst filled = attrs.filled || false;\r\n\r\n\t\t\tconst OUTLINED =\r\n\t\t\t\t\"M120-40v-880h80v80h560v-80h80v880h-80v-80H200v80h-80Zm80-480h80v-160h240v160h240v-240H200v240Zm0 320h240v-160h240v160h80v-240H200v240Zm160-320h80v-80h-80v80Zm160 320h80v-80h-80v80ZM360-520h80-80Zm160 320h80-80Z\";\r\n\t\t\tconst FILLED =\r\n\t\t\t\t\"M120-40v-880h80v80h560v-80h80v880h-80v-80H200v80h-80Zm80-480h80v-160h240v160h240v-240H200v240Zm0 320h240v-160h240v160h80v-240H200v240Z\";\r\n\r\n\t\t\treturn m(\r\n\t\t\t\tIconBase,\r\n\t\t\t\t{ ...vnode.attrs },\r\n\t\t\t\tm(\"path\", {\r\n\t\t\t\t\td: filled ? FILLED : OUTLINED,\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t},\r\n\t};\r\n};\r\n", "import m from \"@/mithril\";\r\n\r\nimport { IconBase, type IconProps } from \"./base\";\r\n\r\nexport const ShoppingMode: m.ClosureComponent<IconProps | undefined> = () => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\tconst attrs = vnode.attrs || {};\r\n\r\n\t\t\tconst filled = attrs.filled || false;\r\n\r\n\t\t\tconst OUTLINED =\r\n\t\t\t\t\"M446-80q-15 0-30-6t-27-18L103-390q-12-12-17.5-26.5T80-446q0-15 5.5-30t17.5-27l352-353q11-11 26-17.5t31-6.5h287q33 0 56.5 23.5T879-800v287q0 16-6 30.5T856-457L503-104q-12 12-27 18t-30 6Zm0-80 353-354v-286H513L160-446l286 286Zm253-480q25 0 42.5-17.5T759-700q0-25-17.5-42.5T699-760q-25 0-42.5 17.5T639-700q0 25 17.5 42.5T699-640ZM480-480Z\";\r\n\t\t\tconst FILLED =\r\n\t\t\t\t\"M447-80q-15 0-30-6t-27-18L104-390q-12-12-17.5-26.5T81-446q0-15 5.5-30t17.5-27l352-353q11-11 26-17.5t31-6.5h287q33 0 56.5 23.5T880-800v287q0 16-6 30.5T857-457L504-104q-12 12-27 18t-30 6Zm253-560q25 0 42.5-17.5T760-700q0-25-17.5-42.5T700-760q-25 0-42.5 17.5T640-700q0 25 17.5 42.5T700-640Z\";\r\n\r\n\t\t\treturn m(\r\n\t\t\t\tIconBase,\r\n\t\t\t\t{ ...vnode.attrs },\r\n\t\t\t\tm(\"path\", {\r\n\t\t\t\t\td: filled ? FILLED : OUTLINED,\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t},\r\n\t};\r\n};\r\n", "import m from \"@/mithril\";\r\n\r\nimport { IconBase, type IconProps } from \"./base\";\r\n\r\nexport const Settings: m.ClosureComponent<IconProps | undefined> = () => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\tconst attrs = vnode.attrs || {};\r\n\r\n\t\t\tconst filled = attrs.filled || false;\r\n\r\n\t\t\tconst OUTLINED =\r\n\t\t\t\t\"m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-2 13.5l103 78-110 190-118-50q-11 8-23 15t-24 12L590-80H370Zm70-80h79l14-106q31-8 57.5-23.5T639-327l99 41 39-68-86-65q5-14 7-29.5t2-31.5q0-16-2-31.5t-7-29.5l86-65-39-68-99 42q-22-23-48.5-38.5T533-694l-13-106h-79l-14 106q-31 8-57.5 23.5T321-633l-99-41-39 68 86 64q-5 15-7 30t-2 32q0 16 2 31t7 30l-86 65 39 68 99-42q22 23 48.5 38.5T427-266l13 106Zm42-180q58 0 99-41t41-99q0-58-41-99t-99-41q-59 0-99.5 41T342-480q0 58 40.5 99t99.5 41Zm-2-140Z\";\r\n\t\t\tconst FILLED =\r\n\t\t\t\t\"m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-2 13.5l103 78-110 190-118-50q-11 8-23 15t-24 12L590-80H370Zm112-260q58 0 99-41t41-99q0-58-41-99t-99-41q-59 0-99.5 41T342-480q0 58 40.5 99t99.5 41Z\";\r\n\r\n\t\t\treturn m(\r\n\t\t\t\tIconBase,\r\n\t\t\t\t{ ...vnode.attrs },\r\n\t\t\t\tm(\"path\", {\r\n\t\t\t\t\td: filled ? FILLED : OUTLINED,\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t},\r\n\t};\r\n};\r\n", "import m from \"@/mithril\";\r\nimport * as Toast from \"@/mithril-toast\";\r\n\r\nimport { Nav } from \"@/mithril-material-3/nav\";\r\nimport { Label } from \"@/mithril-material-3/icon/label\";\r\nimport { Shelves } from \"@/mithril-material-3/icon/shelves\";\r\nimport { ShoppingMode } from \"@/mithril-material-3/icon/shopping-mode\";\r\nimport { Settings } from \"@/mithril-material-3/icon/settings\";\r\n\r\nexport const Layout: m.ClosureComponent = (_vnode) => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\tconst create = (href: string, icon: m.ClosureComponent, label: string) => ({\r\n\t\t\t\thref: href,\r\n\t\t\t\ticon: icon,\r\n\t\t\t\tlabel: label,\r\n\t\t\t});\r\n\r\n\t\t\tconst items = [\r\n\t\t\t\tcreate(\"/bookshelves\", Shelves, \"Bookshelves\"),\r\n\t\t\t\tcreate(\"/tags\", Label, \"Tags\"),\r\n\t\t\t\tcreate(\"/wishlist\", ShoppingMode, \"Wishlist\"),\r\n\t\t\t\tcreate(\"/settings\", Settings, \"Settings\"),\r\n\t\t\t];\r\n\r\n\t\t\treturn [\r\n\t\t\t\tm(Toast.Drawer),\r\n\t\t\t\tm(\"div\", { class: \"flex-1 overflow-y-scroll\" }, vnode.children),\r\n\t\t\t\tm(Nav, { items: items }, []),\r\n\t\t\t];\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default Layout;\r\n", "import m from \"@/mithril\";\r\nimport { Button } from \"@/mithril-material-3/button\";\r\nimport { Fab } from \"@/mithril-material-3/fab\";\r\nimport { Add } from \"@/mithril-material-3/icon/add\";\r\n\r\nimport { getBookshelves } from \"../../database/client\";\r\nimport type { Bookshelf } from \"../../models/database\";\r\nimport { Err, type Result } from \"../../utils\";\r\n\r\nimport BookshelfEntry from \"../../components/bookshelf\";\r\n\r\nimport Layout from \"pages/layout\";\r\n\r\nexport const Bookshelves: m.ClosureComponent = () => {\r\n\tlet bookshelves: Result<Bookshelf[]> = Err(new Error(\"bookshelves didn't load\"));\r\n\r\n\tlet fabOpen = false;\r\n\r\n\tconst toggle = () => {\r\n\t\tfabOpen = !fabOpen;\r\n\t};\r\n\r\n\treturn {\r\n\t\toninit: async () => {\r\n\t\t\tbookshelves = await getBookshelves();\r\n\t\t\tm.redraw();\r\n\t\t},\r\n\t\tview: (vnode) => {\r\n\t\t\treturn bookshelves\r\n\t\t\t\t.map((bookshelves) => {\r\n\t\t\t\t\tconst fabButtons = [\r\n\t\t\t\t\t\tm(\"div\", { class: \"absolute right-6 bottom-40 flex flex-col gap-2\" }, [\r\n\t\t\t\t\t\t\tm(Button, { size: \"small\", icon: m(Add) }, \"Bulk Scan\"),\r\n\t\t\t\t\t\t\tm(Button, { size: \"small\", icon: m(Add) }, \"Scan\"),\r\n\t\t\t\t\t\t\tm(Button, { size: \"small\", icon: m(Add) }, \"Add\"),\r\n\t\t\t\t\t\t]),\r\n\t\t\t\t\t];\r\n\r\n\t\t\t\t\tconst fab = m(Fab, { kind: \"tertiary\", icon: m(Add), onclick: toggle }, [fabOpen ? fabButtons : null]);\r\n\r\n\t\t\t\t\treturn m(Layout, [\r\n\t\t\t\t\t\tm(\"div\", { class: \"bg-zinc-100 px-4\" }, [\r\n\t\t\t\t\t\t\tfab,\r\n\t\t\t\t\t\t\tm(\"div\", { class: \"flex flex-col py-4 gap-y-2 md:gap-y-4\" }, [\r\n\t\t\t\t\t\t\t\tbookshelves.map((bookshelf) => {\r\n\t\t\t\t\t\t\t\t\treturn m(BookshelfEntry, { entry: bookshelf }, []);\r\n\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t]),\r\n\t\t\t\t\t\t]),\r\n\t\t\t\t\t]);\r\n\t\t\t\t})\r\n\t\t\t\t.unwrapOr(null);\r\n\t\t},\r\n\t};\r\n};\r\n", "import m from \"@/mithril\";\r\n\r\nimport Layout from \"pages/layout\";\r\n\r\nexport const Tags: m.ClosureComponent = (vnode) => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\treturn m(Layout, [m(\"h1\", \"Tags!\")]);\r\n\t\t},\r\n\t};\r\n};\r\n", "import m from \"@/mithril\";\r\nimport { Fab } from \"@/mithril-material-3/fab\";\r\nimport { Add } from \"@/mithril-material-3/icon/add\";\r\n\r\nimport Layout from \"pages/layout\";\r\n\r\nexport const Wishlist: m.ClosureComponent = (vnode) => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\treturn m(Layout, [\r\n\t\t\t\tm(Fab, { kind: \"tertiary\", icon: m(Add) }, []),\r\n\t\t\t\tm(\"h1\", \"Wishlist!\"),\r\n\t\t\t]);\r\n\t\t},\r\n\t};\r\n};\r\n", "import m from \"@/mithril\";\r\n\r\nexport const Label: m.ClosureComponent<m.Attributes | undefined> = () => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\treturn m(\r\n\t\t\t\t\"label\",\r\n\t\t\t\t{\r\n\t\t\t\t\t...(vnode.attrs || {}),\r\n\t\t\t\t\tclass: \"block text-lg font-semibold leading-normal py-1\",\r\n\t\t\t\t},\r\n\t\t\t\tvnode.children,\r\n\t\t\t);\r\n\t\t},\r\n\t};\r\n};\r\n", "import m from \"@/mithril\";\r\n\r\nexport const Select: m.ClosureComponent<m.Attributes | undefined> = () => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\treturn m(\r\n\t\t\t\t\"select\",\r\n\t\t\t\t{\r\n\t\t\t\t\t...(vnode.attrs || {}),\r\n\t\t\t\t\tclass:\r\n\t\t\t\t\t\t\"bg-white border border-zinc-400 leading-normal text-base rounded-sm h-9 max-w-64 py-1.5 pl-2 pr-6\",\r\n\t\t\t\t},\r\n\t\t\t\tvnode.children,\r\n\t\t\t);\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const Option: m.ClosureComponent = () => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\treturn m(\"option\", vnode.children);\r\n\t\t},\r\n\t};\r\n};\r\n", "import m from \"@/mithril\";\r\n\r\nimport { Label } from \"../../components/base/label\";\r\nimport { Select, Option } from \"../../components/base/select\";\r\n\r\nimport Layout from \"pages/layout\";\r\n\r\nexport const Settings: m.ClosureComponent = () => {\r\n\treturn {\r\n\t\tview: (_vnode) => {\r\n\t\t\treturn m(Layout, [\r\n\t\t\t\tm(\"h2\", { class: \"text-2xl m-2\" }, \"Camera\"),\r\n\t\t\t\tm(\"div\", { class: \"p-2 mx-2 rounded-md shadow-sm\" }, [\r\n\t\t\t\t\tm(Label, { for: \"settings-camera-selection\" }, \"Camera Selection\"),\r\n\t\t\t\t\tm(Select, { id: \"settings-camera-selection\" }, [\r\n\t\t\t\t\t\tm(Option, \"Choose an option\"),\r\n\t\t\t\t\t\tm(Option, \"Slack\"),\r\n\t\t\t\t\t\tm(Option, \"Skype\"),\r\n\t\t\t\t\t\tm(Option, \"Hipchat\"),\r\n\t\t\t\t\t]),\r\n\t\t\t\t]),\r\n\t\t\t\tm(\"h2\", { class: \"text-2xl m-2\" }, \"Database\"),\r\n\t\t\t\tm(\"div\", { class: \" p-2 mx-2 rounded-md shadow-sm\" }, []),\r\n\t\t\t\tm(\"h2\", { class: \"text-2xl m-2\" }, \"Search\"),\r\n\t\t\t\tm(\"div\", { class: \"p-2 mx-2 rounded-md shadow-sm\" }, [\r\n\t\t\t\t\tm(Label, { for: \"settings-search-provider\" }, \"Search Provider\"),\r\n\t\t\t\t\tm(Select, { id: \"settings-search-provider\" }, [\r\n\t\t\t\t\t\tm(Option, \"Choose an option\"),\r\n\t\t\t\t\t\tm(Option, \"Slack\"),\r\n\t\t\t\t\t\tm(Option, \"Skype\"),\r\n\t\t\t\t\t\tm(Option, \"Hipchat\"),\r\n\t\t\t\t\t]),\r\n\t\t\t\t]),\r\n\t\t\t]);\r\n\t\t},\r\n\t};\r\n};\r\n", "import m from \"@/mithril\";\r\nimport * as Toast from \"@/mithril-toast\";\r\n\r\n// import { Camera } from \"^/camera\";\r\n\r\nimport AddBulk from \"./pages/add-bulk\";\r\nimport AddScan from \"./pages/add-scan\";\r\nimport AddSearch from \"./pages/add-search\";\r\nimport { Bookshelf } from \"./pages/bookshelf\";\r\nimport { Bookshelves } from \"./pages/bookshelves\";\r\nimport { Tags } from \"./pages/tags\";\r\nimport { Wishlist } from \"./pages/wishlist\";\r\nimport { Settings } from \"./pages/settings\";\r\n\r\ndeclare global {\r\n\tinterface Sissix {\r\n\t\tgitHash: string | undefined;\r\n\t\tproduction: boolean | undefined;\r\n\t}\r\n\r\n\tconst SISSIX: Sissix;\r\n}\r\n\r\nconst registerServiceWorker = async () => {\r\n\tlet registration: ServiceWorkerRegistration | undefined | null = null;\r\n\tlet installingRegistration: ServiceWorker | undefined | null = null;\r\n\r\n\tconst updateRegistration = (reg: ServiceWorkerRegistration) => {\r\n\t\tregistration = reg;\r\n\r\n\t\tregistration.addEventListener(\"updatefound\", () => onUpdateFound());\r\n\t};\r\n\r\n\tconst onUpdateFound = () => {\r\n\t\tif (installingRegistration) {\r\n\t\t\tinstallingRegistration.removeEventListener(\"statechange\", onStateChange);\r\n\t\t}\r\n\r\n\t\tinstallingRegistration = registration?.installing;\r\n\t\tinstallingRegistration?.addEventListener(\"statechange\", onStateChange);\r\n\t};\r\n\r\n\tconst onStateChange = () => {\r\n\t\tif (installingRegistration && installingRegistration.state === \"installed\" && navigator.serviceWorker.controller) {\r\n\t\t\tinstallingRegistration = null;\r\n\t\t\tonUpdateReady();\r\n\t\t}\r\n\t};\r\n\r\n\tconst onUpdateReady = () => {\r\n\t\tToast.addInfo(\"ANd update is ready, please reload\", 60 * 10 * 10);\r\n\t};\r\n\r\n\tif (\"serviceWorker\" in navigator) {\r\n\t\tnavigator.serviceWorker.register(\"./service-worker.js\", { scope: \"./\" }).then(\r\n\t\t\t(registration) => updateRegistration(registration),\r\n\t\t\t(error) => console.error(\"Could not register service worker:\", error),\r\n\t\t);\r\n\t}\r\n};\r\n\r\nwindow.addEventListener(\"load\", () => {\r\n\tregisterServiceWorker();\r\n\r\n\tif (!SISSIX.production) {\r\n\t\tnew EventSource(\"/esbuild\").addEventListener(\"change\", () => location.reload());\r\n\t}\r\n\r\n\tm.route(document.body, \"/bookshelves\", {\r\n\t\t\"/add/bulk\": AddBulk,\r\n\t\t\"/add/scan\": AddScan,\r\n\t\t\"/add/search\": AddSearch,\r\n\t\t\"/bookshelves\": Bookshelves,\r\n\t\t\"/bookshelves/:bookshelfId\": Bookshelf,\r\n\t\t\"/tags\": Tags,\r\n\t\t\"/wishlist\": Wishlist,\r\n\t\t\"/settings\": Settings,\r\n\t});\r\n\r\n\t// TODO: have a setup screen where it walks the user though so they don't get a camera use popup the moment they open the app\r\n\t(async () => {\r\n\t\t// Camera.requestPermission();\r\n\t})();\r\n});\r\n"],
  "mappings": "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",
  "names": ["e", "t", "n", "r", "o", "l", "a", "i", "s", "u", "f", "c", "d", "p", "m", "v", "h", "y", "g", "w", "b", "x", "k", "q", "C", "E", "S", "j", "A", "O", "T", "N", "$", "L", "P", "R", "I", "z", "D", "_", "F", "M", "U", "H", "Q", "K", "J", "B", "G", "V", "W", "X", "Y", "Z", "ee", "te", "ne", "re", "oe", "le", "ae", "ie", "se", "ue", "fe", "ce", "de", "pe", "me", "ve", "he", "ye", "ge", "we", "urlAlphabet", "nanoid", "size", "id", "bytes", "urlAlphabet", "state", "toast", "index", "entry", "addInfo", "text", "timeout", "state", "nanoid", "Drawer", "re", "state", "toast", "Bread", "vnode", "AddBulk", "vnode", "add_bulk_default", "AddScan", "vnode", "add_scan_default", "AddSearch", "vnode", "add_search_default", "defaultElevation", "ELEVATION", "defaultKind", "KIND", "defaultShape", "SHAPE", "defaultSize", "SIZE", "Button", "vnode", "attrs", "disabled", "elevation", "ELEVATION", "defaultElevation", "kind", "KIND", "defaultKind", "shape", "SHAPE", "defaultShape", "size", "SIZE", "defaultSize", "re", "Fab", "vnode", "attrs", "elevation", "ELEVATION", "defaultElevation", "kind", "KIND", "defaultKind", "size", "SIZE", "defaultSize", "re", "IconBase", "vnode", "attrs", "width", "height", "fill", "re", "Add", "vnode", "re", "IconBase", "Bookshelf", "vnode", "re", "Fab", "Add", "Button", "Option", "_Option", "inner", "value", "matcher", "fn", "t", "Result", "_Result", "inner", "value", "error", "matcher", "fn", "t", "e", "Option", "_", "Ok", "Err", "fetchWrapper", "method", "url", "res", "json", "Ok", "Err", "getBookshelves", "getBooks", "id", "MoreVert", "vnode", "re", "IconBase", "Header", "vnode", "attrs", "re", "MoreVert", "BookCover", "vnode", "attrs", "re", "BookshelfEntry", "books", "Err", "vnode", "attrs", "getBooks", "re", "Header", "book", "BookCover", "_", "bookshelf_default", "Nav", "vnode", "attrs", "re", "item", "NavItem", "isActive", "Label", "vnode", "filled", "re", "IconBase", "Shelves", "vnode", "filled", "re", "IconBase", "ShoppingMode", "vnode", "filled", "re", "IconBase", "Settings", "vnode", "filled", "re", "IconBase", "Layout", "_vnode", "vnode", "create", "href", "icon", "label", "items", "Shelves", "Label", "ShoppingMode", "Settings", "re", "Drawer", "Nav", "layout_default", "Bookshelves", "bookshelves", "Err", "fabOpen", "toggle", "getBookshelves", "re", "vnode", "fabButtons", "Button", "Add", "fab", "Fab", "layout_default", "bookshelf", "bookshelf_default", "Tags", "vnode", "re", "layout_default", "Wishlist", "vnode", "re", "layout_default", "Fab", "Add", "Label", "vnode", "re", "Select", "vnode", "re", "Option", "Settings", "_vnode", "re", "layout_default", "Label", "Select", "Option", "registerServiceWorker", "registration", "installingRegistration", "updateRegistration", "reg", "onUpdateFound", "onStateChange", "onUpdateReady", "addInfo", "error", "re", "add_bulk_default", "add_scan_default", "add_search_default", "Bookshelves", "Bookshelf", "Tags", "Wishlist", "Settings"]
}
