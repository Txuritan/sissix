{
  "version": 3,
  "sources": ["../src/libraries/jsdelivr-header.js", "../src/libraries/npm/mithril@2.2.3/render/vnode.js", "../src/libraries/npm/mithril@2.2.3/render/hyperscriptVnode.js", "../src/libraries/npm/mithril@2.2.3/util/hasOwn.js", "../src/libraries/npm/mithril@2.2.3/render/hyperscript.js", "../src/libraries/npm/mithril@2.2.3/render/trust.js", "../src/libraries/npm/mithril@2.2.3/render/fragment.js", "../src/libraries/npm/mithril@2.2.3/hyperscript.js", "../src/libraries/npm/mithril@2.2.3/render/domFor.js", "../src/libraries/npm/mithril@2.2.3/render/render.js", "../src/libraries/npm/mithril@2.2.3/render.js", "../src/libraries/npm/mithril@2.2.3/api/mount-redraw.js", "../src/libraries/npm/mithril@2.2.3/mount-redraw.js", "../src/libraries/npm/mithril@2.2.3/querystring/build.js", "../src/libraries/npm/mithril@2.2.3/util/assign.js", "../src/libraries/npm/mithril@2.2.3/pathname/build.js", "../src/libraries/npm/mithril@2.2.3/request/request.js", "../src/libraries/npm/mithril@2.2.3/request.js", "../src/libraries/npm/mithril@2.2.3/querystring/parse.js", "../src/libraries/npm/mithril@2.2.3/pathname/parse.js", "../src/libraries/npm/mithril@2.2.3/pathname/compileTemplate.js", "../src/libraries/npm/mithril@2.2.3/util/censor.js", "../src/libraries/npm/mithril@2.2.3/api/router.js", "../src/libraries/npm/mithril@2.2.3/route.js", "../src/libraries/npm/mithril@2.2.3/index.js", "../src/libraries/nanoid.ts", "../src/libraries/mithril-toast.ts", "../src/pages/add-bulk.ts", "../src/pages/add-scan.ts", "../src/pages/add-search.ts", "../src/libraries/mithril-material-3/fab.ts", "../src/components/base/icons.ts", "../src/components/base/button.ts", "../src/pages/library-bookshelf.ts", "../src/utils/index.ts", "../src/libraries/mithril-material-3/icon/base.ts", "../src/libraries/mithril-material-3/icon/more-vert.ts", "../src/components/header.ts", "../src/components/bookcover.ts", "../src/database/client.ts", "../src/components/bookshelf.ts", "../src/shared/state.ts", "../src/pages/library-bookshelves.ts", "../src/pages/library-tags.ts", "../src/pages/library-wishlist.ts", "../src/components/base/label.ts", "../src/components/base/select.ts", "../src/pages/settings.ts", "../src/libraries/mithril-material-3/nav.ts", "../src/libraries/mithril-material-3/icon/label.ts", "../src/libraries/mithril-material-3/icon/shelves.ts", "../src/libraries/mithril-material-3/icon/shopping-mode.ts", "../src/libraries/mithril-material-3/icon/settings.ts", "../src/shared/layout.ts", "../src/main.ts"],
  "sourcesContent": ["/**\n * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.\n * Original file: /npm/mithril@2.2.3/index.js\n *\n * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files\n */\n", "\"use strict\"\n\nfunction Vnode(tag, key, attrs, children, text, dom) {\n\treturn {tag: tag, key: key, attrs: attrs, children: children, text: text, dom: dom, domSize: undefined, state: undefined, events: undefined, instance: undefined}\n}\nVnode.normalize = function(node) {\n\tif (Array.isArray(node)) return Vnode(\"[\", undefined, undefined, Vnode.normalizeChildren(node), undefined, undefined)\n\tif (node == null || typeof node === \"boolean\") return null\n\tif (typeof node === \"object\") return node\n\treturn Vnode(\"#\", undefined, undefined, String(node), undefined, undefined)\n}\nVnode.normalizeChildren = function(input) {\n\tvar children = []\n\tif (input.length) {\n\t\tvar isKeyed = input[0] != null && input[0].key != null\n\t\t// Note: this is a *very* perf-sensitive check.\n\t\t// Fun fact: merging the loop like this is somehow faster than splitting\n\t\t// it, noticeably so.\n\t\tfor (var i = 1; i < input.length; i++) {\n\t\t\tif ((input[i] != null && input[i].key != null) !== isKeyed) {\n\t\t\t\tthrow new TypeError(\n\t\t\t\t\tisKeyed && (input[i] != null || typeof input[i] === \"boolean\")\n\t\t\t\t\t\t? \"In fragments, vnodes must either all have keys or none have keys. You may wish to consider using an explicit keyed empty fragment, m.fragment({key: ...}), instead of a hole.\"\n\t\t\t\t\t\t: \"In fragments, vnodes must either all have keys or none have keys.\"\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t\tfor (var i = 0; i < input.length; i++) {\n\t\t\tchildren[i] = Vnode.normalize(input[i])\n\t\t}\n\t}\n\treturn children\n}\n\nmodule.exports = Vnode\n", "\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\n\n// Call via `hyperscriptVnode.apply(startOffset, arguments)`\n//\n// The reason I do it this way, forwarding the arguments and passing the start\n// offset in `this`, is so I don't have to create a temporary array in a\n// performance-critical path.\n//\n// In native ES6, I'd instead add a final `...args` parameter to the\n// `hyperscript` and `fragment` factories and define this as\n// `hyperscriptVnode(...args)`, since modern engines do optimize that away. But\n// ES5 (what Mithril.js requires thanks to IE support) doesn't give me that luxury,\n// and engines aren't nearly intelligent enough to do either of these:\n//\n// 1. Elide the allocation for `[].slice.call(arguments, 1)` when it's passed to\n//    another function only to be indexed.\n// 2. Elide an `arguments` allocation when it's passed to any function other\n//    than `Function.prototype.apply` or `Reflect.apply`.\n//\n// In ES6, it'd probably look closer to this (I'd need to profile it, though):\n// module.exports = function(attrs, ...children) {\n//     if (attrs == null || typeof attrs === \"object\" && attrs.tag == null && !Array.isArray(attrs)) {\n//         if (children.length === 1 && Array.isArray(children[0])) children = children[0]\n//     } else {\n//         children = children.length === 0 && Array.isArray(attrs) ? attrs : [attrs, ...children]\n//         attrs = undefined\n//     }\n//\n//     if (attrs == null) attrs = {}\n//     return Vnode(\"\", attrs.key, attrs, children)\n// }\nmodule.exports = function() {\n\tvar attrs = arguments[this], start = this + 1, children\n\n\tif (attrs == null) {\n\t\tattrs = {}\n\t} else if (typeof attrs !== \"object\" || attrs.tag != null || Array.isArray(attrs)) {\n\t\tattrs = {}\n\t\tstart = this\n\t}\n\n\tif (arguments.length === start + 1) {\n\t\tchildren = arguments[start]\n\t\tif (!Array.isArray(children)) children = [children]\n\t} else {\n\t\tchildren = []\n\t\twhile (start < arguments.length) children.push(arguments[start++])\n\t}\n\n\treturn Vnode(\"\", attrs.key, attrs, children)\n}\n", "// This exists so I'm only saving it once.\n\"use strict\"\n\nmodule.exports = {}.hasOwnProperty\n", "\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\nvar hyperscriptVnode = require(\"./hyperscriptVnode\")\nvar hasOwn = require(\"../util/hasOwn\")\n\nvar selectorParser = /(?:(^|#|\\.)([^#\\.\\[\\]]+))|(\\[(.+?)(?:\\s*=\\s*(\"|'|)((?:\\\\[\"'\\]]|.)*?)\\5)?\\])/g\nvar selectorCache = {}\n\nfunction isEmpty(object) {\n\tfor (var key in object) if (hasOwn.call(object, key)) return false\n\treturn true\n}\n\nfunction compileSelector(selector) {\n\tvar match, tag = \"div\", classes = [], attrs = {}\n\twhile (match = selectorParser.exec(selector)) {\n\t\tvar type = match[1], value = match[2]\n\t\tif (type === \"\" && value !== \"\") tag = value\n\t\telse if (type === \"#\") attrs.id = value\n\t\telse if (type === \".\") classes.push(value)\n\t\telse if (match[3][0] === \"[\") {\n\t\t\tvar attrValue = match[6]\n\t\t\tif (attrValue) attrValue = attrValue.replace(/\\\\([\"'])/g, \"$1\").replace(/\\\\\\\\/g, \"\\\\\")\n\t\t\tif (match[4] === \"class\") classes.push(attrValue)\n\t\t\telse attrs[match[4]] = attrValue === \"\" ? attrValue : attrValue || true\n\t\t}\n\t}\n\tif (classes.length > 0) attrs.className = classes.join(\" \")\n\treturn selectorCache[selector] = {tag: tag, attrs: attrs}\n}\n\nfunction execSelector(state, vnode) {\n\tvar attrs = vnode.attrs\n\tvar hasClass = hasOwn.call(attrs, \"class\")\n\tvar className = hasClass ? attrs.class : attrs.className\n\n\tvnode.tag = state.tag\n\tvnode.attrs = {}\n\n\tif (!isEmpty(state.attrs) && !isEmpty(attrs)) {\n\t\tvar newAttrs = {}\n\n\t\tfor (var key in attrs) {\n\t\t\tif (hasOwn.call(attrs, key)) newAttrs[key] = attrs[key]\n\t\t}\n\n\t\tattrs = newAttrs\n\t}\n\n\tfor (var key in state.attrs) {\n\t\tif (hasOwn.call(state.attrs, key) && key !== \"className\" && !hasOwn.call(attrs, key)){\n\t\t\tattrs[key] = state.attrs[key]\n\t\t}\n\t}\n\tif (className != null || state.attrs.className != null) attrs.className =\n\t\tclassName != null\n\t\t\t? state.attrs.className != null\n\t\t\t\t? String(state.attrs.className) + \" \" + String(className)\n\t\t\t\t: className\n\t\t\t: state.attrs.className != null\n\t\t\t\t? state.attrs.className\n\t\t\t\t: null\n\n\tif (hasClass) attrs.class = null\n\n\tfor (var key in attrs) {\n\t\tif (hasOwn.call(attrs, key) && key !== \"key\") {\n\t\t\tvnode.attrs = attrs\n\t\t\tbreak\n\t\t}\n\t}\n\n\treturn vnode\n}\n\nfunction hyperscript(selector) {\n\tif (selector == null || typeof selector !== \"string\" && typeof selector !== \"function\" && typeof selector.view !== \"function\") {\n\t\tthrow Error(\"The selector must be either a string or a component.\");\n\t}\n\n\tvar vnode = hyperscriptVnode.apply(1, arguments)\n\n\tif (typeof selector === \"string\") {\n\t\tvnode.children = Vnode.normalizeChildren(vnode.children)\n\t\tif (selector !== \"[\") return execSelector(selectorCache[selector] || compileSelector(selector), vnode)\n\t}\n\n\tvnode.tag = selector\n\treturn vnode\n}\n\nmodule.exports = hyperscript\n", "\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\n\nmodule.exports = function(html) {\n\tif (html == null) html = \"\"\n\treturn Vnode(\"<\", undefined, undefined, html, undefined, undefined)\n}\n", "\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\nvar hyperscriptVnode = require(\"./hyperscriptVnode\")\n\nmodule.exports = function() {\n\tvar vnode = hyperscriptVnode.apply(0, arguments)\n\n\tvnode.tag = \"[\"\n\tvnode.children = Vnode.normalizeChildren(vnode.children)\n\treturn vnode\n}\n", "\"use strict\"\n\nvar hyperscript = require(\"./render/hyperscript\")\n\nhyperscript.trust = require(\"./render/trust\")\nhyperscript.fragment = require(\"./render/fragment\")\n\nmodule.exports = hyperscript\n", "\"use strict\"\n\nvar delayedRemoval = new WeakMap\n\nfunction *domFor({dom, domSize}, {generation} = {}) {\n\tif (dom != null) do {\n\t\tconst {nextSibling} = dom\n\n\t\tif (delayedRemoval.get(dom) === generation) {\n\t\t\tyield dom\n\t\t\tdomSize--\n\t\t}\n\n\t\tdom = nextSibling\n\t}\n\twhile (domSize)\n}\n\nmodule.exports = {\n\tdelayedRemoval: delayedRemoval,\n\tdomFor: domFor,\n}", "\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\nvar df = require(\"../render/domFor\")\nvar delayedRemoval = df.delayedRemoval\nvar domFor = df.domFor\n\nmodule.exports = function($window) {\n\tvar $doc = $window && $window.document\n\n\tvar nameSpace = {\n\t\tsvg: \"http://www.w3.org/2000/svg\",\n\t\tmath: \"http://www.w3.org/1998/Math/MathML\"\n\t}\n\n\tvar currentRedraw\n\tvar currentRender\n\n\tfunction getNameSpace(vnode) {\n\t\treturn vnode.attrs && vnode.attrs.xmlns || nameSpace[vnode.tag]\n\t}\n\n\t//sanity check to discourage people from doing `vnode.state = ...`\n\tfunction checkState(vnode, original) {\n\t\tif (vnode.state !== original) throw new Error(\"'vnode.state' must not be modified.\")\n\t}\n\n\t//Note: the hook is passed as the `this` argument to allow proxying the\n\t//arguments without requiring a full array allocation to do so. It also\n\t//takes advantage of the fact the current `vnode` is the first argument in\n\t//all lifecycle methods.\n\tfunction callHook(vnode) {\n\t\tvar original = vnode.state\n\t\ttry {\n\t\t\treturn this.apply(original, arguments)\n\t\t} finally {\n\t\t\tcheckState(vnode, original)\n\t\t}\n\t}\n\n\t// IE11 (at least) throws an UnspecifiedError when accessing document.activeElement when\n\t// inside an iframe. Catch and swallow this error, and heavy-handidly return null.\n\tfunction activeElement() {\n\t\ttry {\n\t\t\treturn $doc.activeElement\n\t\t} catch (e) {\n\t\t\treturn null\n\t\t}\n\t}\n\t//create\n\tfunction createNodes(parent, vnodes, start, end, hooks, nextSibling, ns) {\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) {\n\t\t\t\tcreateNode(parent, vnode, hooks, ns, nextSibling)\n\t\t\t}\n\t\t}\n\t}\n\tfunction createNode(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar tag = vnode.tag\n\t\tif (typeof tag === \"string\") {\n\t\t\tvnode.state = {}\n\t\t\tif (vnode.attrs != null) initLifecycle(vnode.attrs, vnode, hooks)\n\t\t\tswitch (tag) {\n\t\t\t\tcase \"#\": createText(parent, vnode, nextSibling); break\n\t\t\t\tcase \"<\": createHTML(parent, vnode, ns, nextSibling); break\n\t\t\t\tcase \"[\": createFragment(parent, vnode, hooks, ns, nextSibling); break\n\t\t\t\tdefault: createElement(parent, vnode, hooks, ns, nextSibling)\n\t\t\t}\n\t\t}\n\t\telse createComponent(parent, vnode, hooks, ns, nextSibling)\n\t}\n\tfunction createText(parent, vnode, nextSibling) {\n\t\tvnode.dom = $doc.createTextNode(vnode.children)\n\t\tinsertDOM(parent, vnode.dom, nextSibling)\n\t}\n\tvar possibleParents = {caption: \"table\", thead: \"table\", tbody: \"table\", tfoot: \"table\", tr: \"tbody\", th: \"tr\", td: \"tr\", colgroup: \"table\", col: \"colgroup\"}\n\tfunction createHTML(parent, vnode, ns, nextSibling) {\n\t\tvar match = vnode.children.match(/^\\s*?<(\\w+)/im) || []\n\t\t// not using the proper parent makes the child element(s) vanish.\n\t\t//     var div = document.createElement(\"div\")\n\t\t//     div.innerHTML = \"<td>i</td><td>j</td>\"\n\t\t//     console.log(div.innerHTML)\n\t\t// --> \"ij\", no <td> in sight.\n\t\tvar temp = $doc.createElement(possibleParents[match[1]] || \"div\")\n\t\tif (ns === \"http://www.w3.org/2000/svg\") {\n\t\t\ttemp.innerHTML = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\">\" + vnode.children + \"</svg>\"\n\t\t\ttemp = temp.firstChild\n\t\t} else {\n\t\t\ttemp.innerHTML = vnode.children\n\t\t}\n\t\tvnode.dom = temp.firstChild\n\t\tvnode.domSize = temp.childNodes.length\n\t\t// Capture nodes to remove, so we don't confuse them.\n\t\tvar fragment = $doc.createDocumentFragment()\n\t\tvar child\n\t\twhile (child = temp.firstChild) {\n\t\t\tfragment.appendChild(child)\n\t\t}\n\t\tinsertDOM(parent, fragment, nextSibling)\n\t}\n\tfunction createFragment(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar fragment = $doc.createDocumentFragment()\n\t\tif (vnode.children != null) {\n\t\t\tvar children = vnode.children\n\t\t\tcreateNodes(fragment, children, 0, children.length, hooks, null, ns)\n\t\t}\n\t\tvnode.dom = fragment.firstChild\n\t\tvnode.domSize = fragment.childNodes.length\n\t\tinsertDOM(parent, fragment, nextSibling)\n\t}\n\tfunction createElement(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar tag = vnode.tag\n\t\tvar attrs = vnode.attrs\n\t\tvar is = attrs && attrs.is\n\n\t\tns = getNameSpace(vnode) || ns\n\n\t\tvar element = ns ?\n\t\t\tis ? $doc.createElementNS(ns, tag, {is: is}) : $doc.createElementNS(ns, tag) :\n\t\t\tis ? $doc.createElement(tag, {is: is}) : $doc.createElement(tag)\n\t\tvnode.dom = element\n\n\t\tif (attrs != null) {\n\t\t\tsetAttrs(vnode, attrs, ns)\n\t\t}\n\n\t\tinsertDOM(parent, element, nextSibling)\n\n\t\tif (!maybeSetContentEditable(vnode)) {\n\t\t\tif (vnode.children != null) {\n\t\t\t\tvar children = vnode.children\n\t\t\t\tcreateNodes(element, children, 0, children.length, hooks, null, ns)\n\t\t\t\tif (vnode.tag === \"select\" && attrs != null) setLateSelectAttrs(vnode, attrs)\n\t\t\t}\n\t\t}\n\t}\n\tfunction initComponent(vnode, hooks) {\n\t\tvar sentinel\n\t\tif (typeof vnode.tag.view === \"function\") {\n\t\t\tvnode.state = Object.create(vnode.tag)\n\t\t\tsentinel = vnode.state.view\n\t\t\tif (sentinel.$$reentrantLock$$ != null) return\n\t\t\tsentinel.$$reentrantLock$$ = true\n\t\t} else {\n\t\t\tvnode.state = void 0\n\t\t\tsentinel = vnode.tag\n\t\t\tif (sentinel.$$reentrantLock$$ != null) return\n\t\t\tsentinel.$$reentrantLock$$ = true\n\t\t\tvnode.state = (vnode.tag.prototype != null && typeof vnode.tag.prototype.view === \"function\") ? new vnode.tag(vnode) : vnode.tag(vnode)\n\t\t}\n\t\tinitLifecycle(vnode.state, vnode, hooks)\n\t\tif (vnode.attrs != null) initLifecycle(vnode.attrs, vnode, hooks)\n\t\tvnode.instance = Vnode.normalize(callHook.call(vnode.state.view, vnode))\n\t\tif (vnode.instance === vnode) throw Error(\"A view cannot return the vnode it received as argument\")\n\t\tsentinel.$$reentrantLock$$ = null\n\t}\n\tfunction createComponent(parent, vnode, hooks, ns, nextSibling) {\n\t\tinitComponent(vnode, hooks)\n\t\tif (vnode.instance != null) {\n\t\t\tcreateNode(parent, vnode.instance, hooks, ns, nextSibling)\n\t\t\tvnode.dom = vnode.instance.dom\n\t\t\tvnode.domSize = vnode.dom != null ? vnode.instance.domSize : 0\n\t\t}\n\t\telse {\n\t\t\tvnode.domSize = 0\n\t\t}\n\t}\n\n\t//update\n\t/**\n\t * @param {Element|Fragment} parent - the parent element\n\t * @param {Vnode[] | null} old - the list of vnodes of the last `render()` call for\n\t *                               this part of the tree\n\t * @param {Vnode[] | null} vnodes - as above, but for the current `render()` call.\n\t * @param {Function[]} hooks - an accumulator of post-render hooks (oncreate/onupdate)\n\t * @param {Element | null} nextSibling - the next DOM node if we're dealing with a\n\t *                                       fragment that is not the last item in its\n\t *                                       parent\n\t * @param {'svg' | 'math' | String | null} ns) - the current XML namespace, if any\n\t * @returns void\n\t */\n\t// This function diffs and patches lists of vnodes, both keyed and unkeyed.\n\t//\n\t// We will:\n\t//\n\t// 1. describe its general structure\n\t// 2. focus on the diff algorithm optimizations\n\t// 3. discuss DOM node operations.\n\n\t// ## Overview:\n\t//\n\t// The updateNodes() function:\n\t// - deals with trivial cases\n\t// - determines whether the lists are keyed or unkeyed based on the first non-null node\n\t//   of each list.\n\t// - diffs them and patches the DOM if needed (that's the brunt of the code)\n\t// - manages the leftovers: after diffing, are there:\n\t//   - old nodes left to remove?\n\t// \t - new nodes to insert?\n\t// \t deal with them!\n\t//\n\t// The lists are only iterated over once, with an exception for the nodes in `old` that\n\t// are visited in the fourth part of the diff and in the `removeNodes` loop.\n\n\t// ## Diffing\n\t//\n\t// Reading https://github.com/localvoid/ivi/blob/ddc09d06abaef45248e6133f7040d00d3c6be853/packages/ivi/src/vdom/implementation.ts#L617-L837\n\t// may be good for context on longest increasing subsequence-based logic for moving nodes.\n\t//\n\t// In order to diff keyed lists, one has to\n\t//\n\t// 1) match nodes in both lists, per key, and update them accordingly\n\t// 2) create the nodes present in the new list, but absent in the old one\n\t// 3) remove the nodes present in the old list, but absent in the new one\n\t// 4) figure out what nodes in 1) to move in order to minimize the DOM operations.\n\t//\n\t// To achieve 1) one can create a dictionary of keys => index (for the old list), then iterate\n\t// over the new list and for each new vnode, find the corresponding vnode in the old list using\n\t// the map.\n\t// 2) is achieved in the same step: if a new node has no corresponding entry in the map, it is new\n\t// and must be created.\n\t// For the removals, we actually remove the nodes that have been updated from the old list.\n\t// The nodes that remain in that list after 1) and 2) have been performed can be safely removed.\n\t// The fourth step is a bit more complex and relies on the longest increasing subsequence (LIS)\n\t// algorithm.\n\t//\n\t// the longest increasing subsequence is the list of nodes that can remain in place. Imagine going\n\t// from `1,2,3,4,5` to `4,5,1,2,3` where the numbers are not necessarily the keys, but the indices\n\t// corresponding to the keyed nodes in the old list (keyed nodes `e,d,c,b,a` => `b,a,e,d,c` would\n\t//  match the above lists, for example).\n\t//\n\t// In there are two increasing subsequences: `4,5` and `1,2,3`, the latter being the longest. We\n\t// can update those nodes without moving them, and only call `insertNode` on `4` and `5`.\n\t//\n\t// @localvoid adapted the algo to also support node deletions and insertions (the `lis` is actually\n\t// the longest increasing subsequence *of old nodes still present in the new list*).\n\t//\n\t// It is a general algorithm that is fireproof in all circumstances, but it requires the allocation\n\t// and the construction of a `key => oldIndex` map, and three arrays (one with `newIndex => oldIndex`,\n\t// the `LIS` and a temporary one to create the LIS).\n\t//\n\t// So we cheat where we can: if the tails of the lists are identical, they are guaranteed to be part of\n\t// the LIS and can be updated without moving them.\n\t//\n\t// If two nodes are swapped, they are guaranteed not to be part of the LIS, and must be moved (with\n\t// the exception of the last node if the list is fully reversed).\n\t//\n\t// ## Finding the next sibling.\n\t//\n\t// `updateNode()` and `createNode()` expect a nextSibling parameter to perform DOM operations.\n\t// When the list is being traversed top-down, at any index, the DOM nodes up to the previous\n\t// vnode reflect the content of the new list, whereas the rest of the DOM nodes reflect the old\n\t// list. The next sibling must be looked for in the old list using `getNextSibling(... oldStart + 1 ...)`.\n\t//\n\t// In the other scenarios (swaps, upwards traversal, map-based diff),\n\t// the new vnodes list is traversed upwards. The DOM nodes at the bottom of the list reflect the\n\t// bottom part of the new vnodes list, and we can use the `v.dom`  value of the previous node\n\t// as the next sibling (cached in the `nextSibling` variable).\n\n\n\t// ## DOM node moves\n\t//\n\t// In most scenarios `updateNode()` and `createNode()` perform the DOM operations. However,\n\t// this is not the case if the node moved (second and fourth part of the diff algo). We move\n\t// the old DOM nodes before updateNode runs because it enables us to use the cached `nextSibling`\n\t// variable rather than fetching it using `getNextSibling()`.\n\n\tfunction updateNodes(parent, old, vnodes, hooks, nextSibling, ns) {\n\t\tif (old === vnodes || old == null && vnodes == null) return\n\t\telse if (old == null || old.length === 0) createNodes(parent, vnodes, 0, vnodes.length, hooks, nextSibling, ns)\n\t\telse if (vnodes == null || vnodes.length === 0) removeNodes(parent, old, 0, old.length)\n\t\telse {\n\t\t\tvar isOldKeyed = old[0] != null && old[0].key != null\n\t\t\tvar isKeyed = vnodes[0] != null && vnodes[0].key != null\n\t\t\tvar start = 0, oldStart = 0\n\t\t\tif (!isOldKeyed) while (oldStart < old.length && old[oldStart] == null) oldStart++\n\t\t\tif (!isKeyed) while (start < vnodes.length && vnodes[start] == null) start++\n\t\t\tif (isOldKeyed !== isKeyed) {\n\t\t\t\tremoveNodes(parent, old, oldStart, old.length)\n\t\t\t\tcreateNodes(parent, vnodes, start, vnodes.length, hooks, nextSibling, ns)\n\t\t\t} else if (!isKeyed) {\n\t\t\t\t// Don't index past the end of either list (causes deopts).\n\t\t\t\tvar commonLength = old.length < vnodes.length ? old.length : vnodes.length\n\t\t\t\t// Rewind if necessary to the first non-null index on either side.\n\t\t\t\t// We could alternatively either explicitly create or remove nodes when `start !== oldStart`\n\t\t\t\t// but that would be optimizing for sparse lists which are more rare than dense ones.\n\t\t\t\tstart = start < oldStart ? start : oldStart\n\t\t\t\tfor (; start < commonLength; start++) {\n\t\t\t\t\to = old[start]\n\t\t\t\t\tv = vnodes[start]\n\t\t\t\t\tif (o === v || o == null && v == null) continue\n\t\t\t\t\telse if (o == null) createNode(parent, v, hooks, ns, getNextSibling(old, start + 1, nextSibling))\n\t\t\t\t\telse if (v == null) removeNode(parent, o)\n\t\t\t\t\telse updateNode(parent, o, v, hooks, getNextSibling(old, start + 1, nextSibling), ns)\n\t\t\t\t}\n\t\t\t\tif (old.length > commonLength) removeNodes(parent, old, start, old.length)\n\t\t\t\tif (vnodes.length > commonLength) createNodes(parent, vnodes, start, vnodes.length, hooks, nextSibling, ns)\n\t\t\t} else {\n\t\t\t\t// keyed diff\n\t\t\t\tvar oldEnd = old.length - 1, end = vnodes.length - 1, map, o, v, oe, ve, topSibling\n\n\t\t\t\t// bottom-up\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\toe = old[oldEnd]\n\t\t\t\t\tve = vnodes[end]\n\t\t\t\t\tif (oe.key !== ve.key) break\n\t\t\t\t\tif (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns)\n\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\toldEnd--, end--\n\t\t\t\t}\n\t\t\t\t// top-down\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\to = old[oldStart]\n\t\t\t\t\tv = vnodes[start]\n\t\t\t\t\tif (o.key !== v.key) break\n\t\t\t\t\toldStart++, start++\n\t\t\t\t\tif (o !== v) updateNode(parent, o, v, hooks, getNextSibling(old, oldStart, nextSibling), ns)\n\t\t\t\t}\n\t\t\t\t// swaps and list reversals\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\tif (start === end) break\n\t\t\t\t\tif (o.key !== ve.key || oe.key !== v.key) break\n\t\t\t\t\ttopSibling = getNextSibling(old, oldStart, nextSibling)\n\t\t\t\t\tmoveDOM(parent, oe, topSibling)\n\t\t\t\t\tif (oe !== v) updateNode(parent, oe, v, hooks, topSibling, ns)\n\t\t\t\t\tif (++start <= --end) moveDOM(parent, o, nextSibling)\n\t\t\t\t\tif (o !== ve) updateNode(parent, o, ve, hooks, nextSibling, ns)\n\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\toldStart++; oldEnd--\n\t\t\t\t\toe = old[oldEnd]\n\t\t\t\t\tve = vnodes[end]\n\t\t\t\t\to = old[oldStart]\n\t\t\t\t\tv = vnodes[start]\n\t\t\t\t}\n\t\t\t\t// bottom up once again\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\tif (oe.key !== ve.key) break\n\t\t\t\t\tif (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns)\n\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\toldEnd--, end--\n\t\t\t\t\toe = old[oldEnd]\n\t\t\t\t\tve = vnodes[end]\n\t\t\t\t}\n\t\t\t\tif (start > end) removeNodes(parent, old, oldStart, oldEnd + 1)\n\t\t\t\telse if (oldStart > oldEnd) createNodes(parent, vnodes, start, end + 1, hooks, nextSibling, ns)\n\t\t\t\telse {\n\t\t\t\t\t// inspired by ivi https://github.com/ivijs/ivi/ by Boris Kaul\n\t\t\t\t\tvar originalNextSibling = nextSibling, vnodesLength = end - start + 1, oldIndices = new Array(vnodesLength), li=0, i=0, pos = 2147483647, matched = 0, map, lisIndices\n\t\t\t\t\tfor (i = 0; i < vnodesLength; i++) oldIndices[i] = -1\n\t\t\t\t\tfor (i = end; i >= start; i--) {\n\t\t\t\t\t\tif (map == null) map = getKeyMap(old, oldStart, oldEnd + 1)\n\t\t\t\t\t\tve = vnodes[i]\n\t\t\t\t\t\tvar oldIndex = map[ve.key]\n\t\t\t\t\t\tif (oldIndex != null) {\n\t\t\t\t\t\t\tpos = (oldIndex < pos) ? oldIndex : -1 // becomes -1 if nodes were re-ordered\n\t\t\t\t\t\t\toldIndices[i-start] = oldIndex\n\t\t\t\t\t\t\toe = old[oldIndex]\n\t\t\t\t\t\t\told[oldIndex] = null\n\t\t\t\t\t\t\tif (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns)\n\t\t\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\t\t\tmatched++\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tnextSibling = originalNextSibling\n\t\t\t\t\tif (matched !== oldEnd - oldStart + 1) removeNodes(parent, old, oldStart, oldEnd + 1)\n\t\t\t\t\tif (matched === 0) createNodes(parent, vnodes, start, end + 1, hooks, nextSibling, ns)\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (pos === -1) {\n\t\t\t\t\t\t\t// the indices of the indices of the items that are part of the\n\t\t\t\t\t\t\t// longest increasing subsequence in the oldIndices list\n\t\t\t\t\t\t\tlisIndices = makeLisIndices(oldIndices)\n\t\t\t\t\t\t\tli = lisIndices.length - 1\n\t\t\t\t\t\t\tfor (i = end; i >= start; i--) {\n\t\t\t\t\t\t\t\tv = vnodes[i]\n\t\t\t\t\t\t\t\tif (oldIndices[i-start] === -1) createNode(parent, v, hooks, ns, nextSibling)\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tif (lisIndices[li] === i - start) li--\n\t\t\t\t\t\t\t\t\telse moveDOM(parent, v, nextSibling)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (v.dom != null) nextSibling = vnodes[i].dom\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfor (i = end; i >= start; i--) {\n\t\t\t\t\t\t\t\tv = vnodes[i]\n\t\t\t\t\t\t\t\tif (oldIndices[i-start] === -1) createNode(parent, v, hooks, ns, nextSibling)\n\t\t\t\t\t\t\t\tif (v.dom != null) nextSibling = vnodes[i].dom\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction updateNode(parent, old, vnode, hooks, nextSibling, ns) {\n\t\tvar oldTag = old.tag, tag = vnode.tag\n\t\tif (oldTag === tag) {\n\t\t\tvnode.state = old.state\n\t\t\tvnode.events = old.events\n\t\t\tif (shouldNotUpdate(vnode, old)) return\n\t\t\tif (typeof oldTag === \"string\") {\n\t\t\t\tif (vnode.attrs != null) {\n\t\t\t\t\tupdateLifecycle(vnode.attrs, vnode, hooks)\n\t\t\t\t}\n\t\t\t\tswitch (oldTag) {\n\t\t\t\t\tcase \"#\": updateText(old, vnode); break\n\t\t\t\t\tcase \"<\": updateHTML(parent, old, vnode, ns, nextSibling); break\n\t\t\t\t\tcase \"[\": updateFragment(parent, old, vnode, hooks, nextSibling, ns); break\n\t\t\t\t\tdefault: updateElement(old, vnode, hooks, ns)\n\t\t\t\t}\n\t\t\t}\n\t\t\telse updateComponent(parent, old, vnode, hooks, nextSibling, ns)\n\t\t}\n\t\telse {\n\t\t\tremoveNode(parent, old)\n\t\t\tcreateNode(parent, vnode, hooks, ns, nextSibling)\n\t\t}\n\t}\n\tfunction updateText(old, vnode) {\n\t\tif (old.children.toString() !== vnode.children.toString()) {\n\t\t\told.dom.nodeValue = vnode.children\n\t\t}\n\t\tvnode.dom = old.dom\n\t}\n\tfunction updateHTML(parent, old, vnode, ns, nextSibling) {\n\t\tif (old.children !== vnode.children) {\n\t\t\tremoveDOM(parent, old, undefined)\n\t\t\tcreateHTML(parent, vnode, ns, nextSibling)\n\t\t}\n\t\telse {\n\t\t\tvnode.dom = old.dom\n\t\t\tvnode.domSize = old.domSize\n\t\t}\n\t}\n\tfunction updateFragment(parent, old, vnode, hooks, nextSibling, ns) {\n\t\tupdateNodes(parent, old.children, vnode.children, hooks, nextSibling, ns)\n\t\tvar domSize = 0, children = vnode.children\n\t\tvnode.dom = null\n\t\tif (children != null) {\n\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\tvar child = children[i]\n\t\t\t\tif (child != null && child.dom != null) {\n\t\t\t\t\tif (vnode.dom == null) vnode.dom = child.dom\n\t\t\t\t\tdomSize += child.domSize || 1\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (domSize !== 1) vnode.domSize = domSize\n\t\t}\n\t}\n\tfunction updateElement(old, vnode, hooks, ns) {\n\t\tvar element = vnode.dom = old.dom\n\t\tns = getNameSpace(vnode) || ns\n\n\t\tif (vnode.tag === \"textarea\") {\n\t\t\tif (vnode.attrs == null) vnode.attrs = {}\n\t\t}\n\t\tupdateAttrs(vnode, old.attrs, vnode.attrs, ns)\n\t\tif (!maybeSetContentEditable(vnode)) {\n\t\t\tupdateNodes(element, old.children, vnode.children, hooks, null, ns)\n\t\t}\n\t}\n\tfunction updateComponent(parent, old, vnode, hooks, nextSibling, ns) {\n\t\tvnode.instance = Vnode.normalize(callHook.call(vnode.state.view, vnode))\n\t\tif (vnode.instance === vnode) throw Error(\"A view cannot return the vnode it received as argument\")\n\t\tupdateLifecycle(vnode.state, vnode, hooks)\n\t\tif (vnode.attrs != null) updateLifecycle(vnode.attrs, vnode, hooks)\n\t\tif (vnode.instance != null) {\n\t\t\tif (old.instance == null) createNode(parent, vnode.instance, hooks, ns, nextSibling)\n\t\t\telse updateNode(parent, old.instance, vnode.instance, hooks, nextSibling, ns)\n\t\t\tvnode.dom = vnode.instance.dom\n\t\t\tvnode.domSize = vnode.instance.domSize\n\t\t}\n\t\telse if (old.instance != null) {\n\t\t\tremoveNode(parent, old.instance)\n\t\t\tvnode.dom = undefined\n\t\t\tvnode.domSize = 0\n\t\t}\n\t\telse {\n\t\t\tvnode.dom = old.dom\n\t\t\tvnode.domSize = old.domSize\n\t\t}\n\t}\n\tfunction getKeyMap(vnodes, start, end) {\n\t\tvar map = Object.create(null)\n\t\tfor (; start < end; start++) {\n\t\t\tvar vnode = vnodes[start]\n\t\t\tif (vnode != null) {\n\t\t\t\tvar key = vnode.key\n\t\t\t\tif (key != null) map[key] = start\n\t\t\t}\n\t\t}\n\t\treturn map\n\t}\n\t// Lifted from ivi https://github.com/ivijs/ivi/\n\t// takes a list of unique numbers (-1 is special and can\n\t// occur multiple times) and returns an array with the indices\n\t// of the items that are part of the longest increasing\n\t// subsequence\n\tvar lisTemp = []\n\tfunction makeLisIndices(a) {\n\t\tvar result = [0]\n\t\tvar u = 0, v = 0, i = 0\n\t\tvar il = lisTemp.length = a.length\n\t\tfor (var i = 0; i < il; i++) lisTemp[i] = a[i]\n\t\tfor (var i = 0; i < il; ++i) {\n\t\t\tif (a[i] === -1) continue\n\t\t\tvar j = result[result.length - 1]\n\t\t\tif (a[j] < a[i]) {\n\t\t\t\tlisTemp[i] = j\n\t\t\t\tresult.push(i)\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\tu = 0\n\t\t\tv = result.length - 1\n\t\t\twhile (u < v) {\n\t\t\t\t// Fast integer average without overflow.\n\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\tvar c = (u >>> 1) + (v >>> 1) + (u & v & 1)\n\t\t\t\tif (a[result[c]] < a[i]) {\n\t\t\t\t\tu = c + 1\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tv = c\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (a[i] < a[result[u]]) {\n\t\t\t\tif (u > 0) lisTemp[i] = result[u - 1]\n\t\t\t\tresult[u] = i\n\t\t\t}\n\t\t}\n\t\tu = result.length\n\t\tv = result[u - 1]\n\t\twhile (u-- > 0) {\n\t\t\tresult[u] = v\n\t\t\tv = lisTemp[v]\n\t\t}\n\t\tlisTemp.length = 0\n\t\treturn result\n\t}\n\n\tfunction getNextSibling(vnodes, i, nextSibling) {\n\t\tfor (; i < vnodes.length; i++) {\n\t\t\tif (vnodes[i] != null && vnodes[i].dom != null) return vnodes[i].dom\n\t\t}\n\t\treturn nextSibling\n\t}\n\n\t// This handles fragments with zombie children (removed from vdom, but persisted in DOM through onbeforeremove)\n\tfunction moveDOM(parent, vnode, nextSibling) {\n\t\tif (vnode.dom != null) {\n\t\t\tvar target\n\t\t\tif (vnode.domSize == null) {\n\t\t\t\t// don't allocate for the common case\n\t\t\t\ttarget = vnode.dom\n\t\t\t} else {\n\t\t\t\ttarget = $doc.createDocumentFragment()\n\t\t\t\tfor (var dom of domFor(vnode)) target.appendChild(dom)\n\t\t\t}\n\t\t\tinsertDOM(parent, target, nextSibling)\n\t\t}\n\t}\n\n\tfunction insertDOM(parent, dom, nextSibling) {\n\t\tif (nextSibling != null) parent.insertBefore(dom, nextSibling)\n\t\telse parent.appendChild(dom)\n\t}\n\n\tfunction maybeSetContentEditable(vnode) {\n\t\tif (vnode.attrs == null || (\n\t\t\tvnode.attrs.contenteditable == null && // attribute\n\t\t\tvnode.attrs.contentEditable == null // property\n\t\t)) return false\n\t\tvar children = vnode.children\n\t\tif (children != null && children.length === 1 && children[0].tag === \"<\") {\n\t\t\tvar content = children[0].children\n\t\t\tif (vnode.dom.innerHTML !== content) vnode.dom.innerHTML = content\n\t\t}\n\t\telse if (children != null && children.length !== 0) throw new Error(\"Child node of a contenteditable must be trusted.\")\n\t\treturn true\n\t}\n\n\t//remove\n\tfunction removeNodes(parent, vnodes, start, end) {\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) removeNode(parent, vnode)\n\t\t}\n\t}\n\tfunction removeNode(parent, vnode) {\n\t\tvar mask = 0\n\t\tvar original = vnode.state\n\t\tvar stateResult, attrsResult\n\t\tif (typeof vnode.tag !== \"string\" && typeof vnode.state.onbeforeremove === \"function\") {\n\t\t\tvar result = callHook.call(vnode.state.onbeforeremove, vnode)\n\t\t\tif (result != null && typeof result.then === \"function\") {\n\t\t\t\tmask = 1\n\t\t\t\tstateResult = result\n\t\t\t}\n\t\t}\n\t\tif (vnode.attrs && typeof vnode.attrs.onbeforeremove === \"function\") {\n\t\t\tvar result = callHook.call(vnode.attrs.onbeforeremove, vnode)\n\t\t\tif (result != null && typeof result.then === \"function\") {\n\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\tmask |= 2\n\t\t\t\tattrsResult = result\n\t\t\t}\n\t\t}\n\t\tcheckState(vnode, original)\n\t\tvar generation\n\t\t// If we can, try to fast-path it and avoid all the overhead of awaiting\n\t\tif (!mask) {\n\t\t\tonremove(vnode)\n\t\t\tremoveDOM(parent, vnode, generation)\n\t\t} else {\n\t\t\tgeneration = currentRender\n\t\t\tfor (var dom of domFor(vnode)) delayedRemoval.set(dom, generation)\n\t\t\tif (stateResult != null) {\n\t\t\t\tstateResult.finally(function () {\n\t\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\t\tif (mask & 1) {\n\t\t\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\t\t\tmask &= 2\n\t\t\t\t\t\tif (!mask) {\n\t\t\t\t\t\t\tcheckState(vnode, original)\n\t\t\t\t\t\t\tonremove(vnode)\n\t\t\t\t\t\t\tremoveDOM(parent, vnode, generation)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t\tif (attrsResult != null) {\n\t\t\t\tattrsResult.finally(function () {\n\t\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\t\tif (mask & 2) {\n\t\t\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\t\t\tmask &= 1\n\t\t\t\t\t\tif (!mask) {\n\t\t\t\t\t\t\tcheckState(vnode, original)\n\t\t\t\t\t\t\tonremove(vnode)\n\t\t\t\t\t\t\tremoveDOM(parent, vnode, generation)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\tfunction removeDOM(parent, vnode, generation) {\n\t\tif (vnode.dom == null) return\n\t\tif (vnode.domSize == null) {\n\t\t\t// don't allocate for the common case\n\t\t\tif (delayedRemoval.get(vnode.dom) === generation) parent.removeChild(vnode.dom)\n\t\t} else {\n\t\t\tfor (var dom of domFor(vnode, {generation})) parent.removeChild(dom)\n\t\t}\n\t}\n\n\tfunction onremove(vnode) {\n\t\tif (typeof vnode.tag !== \"string\" && typeof vnode.state.onremove === \"function\") callHook.call(vnode.state.onremove, vnode)\n\t\tif (vnode.attrs && typeof vnode.attrs.onremove === \"function\") callHook.call(vnode.attrs.onremove, vnode)\n\t\tif (typeof vnode.tag !== \"string\") {\n\t\t\tif (vnode.instance != null) onremove(vnode.instance)\n\t\t} else {\n\t\t\tvar children = vnode.children\n\t\t\tif (Array.isArray(children)) {\n\t\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t\tvar child = children[i]\n\t\t\t\t\tif (child != null) onremove(child)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t//attrs\n\tfunction setAttrs(vnode, attrs, ns) {\n\t\t// If you assign an input type that is not supported by IE 11 with an assignment expression, an error will occur.\n\t\t//\n\t\t// Also, the DOM does things to inputs based on the value, so it needs set first.\n\t\t// See: https://github.com/MithrilJS/mithril.js/issues/2622\n\t\tif (vnode.tag === \"input\" && attrs.type != null) vnode.dom.setAttribute(\"type\", attrs.type)\n\t\tvar isFileInput = attrs != null && vnode.tag === \"input\" && attrs.type === \"file\"\n\t\tfor (var key in attrs) {\n\t\t\tsetAttr(vnode, key, null, attrs[key], ns, isFileInput)\n\t\t}\n\t}\n\tfunction setAttr(vnode, key, old, value, ns, isFileInput) {\n\t\tif (key === \"key\" || key === \"is\" || value == null || isLifecycleMethod(key) || (old === value && !isFormAttribute(vnode, key)) && typeof value !== \"object\" || key === \"type\" && vnode.tag === \"input\") return\n\t\tif (key[0] === \"o\" && key[1] === \"n\") return updateEvent(vnode, key, value)\n\t\tif (key.slice(0, 6) === \"xlink:\") vnode.dom.setAttributeNS(\"http://www.w3.org/1999/xlink\", key.slice(6), value)\n\t\telse if (key === \"style\") updateStyle(vnode.dom, old, value)\n\t\telse if (hasPropertyKey(vnode, key, ns)) {\n\t\t\tif (key === \"value\") {\n\t\t\t\t// Only do the coercion if we're actually going to check the value.\n\t\t\t\t/* eslint-disable no-implicit-coercion */\n\t\t\t\t//setting input[value] to same value by typing on focused element moves cursor to end in Chrome\n\t\t\t\t//setting input[type=file][value] to same value causes an error to be generated if it's non-empty\n\t\t\t\tif ((vnode.tag === \"input\" || vnode.tag === \"textarea\") && vnode.dom.value === \"\" + value && (isFileInput || vnode.dom === activeElement())) return\n\t\t\t\t//setting select[value] to same value while having select open blinks select dropdown in Chrome\n\t\t\t\tif (vnode.tag === \"select\" && old !== null && vnode.dom.value === \"\" + value) return\n\t\t\t\t//setting option[value] to same value while having select open blinks select dropdown in Chrome\n\t\t\t\tif (vnode.tag === \"option\" && old !== null && vnode.dom.value === \"\" + value) return\n\t\t\t\t//setting input[type=file][value] to different value is an error if it's non-empty\n\t\t\t\t// Not ideal, but it at least works around the most common source of uncaught exceptions for now.\n\t\t\t\tif (isFileInput && \"\" + value !== \"\") { console.error(\"`value` is read-only on file inputs!\"); return }\n\t\t\t\t/* eslint-enable no-implicit-coercion */\n\t\t\t}\n\t\t\tvnode.dom[key] = value\n\t\t} else {\n\t\t\tif (typeof value === \"boolean\") {\n\t\t\t\tif (value) vnode.dom.setAttribute(key, \"\")\n\t\t\t\telse vnode.dom.removeAttribute(key)\n\t\t\t}\n\t\t\telse vnode.dom.setAttribute(key === \"className\" ? \"class\" : key, value)\n\t\t}\n\t}\n\tfunction removeAttr(vnode, key, old, ns) {\n\t\tif (key === \"key\" || key === \"is\" || old == null || isLifecycleMethod(key)) return\n\t\tif (key[0] === \"o\" && key[1] === \"n\") updateEvent(vnode, key, undefined)\n\t\telse if (key === \"style\") updateStyle(vnode.dom, old, null)\n\t\telse if (\n\t\t\thasPropertyKey(vnode, key, ns)\n\t\t\t&& key !== \"className\"\n\t\t\t&& key !== \"title\" // creates \"null\" as title\n\t\t\t&& !(key === \"value\" && (\n\t\t\t\tvnode.tag === \"option\"\n\t\t\t\t|| vnode.tag === \"select\" && vnode.dom.selectedIndex === -1 && vnode.dom === activeElement()\n\t\t\t))\n\t\t\t&& !(vnode.tag === \"input\" && key === \"type\")\n\t\t) {\n\t\t\tvnode.dom[key] = null\n\t\t} else {\n\t\t\tvar nsLastIndex = key.indexOf(\":\")\n\t\t\tif (nsLastIndex !== -1) key = key.slice(nsLastIndex + 1)\n\t\t\tif (old !== false) vnode.dom.removeAttribute(key === \"className\" ? \"class\" : key)\n\t\t}\n\t}\n\tfunction setLateSelectAttrs(vnode, attrs) {\n\t\tif (\"value\" in attrs) {\n\t\t\tif(attrs.value === null) {\n\t\t\t\tif (vnode.dom.selectedIndex !== -1) vnode.dom.value = null\n\t\t\t} else {\n\t\t\t\tvar normalized = \"\" + attrs.value // eslint-disable-line no-implicit-coercion\n\t\t\t\tif (vnode.dom.value !== normalized || vnode.dom.selectedIndex === -1) {\n\t\t\t\t\tvnode.dom.value = normalized\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (\"selectedIndex\" in attrs) setAttr(vnode, \"selectedIndex\", null, attrs.selectedIndex, undefined)\n\t}\n\tfunction updateAttrs(vnode, old, attrs, ns) {\n\t\tif (old && old === attrs) {\n\t\t\tconsole.warn(\"Don't reuse attrs object, use new object for every redraw, this will throw in next major\")\n\t\t}\n\t\tif (attrs != null) {\n\t\t\t// If you assign an input type that is not supported by IE 11 with an assignment expression, an error will occur.\n\t\t\t//\n\t\t\t// Also, the DOM does things to inputs based on the value, so it needs set first.\n\t\t\t// See: https://github.com/MithrilJS/mithril.js/issues/2622\n\t\t\tif (vnode.tag === \"input\" && attrs.type != null) vnode.dom.setAttribute(\"type\", attrs.type)\n\t\t\tvar isFileInput = vnode.tag === \"input\" && attrs.type === \"file\"\n\t\t\tfor (var key in attrs) {\n\t\t\t\tsetAttr(vnode, key, old && old[key], attrs[key], ns, isFileInput)\n\t\t\t}\n\t\t}\n\t\tvar val\n\t\tif (old != null) {\n\t\t\tfor (var key in old) {\n\t\t\t\tif (((val = old[key]) != null) && (attrs == null || attrs[key] == null)) {\n\t\t\t\t\tremoveAttr(vnode, key, val, ns)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction isFormAttribute(vnode, attr) {\n\t\treturn attr === \"value\" || attr === \"checked\" || attr === \"selectedIndex\" || attr === \"selected\" && vnode.dom === activeElement() || vnode.tag === \"option\" && vnode.dom.parentNode === $doc.activeElement\n\t}\n\tfunction isLifecycleMethod(attr) {\n\t\treturn attr === \"oninit\" || attr === \"oncreate\" || attr === \"onupdate\" || attr === \"onremove\" || attr === \"onbeforeremove\" || attr === \"onbeforeupdate\"\n\t}\n\tfunction hasPropertyKey(vnode, key, ns) {\n\t\t// Filter out namespaced keys\n\t\treturn ns === undefined && (\n\t\t\t// If it's a custom element, just keep it.\n\t\t\tvnode.tag.indexOf(\"-\") > -1 || vnode.attrs != null && vnode.attrs.is ||\n\t\t\t// If it's a normal element, let's try to avoid a few browser bugs.\n\t\t\tkey !== \"href\" && key !== \"list\" && key !== \"form\" && key !== \"width\" && key !== \"height\"// && key !== \"type\"\n\t\t\t// Defer the property check until *after* we check everything.\n\t\t) && key in vnode.dom\n\t}\n\n\t//style\n\tvar uppercaseRegex = /[A-Z]/g\n\tfunction toLowerCase(capital) { return \"-\" + capital.toLowerCase() }\n\tfunction normalizeKey(key) {\n\t\treturn key[0] === \"-\" && key[1] === \"-\" ? key :\n\t\t\tkey === \"cssFloat\" ? \"float\" :\n\t\t\t\tkey.replace(uppercaseRegex, toLowerCase)\n\t}\n\tfunction updateStyle(element, old, style) {\n\t\tif (old === style) {\n\t\t\t// Styles are equivalent, do nothing.\n\t\t} else if (style == null) {\n\t\t\t// New style is missing, just clear it.\n\t\t\telement.style = \"\"\n\t\t} else if (typeof style !== \"object\") {\n\t\t\t// New style is a string, let engine deal with patching.\n\t\t\telement.style = style\n\t\t} else if (old == null || typeof old !== \"object\") {\n\t\t\t// `old` is missing or a string, `style` is an object.\n\t\t\telement.style.cssText = \"\"\n\t\t\t// Add new style properties\n\t\t\tfor (var key in style) {\n\t\t\t\tvar value = style[key]\n\t\t\t\tif (value != null) element.style.setProperty(normalizeKey(key), String(value))\n\t\t\t}\n\t\t} else {\n\t\t\t// Both old & new are (different) objects.\n\t\t\t// Update style properties that have changed\n\t\t\tfor (var key in style) {\n\t\t\t\tvar value = style[key]\n\t\t\t\tif (value != null && (value = String(value)) !== String(old[key])) {\n\t\t\t\t\telement.style.setProperty(normalizeKey(key), value)\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Remove style properties that no longer exist\n\t\t\tfor (var key in old) {\n\t\t\t\tif (old[key] != null && style[key] == null) {\n\t\t\t\t\telement.style.removeProperty(normalizeKey(key))\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Here's an explanation of how this works:\n\t// 1. The event names are always (by design) prefixed by `on`.\n\t// 2. The EventListener interface accepts either a function or an object\n\t//    with a `handleEvent` method.\n\t// 3. The object does not inherit from `Object.prototype`, to avoid\n\t//    any potential interference with that (e.g. setters).\n\t// 4. The event name is remapped to the handler before calling it.\n\t// 5. In function-based event handlers, `ev.target === this`. We replicate\n\t//    that below.\n\t// 6. In function-based event handlers, `return false` prevents the default\n\t//    action and stops event propagation. We replicate that below.\n\tfunction EventDict() {\n\t\t// Save this, so the current redraw is correctly tracked.\n\t\tthis._ = currentRedraw\n\t}\n\tEventDict.prototype = Object.create(null)\n\tEventDict.prototype.handleEvent = function (ev) {\n\t\tvar handler = this[\"on\" + ev.type]\n\t\tvar result\n\t\tif (typeof handler === \"function\") result = handler.call(ev.currentTarget, ev)\n\t\telse if (typeof handler.handleEvent === \"function\") handler.handleEvent(ev)\n\t\tif (this._ && ev.redraw !== false) (0, this._)()\n\t\tif (result === false) {\n\t\t\tev.preventDefault()\n\t\t\tev.stopPropagation()\n\t\t}\n\t}\n\n\t//event\n\tfunction updateEvent(vnode, key, value) {\n\t\tif (vnode.events != null) {\n\t\t\tvnode.events._ = currentRedraw\n\t\t\tif (vnode.events[key] === value) return\n\t\t\tif (value != null && (typeof value === \"function\" || typeof value === \"object\")) {\n\t\t\t\tif (vnode.events[key] == null) vnode.dom.addEventListener(key.slice(2), vnode.events, false)\n\t\t\t\tvnode.events[key] = value\n\t\t\t} else {\n\t\t\t\tif (vnode.events[key] != null) vnode.dom.removeEventListener(key.slice(2), vnode.events, false)\n\t\t\t\tvnode.events[key] = undefined\n\t\t\t}\n\t\t} else if (value != null && (typeof value === \"function\" || typeof value === \"object\")) {\n\t\t\tvnode.events = new EventDict()\n\t\t\tvnode.dom.addEventListener(key.slice(2), vnode.events, false)\n\t\t\tvnode.events[key] = value\n\t\t}\n\t}\n\n\t//lifecycle\n\tfunction initLifecycle(source, vnode, hooks) {\n\t\tif (typeof source.oninit === \"function\") callHook.call(source.oninit, vnode)\n\t\tif (typeof source.oncreate === \"function\") hooks.push(callHook.bind(source.oncreate, vnode))\n\t}\n\tfunction updateLifecycle(source, vnode, hooks) {\n\t\tif (typeof source.onupdate === \"function\") hooks.push(callHook.bind(source.onupdate, vnode))\n\t}\n\tfunction shouldNotUpdate(vnode, old) {\n\t\tdo {\n\t\t\tif (vnode.attrs != null && typeof vnode.attrs.onbeforeupdate === \"function\") {\n\t\t\t\tvar force = callHook.call(vnode.attrs.onbeforeupdate, vnode, old)\n\t\t\t\tif (force !== undefined && !force) break\n\t\t\t}\n\t\t\tif (typeof vnode.tag !== \"string\" && typeof vnode.state.onbeforeupdate === \"function\") {\n\t\t\t\tvar force = callHook.call(vnode.state.onbeforeupdate, vnode, old)\n\t\t\t\tif (force !== undefined && !force) break\n\t\t\t}\n\t\t\treturn false\n\t\t} while (false); // eslint-disable-line no-constant-condition\n\t\tvnode.dom = old.dom\n\t\tvnode.domSize = old.domSize\n\t\tvnode.instance = old.instance\n\t\t// One would think having the actual latest attributes would be ideal,\n\t\t// but it doesn't let us properly diff based on our current internal\n\t\t// representation. We have to save not only the old DOM info, but also\n\t\t// the attributes used to create it, as we diff *that*, not against the\n\t\t// DOM directly (with a few exceptions in `setAttr`). And, of course, we\n\t\t// need to save the children and text as they are conceptually not\n\t\t// unlike special \"attributes\" internally.\n\t\tvnode.attrs = old.attrs\n\t\tvnode.children = old.children\n\t\tvnode.text = old.text\n\t\treturn true\n\t}\n\n\tvar currentDOM\n\n\treturn function(dom, vnodes, redraw) {\n\t\tif (!dom) throw new TypeError(\"DOM element being rendered to does not exist.\")\n\t\tif (currentDOM != null && dom.contains(currentDOM)) {\n\t\t\tthrow new TypeError(\"Node is currently being rendered to and thus is locked.\")\n\t\t}\n\t\tvar prevRedraw = currentRedraw\n\t\tvar prevDOM = currentDOM\n\t\tvar hooks = []\n\t\tvar active = activeElement()\n\t\tvar namespace = dom.namespaceURI\n\n\t\tcurrentDOM = dom\n\t\tcurrentRedraw = typeof redraw === \"function\" ? redraw : undefined\n\t\tcurrentRender = {}\n\t\ttry {\n\t\t\t// First time rendering into a node clears it out\n\t\t\tif (dom.vnodes == null) dom.textContent = \"\"\n\t\t\tvnodes = Vnode.normalizeChildren(Array.isArray(vnodes) ? vnodes : [vnodes])\n\t\t\tupdateNodes(dom, dom.vnodes, vnodes, hooks, null, namespace === \"http://www.w3.org/1999/xhtml\" ? undefined : namespace)\n\t\t\tdom.vnodes = vnodes\n\t\t\t// `document.activeElement` can return null: https://html.spec.whatwg.org/multipage/interaction.html#dom-document-activeelement\n\t\t\tif (active != null && activeElement() !== active && typeof active.focus === \"function\") active.focus()\n\t\t\tfor (var i = 0; i < hooks.length; i++) hooks[i]()\n\t\t} finally {\n\t\t\tcurrentRedraw = prevRedraw\n\t\t\tcurrentDOM = prevDOM\n\t\t}\n\t}\n}\n", "\"use strict\"\n\nmodule.exports = require(\"./render/render\")(typeof window !== \"undefined\" ? window : null)\n", "\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\n\nmodule.exports = function(render, schedule, console) {\n\tvar subscriptions = []\n\tvar pending = false\n\tvar offset = -1\n\n\tfunction sync() {\n\t\tfor (offset = 0; offset < subscriptions.length; offset += 2) {\n\t\t\ttry { render(subscriptions[offset], Vnode(subscriptions[offset + 1]), redraw) }\n\t\t\tcatch (e) { console.error(e) }\n\t\t}\n\t\toffset = -1\n\t}\n\n\tfunction redraw() {\n\t\tif (!pending) {\n\t\t\tpending = true\n\t\t\tschedule(function() {\n\t\t\t\tpending = false\n\t\t\t\tsync()\n\t\t\t})\n\t\t}\n\t}\n\n\tredraw.sync = sync\n\n\tfunction mount(root, component) {\n\t\tif (component != null && component.view == null && typeof component !== \"function\") {\n\t\t\tthrow new TypeError(\"m.mount expects a component, not a vnode.\")\n\t\t}\n\n\t\tvar index = subscriptions.indexOf(root)\n\t\tif (index >= 0) {\n\t\t\tsubscriptions.splice(index, 2)\n\t\t\tif (index <= offset) offset -= 2\n\t\t\trender(root, [])\n\t\t}\n\n\t\tif (component != null) {\n\t\t\tsubscriptions.push(root, component)\n\t\t\trender(root, Vnode(component), redraw)\n\t\t}\n\t}\n\n\treturn {mount: mount, redraw: redraw}\n}\n", "\"use strict\"\n\nvar render = require(\"./render\")\n\nmodule.exports = require(\"./api/mount-redraw\")(render, typeof requestAnimationFrame !== \"undefined\" ? requestAnimationFrame : null, typeof console !== \"undefined\" ? console : null)\n", "\"use strict\"\n\nmodule.exports = function(object) {\n\tif (Object.prototype.toString.call(object) !== \"[object Object]\") return \"\"\n\n\tvar args = []\n\tfor (var key in object) {\n\t\tdestructure(key, object[key])\n\t}\n\n\treturn args.join(\"&\")\n\n\tfunction destructure(key, value) {\n\t\tif (Array.isArray(value)) {\n\t\t\tfor (var i = 0; i < value.length; i++) {\n\t\t\t\tdestructure(key + \"[\" + i + \"]\", value[i])\n\t\t\t}\n\t\t}\n\t\telse if (Object.prototype.toString.call(value) === \"[object Object]\") {\n\t\t\tfor (var i in value) {\n\t\t\t\tdestructure(key + \"[\" + i + \"]\", value[i])\n\t\t\t}\n\t\t}\n\t\telse args.push(encodeURIComponent(key) + (value != null && value !== \"\" ? \"=\" + encodeURIComponent(value) : \"\"))\n\t}\n}\n", "// This exists so I'm only saving it once.\n\"use strict\"\n\nvar hasOwn = require(\"./hasOwn\")\n\nmodule.exports = Object.assign || function(target, source) {\n\tfor (var key in source) {\n\t\tif (hasOwn.call(source, key)) target[key] = source[key]\n\t}\n}\n", "\"use strict\"\n\nvar buildQueryString = require(\"../querystring/build\")\nvar assign = require(\"../util/assign\")\n\n// Returns `path` from `template` + `params`\nmodule.exports = function(template, params) {\n\tif ((/:([^\\/\\.-]+)(\\.{3})?:/).test(template)) {\n\t\tthrow new SyntaxError(\"Template parameter names must be separated by either a '/', '-', or '.'.\")\n\t}\n\tif (params == null) return template\n\tvar queryIndex = template.indexOf(\"?\")\n\tvar hashIndex = template.indexOf(\"#\")\n\tvar queryEnd = hashIndex < 0 ? template.length : hashIndex\n\tvar pathEnd = queryIndex < 0 ? queryEnd : queryIndex\n\tvar path = template.slice(0, pathEnd)\n\tvar query = {}\n\n\tassign(query, params)\n\n\tvar resolved = path.replace(/:([^\\/\\.-]+)(\\.{3})?/g, function(m, key, variadic) {\n\t\tdelete query[key]\n\t\t// If no such parameter exists, don't interpolate it.\n\t\tif (params[key] == null) return m\n\t\t// Escape normal parameters, but not variadic ones.\n\t\treturn variadic ? params[key] : encodeURIComponent(String(params[key]))\n\t})\n\n\t// In case the template substitution adds new query/hash parameters.\n\tvar newQueryIndex = resolved.indexOf(\"?\")\n\tvar newHashIndex = resolved.indexOf(\"#\")\n\tvar newQueryEnd = newHashIndex < 0 ? resolved.length : newHashIndex\n\tvar newPathEnd = newQueryIndex < 0 ? newQueryEnd : newQueryIndex\n\tvar result = resolved.slice(0, newPathEnd)\n\n\tif (queryIndex >= 0) result += template.slice(queryIndex, queryEnd)\n\tif (newQueryIndex >= 0) result += (queryIndex < 0 ? \"?\" : \"&\") + resolved.slice(newQueryIndex, newQueryEnd)\n\tvar querystring = buildQueryString(query)\n\tif (querystring) result += (queryIndex < 0 && newQueryIndex < 0 ? \"?\" : \"&\") + querystring\n\tif (hashIndex >= 0) result += template.slice(hashIndex)\n\tif (newHashIndex >= 0) result += (hashIndex < 0 ? \"\" : \"&\") + resolved.slice(newHashIndex)\n\treturn result\n}\n", "\"use strict\"\n\nvar buildPathname = require(\"../pathname/build\")\nvar hasOwn = require(\"../util/hasOwn\")\n\nmodule.exports = function($window, oncompletion) {\n\tfunction PromiseProxy(executor) {\n\t\treturn new Promise(executor)\n\t}\n\n\tfunction makeRequest(url, args) {\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\turl = buildPathname(url, args.params)\n\t\t\tvar method = args.method != null ? args.method.toUpperCase() : \"GET\"\n\t\t\tvar body = args.body\n\t\t\tvar assumeJSON = (args.serialize == null || args.serialize === JSON.serialize) && !(body instanceof $window.FormData || body instanceof $window.URLSearchParams)\n\t\t\tvar responseType = args.responseType || (typeof args.extract === \"function\" ? \"\" : \"json\")\n\n\t\t\tvar xhr = new $window.XMLHttpRequest(), aborted = false, isTimeout = false\n\t\t\tvar original = xhr, replacedAbort\n\t\t\tvar abort = xhr.abort\n\n\t\t\txhr.abort = function() {\n\t\t\t\taborted = true\n\t\t\t\tabort.call(this)\n\t\t\t}\n\n\t\t\txhr.open(method, url, args.async !== false, typeof args.user === \"string\" ? args.user : undefined, typeof args.password === \"string\" ? args.password : undefined)\n\n\t\t\tif (assumeJSON && body != null && !hasHeader(args, \"content-type\")) {\n\t\t\t\txhr.setRequestHeader(\"Content-Type\", \"application/json; charset=utf-8\")\n\t\t\t}\n\t\t\tif (typeof args.deserialize !== \"function\" && !hasHeader(args, \"accept\")) {\n\t\t\t\txhr.setRequestHeader(\"Accept\", \"application/json, text/*\")\n\t\t\t}\n\t\t\tif (args.withCredentials) xhr.withCredentials = args.withCredentials\n\t\t\tif (args.timeout) xhr.timeout = args.timeout\n\t\t\txhr.responseType = responseType\n\n\t\t\tfor (var key in args.headers) {\n\t\t\t\tif (hasOwn.call(args.headers, key)) {\n\t\t\t\t\txhr.setRequestHeader(key, args.headers[key])\n\t\t\t\t}\n\t\t\t}\n\n\t\t\txhr.onreadystatechange = function(ev) {\n\t\t\t\t// Don't throw errors on xhr.abort().\n\t\t\t\tif (aborted) return\n\n\t\t\t\tif (ev.target.readyState === 4) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar success = (ev.target.status >= 200 && ev.target.status < 300) || ev.target.status === 304 || (/^file:\\/\\//i).test(url)\n\t\t\t\t\t\t// When the response type isn't \"\" or \"text\",\n\t\t\t\t\t\t// `xhr.responseText` is the wrong thing to use.\n\t\t\t\t\t\t// Browsers do the right thing and throw here, and we\n\t\t\t\t\t\t// should honor that and do the right thing by\n\t\t\t\t\t\t// preferring `xhr.response` where possible/practical.\n\t\t\t\t\t\tvar response = ev.target.response, message\n\n\t\t\t\t\t\tif (responseType === \"json\") {\n\t\t\t\t\t\t\t// For IE and Edge, which don't implement\n\t\t\t\t\t\t\t// `responseType: \"json\"`.\n\t\t\t\t\t\t\tif (!ev.target.responseType && typeof args.extract !== \"function\") {\n\t\t\t\t\t\t\t\t// Handle no-content which will not parse.\n\t\t\t\t\t\t\t\ttry { response = JSON.parse(ev.target.responseText) }\n\t\t\t\t\t\t\t\tcatch (e) { response = null }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (!responseType || responseType === \"text\") {\n\t\t\t\t\t\t\t// Only use this default if it's text. If a parsed\n\t\t\t\t\t\t\t// document is needed on old IE and friends (all\n\t\t\t\t\t\t\t// unsupported), the user should use a custom\n\t\t\t\t\t\t\t// `config` instead. They're already using this at\n\t\t\t\t\t\t\t// their own risk.\n\t\t\t\t\t\t\tif (response == null) response = ev.target.responseText\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (typeof args.extract === \"function\") {\n\t\t\t\t\t\t\tresponse = args.extract(ev.target, args)\n\t\t\t\t\t\t\tsuccess = true\n\t\t\t\t\t\t} else if (typeof args.deserialize === \"function\") {\n\t\t\t\t\t\t\tresponse = args.deserialize(response)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (success) {\n\t\t\t\t\t\t\tif (typeof args.type === \"function\") {\n\t\t\t\t\t\t\t\tif (Array.isArray(response)) {\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < response.length; i++) {\n\t\t\t\t\t\t\t\t\t\tresponse[i] = new args.type(response[i])\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse response = new args.type(response)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tresolve(response)\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tvar completeErrorResponse = function() {\n\t\t\t\t\t\t\t\ttry { message = ev.target.responseText }\n\t\t\t\t\t\t\t\tcatch (e) { message = response }\n\t\t\t\t\t\t\t\tvar error = new Error(message)\n\t\t\t\t\t\t\t\terror.code = ev.target.status\n\t\t\t\t\t\t\t\terror.response = response\n\t\t\t\t\t\t\t\treject(error)\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (xhr.status === 0) {\n\t\t\t\t\t\t\t\t// Use setTimeout to push this code block onto the event queue\n\t\t\t\t\t\t\t\t// This allows `xhr.ontimeout` to run in the case that there is a timeout\n\t\t\t\t\t\t\t\t// Without this setTimeout, `xhr.ontimeout` doesn't have a chance to reject\n\t\t\t\t\t\t\t\t// as `xhr.onreadystatechange` will run before it\n\t\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\t\tif (isTimeout) return\n\t\t\t\t\t\t\t\t\tcompleteErrorResponse()\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t} else completeErrorResponse()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\treject(e)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\txhr.ontimeout = function (ev) {\n\t\t\t\tisTimeout = true\n\t\t\t\tvar error = new Error(\"Request timed out\")\n\t\t\t\terror.code = ev.target.status\n\t\t\t\treject(error)\n\t\t\t}\n\n\t\t\tif (typeof args.config === \"function\") {\n\t\t\t\txhr = args.config(xhr, args, url) || xhr\n\n\t\t\t\t// Propagate the `abort` to any replacement XHR as well.\n\t\t\t\tif (xhr !== original) {\n\t\t\t\t\treplacedAbort = xhr.abort\n\t\t\t\t\txhr.abort = function() {\n\t\t\t\t\t\taborted = true\n\t\t\t\t\t\treplacedAbort.call(this)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (body == null) xhr.send()\n\t\t\telse if (typeof args.serialize === \"function\") xhr.send(args.serialize(body))\n\t\t\telse if (body instanceof $window.FormData || body instanceof $window.URLSearchParams) xhr.send(body)\n\t\t\telse xhr.send(JSON.stringify(body))\n\t\t})\n\t}\n\n\t// In case the global Promise is some userland library's where they rely on\n\t// `foo instanceof this.constructor`, `this.constructor.resolve(value)`, or\n\t// similar. Let's *not* break them.\n\tPromiseProxy.prototype = Promise.prototype\n\tPromiseProxy.__proto__ = Promise // eslint-disable-line no-proto\n\n\tfunction hasHeader(args, name) {\n\t\tfor (var key in args.headers) {\n\t\t\tif (hasOwn.call(args.headers, key) && key.toLowerCase() === name) return true\n\t\t}\n\t\treturn false\n\t}\n\n\treturn {\n\t\trequest: function(url, args) {\n\t\t\tif (typeof url !== \"string\") { args = url; url = url.url }\n\t\t\telse if (args == null) args = {}\n\t\t\tvar promise = makeRequest(url, args)\n\t\t\tif (args.background === true) return promise\n\t\t\tvar count = 0\n\t\t\tfunction complete() {\n\t\t\t\tif (--count === 0 && typeof oncompletion === \"function\") oncompletion()\n\t\t\t}\n\n\t\t\treturn wrap(promise)\n\n\t\t\tfunction wrap(promise) {\n\t\t\t\tvar then = promise.then\n\t\t\t\t// Set the constructor, so engines know to not await or resolve\n\t\t\t\t// this as a native promise. At the time of writing, this is\n\t\t\t\t// only necessary for V8, but their behavior is the correct\n\t\t\t\t// behavior per spec. See this spec issue for more details:\n\t\t\t\t// https://github.com/tc39/ecma262/issues/1577. Also, see the\n\t\t\t\t// corresponding comment in `request/tests/test-request.js` for\n\t\t\t\t// a bit more background on the issue at hand.\n\t\t\t\tpromise.constructor = PromiseProxy\n\t\t\t\tpromise.then = function() {\n\t\t\t\t\tcount++\n\t\t\t\t\tvar next = then.apply(promise, arguments)\n\t\t\t\t\tnext.then(complete, function(e) {\n\t\t\t\t\t\tcomplete()\n\t\t\t\t\t\tif (count === 0) throw e\n\t\t\t\t\t})\n\t\t\t\t\treturn wrap(next)\n\t\t\t\t}\n\t\t\t\treturn promise\n\t\t\t}\n\t\t}\n\t}\n}\n", "\"use strict\"\n\nvar mountRedraw = require(\"./mount-redraw\")\n\nmodule.exports = require(\"./request/request\")(typeof window !== \"undefined\" ? window : null, mountRedraw.redraw)\n", "\"use strict\"\n\nfunction decodeURIComponentSave(str) {\n\ttry {\n\t\treturn decodeURIComponent(str)\n\t} catch(err) {\n\t\treturn str\n\t}\n}\n\nmodule.exports = function(string) {\n\tif (string === \"\" || string == null) return {}\n\tif (string.charAt(0) === \"?\") string = string.slice(1)\n\n\tvar entries = string.split(\"&\"), counters = {}, data = {}\n\tfor (var i = 0; i < entries.length; i++) {\n\t\tvar entry = entries[i].split(\"=\")\n\t\tvar key = decodeURIComponentSave(entry[0])\n\t\tvar value = entry.length === 2 ? decodeURIComponentSave(entry[1]) : \"\"\n\n\t\tif (value === \"true\") value = true\n\t\telse if (value === \"false\") value = false\n\n\t\tvar levels = key.split(/\\]\\[?|\\[/)\n\t\tvar cursor = data\n\t\tif (key.indexOf(\"[\") > -1) levels.pop()\n\t\tfor (var j = 0; j < levels.length; j++) {\n\t\t\tvar level = levels[j], nextLevel = levels[j + 1]\n\t\t\tvar isNumber = nextLevel == \"\" || !isNaN(parseInt(nextLevel, 10))\n\t\t\tif (level === \"\") {\n\t\t\t\tvar key = levels.slice(0, j).join()\n\t\t\t\tif (counters[key] == null) {\n\t\t\t\t\tcounters[key] = Array.isArray(cursor) ? cursor.length : 0\n\t\t\t\t}\n\t\t\t\tlevel = counters[key]++\n\t\t\t}\n\t\t\t// Disallow direct prototype pollution\n\t\t\telse if (level === \"__proto__\") break\n\t\t\tif (j === levels.length - 1) cursor[level] = value\n\t\t\telse {\n\t\t\t\t// Read own properties exclusively to disallow indirect\n\t\t\t\t// prototype pollution\n\t\t\t\tvar desc = Object.getOwnPropertyDescriptor(cursor, level)\n\t\t\t\tif (desc != null) desc = desc.value\n\t\t\t\tif (desc == null) cursor[level] = desc = isNumber ? [] : {}\n\t\t\t\tcursor = desc\n\t\t\t}\n\t\t}\n\t}\n\treturn data\n}\n", "\"use strict\"\n\nvar parseQueryString = require(\"../querystring/parse\")\n\n// Returns `{path, params}` from `url`\nmodule.exports = function(url) {\n\tvar queryIndex = url.indexOf(\"?\")\n\tvar hashIndex = url.indexOf(\"#\")\n\tvar queryEnd = hashIndex < 0 ? url.length : hashIndex\n\tvar pathEnd = queryIndex < 0 ? queryEnd : queryIndex\n\tvar path = url.slice(0, pathEnd).replace(/\\/{2,}/g, \"/\")\n\n\tif (!path) path = \"/\"\n\telse {\n\t\tif (path[0] !== \"/\") path = \"/\" + path\n\t}\n\treturn {\n\t\tpath: path,\n\t\tparams: queryIndex < 0\n\t\t\t? {}\n\t\t\t: parseQueryString(url.slice(queryIndex + 1, queryEnd)),\n\t}\n}\n", "\"use strict\"\n\nvar parsePathname = require(\"./parse\")\n\n// Compiles a template into a function that takes a resolved path (without query\n// strings) and returns an object containing the template parameters with their\n// parsed values. This expects the input of the compiled template to be the\n// output of `parsePathname`. Note that it does *not* remove query parameters\n// specified in the template.\nmodule.exports = function(template) {\n\tvar templateData = parsePathname(template)\n\tvar templateKeys = Object.keys(templateData.params)\n\tvar keys = []\n\tvar regexp = new RegExp(\"^\" + templateData.path.replace(\n\t\t// I escape literal text so people can use things like `:file.:ext` or\n\t\t// `:lang-:locale` in routes. This is all merged into one pass so I\n\t\t// don't also accidentally escape `-` and make it harder to detect it to\n\t\t// ban it from template parameters.\n\t\t/:([^\\/.-]+)(\\.{3}|\\.(?!\\.)|-)?|[\\\\^$*+.()|\\[\\]{}]/g,\n\t\tfunction(m, key, extra) {\n\t\t\tif (key == null) return \"\\\\\" + m\n\t\t\tkeys.push({k: key, r: extra === \"...\"})\n\t\t\tif (extra === \"...\") return \"(.*)\"\n\t\t\tif (extra === \".\") return \"([^/]+)\\\\.\"\n\t\t\treturn \"([^/]+)\" + (extra || \"\")\n\t\t}\n\t) + \"$\")\n\treturn function(data) {\n\t\t// First, check the params. Usually, there isn't any, and it's just\n\t\t// checking a static set.\n\t\tfor (var i = 0; i < templateKeys.length; i++) {\n\t\t\tif (templateData.params[templateKeys[i]] !== data.params[templateKeys[i]]) return false\n\t\t}\n\t\t// If no interpolations exist, let's skip all the ceremony\n\t\tif (!keys.length) return regexp.test(data.path)\n\t\tvar values = regexp.exec(data.path)\n\t\tif (values == null) return false\n\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\tdata.params[keys[i].k] = keys[i].r ? values[i + 1] : decodeURIComponent(values[i + 1])\n\t\t}\n\t\treturn true\n\t}\n}\n", "\"use strict\"\n\n// Note: this is mildly perf-sensitive.\n//\n// It does *not* use `delete` - dynamic `delete`s usually cause objects to bail\n// out into dictionary mode and just generally cause a bunch of optimization\n// issues within engines.\n//\n// Ideally, I would've preferred to do this, if it weren't for the optimization\n// issues:\n//\n// ```js\n// const hasOwn = require(\"./hasOwn\")\n// const magic = [\n//     \"key\", \"oninit\", \"oncreate\", \"onbeforeupdate\", \"onupdate\",\n//     \"onbeforeremove\", \"onremove\",\n// ]\n// module.exports = (attrs, extras) => {\n//     const result = Object.assign(Object.create(null), attrs)\n//     for (const key of magic) delete result[key]\n//     if (extras != null) for (const key of extras) delete result[key]\n//     return result\n// }\n// ```\n\nvar hasOwn = require(\"./hasOwn\")\n// Words in RegExp literals are sometimes mangled incorrectly by the internal bundler, so use RegExp().\nvar magic = new RegExp(\"^(?:key|oninit|oncreate|onbeforeupdate|onupdate|onbeforeremove|onremove)$\")\n\nmodule.exports = function(attrs, extras) {\n\tvar result = {}\n\n\tif (extras != null) {\n\t\tfor (var key in attrs) {\n\t\t\tif (hasOwn.call(attrs, key) && !magic.test(key) && extras.indexOf(key) < 0) {\n\t\t\t\tresult[key] = attrs[key]\n\t\t\t}\n\t\t}\n\t} else {\n\t\tfor (var key in attrs) {\n\t\t\tif (hasOwn.call(attrs, key) && !magic.test(key)) {\n\t\t\t\tresult[key] = attrs[key]\n\t\t\t}\n\t\t}\n\t}\n\n\treturn result\n}\n", "\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\nvar m = require(\"../render/hyperscript\")\n\nvar buildPathname = require(\"../pathname/build\")\nvar parsePathname = require(\"../pathname/parse\")\nvar compileTemplate = require(\"../pathname/compileTemplate\")\nvar assign = require(\"../util/assign\")\nvar censor = require(\"../util/censor\")\n\nvar sentinel = {}\n\nfunction decodeURIComponentSave(component) {\n\ttry {\n\t\treturn decodeURIComponent(component)\n\t} catch(e) {\n\t\treturn component\n\t}\n}\n\nmodule.exports = function($window, mountRedraw) {\n\tvar callAsync = $window == null\n\t\t// In case Mithril.js' loaded globally without the DOM, let's not break\n\t\t? null\n\t\t: typeof $window.setImmediate === \"function\" ? $window.setImmediate : $window.setTimeout\n\tvar p = Promise.resolve()\n\n\tvar scheduled = false\n\n\t// state === 0: init\n\t// state === 1: scheduled\n\t// state === 2: done\n\tvar ready = false\n\tvar state = 0\n\n\tvar compiled, fallbackRoute\n\n\tvar currentResolver = sentinel, component, attrs, currentPath, lastUpdate\n\n\tvar RouterRoot = {\n\t\tonbeforeupdate: function() {\n\t\t\tstate = state ? 2 : 1\n\t\t\treturn !(!state || sentinel === currentResolver)\n\t\t},\n\t\tonremove: function() {\n\t\t\t$window.removeEventListener(\"popstate\", fireAsync, false)\n\t\t\t$window.removeEventListener(\"hashchange\", resolveRoute, false)\n\t\t},\n\t\tview: function() {\n\t\t\tif (!state || sentinel === currentResolver) return\n\t\t\t// Wrap in a fragment to preserve existing key semantics\n\t\t\tvar vnode = [Vnode(component, attrs.key, attrs)]\n\t\t\tif (currentResolver) vnode = currentResolver.render(vnode[0])\n\t\t\treturn vnode\n\t\t},\n\t}\n\n\tvar SKIP = route.SKIP = {}\n\n\tfunction resolveRoute() {\n\t\tscheduled = false\n\t\t// Consider the pathname holistically. The prefix might even be invalid,\n\t\t// but that's not our problem.\n\t\tvar prefix = $window.location.hash\n\t\tif (route.prefix[0] !== \"#\") {\n\t\t\tprefix = $window.location.search + prefix\n\t\t\tif (route.prefix[0] !== \"?\") {\n\t\t\t\tprefix = $window.location.pathname + prefix\n\t\t\t\tif (prefix[0] !== \"/\") prefix = \"/\" + prefix\n\t\t\t}\n\t\t}\n\t\t// This seemingly useless `.concat()` speeds up the tests quite a bit,\n\t\t// since the representation is consistently a relatively poorly\n\t\t// optimized cons string.\n\t\tvar path = prefix.concat()\n\t\t\t.replace(/(?:%[a-f89][a-f0-9])+/gim, decodeURIComponentSave)\n\t\t\t.slice(route.prefix.length)\n\t\tvar data = parsePathname(path)\n\n\t\tassign(data.params, $window.history.state)\n\n\t\tfunction reject(e) {\n\t\t\tconsole.error(e)\n\t\t\tsetPath(fallbackRoute, null, {replace: true})\n\t\t}\n\n\t\tloop(0)\n\t\tfunction loop(i) {\n\t\t\t// state === 0: init\n\t\t\t// state === 1: scheduled\n\t\t\t// state === 2: done\n\t\t\tfor (; i < compiled.length; i++) {\n\t\t\t\tif (compiled[i].check(data)) {\n\t\t\t\t\tvar payload = compiled[i].component\n\t\t\t\t\tvar matchedRoute = compiled[i].route\n\t\t\t\t\tvar localComp = payload\n\t\t\t\t\tvar update = lastUpdate = function(comp) {\n\t\t\t\t\t\tif (update !== lastUpdate) return\n\t\t\t\t\t\tif (comp === SKIP) return loop(i + 1)\n\t\t\t\t\t\tcomponent = comp != null && (typeof comp.view === \"function\" || typeof comp === \"function\")? comp : \"div\"\n\t\t\t\t\t\tattrs = data.params, currentPath = path, lastUpdate = null\n\t\t\t\t\t\tcurrentResolver = payload.render ? payload : null\n\t\t\t\t\t\tif (state === 2) mountRedraw.redraw()\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tstate = 2\n\t\t\t\t\t\t\tmountRedraw.redraw.sync()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// There's no understating how much I *wish* I could\n\t\t\t\t\t// use `async`/`await` here...\n\t\t\t\t\tif (payload.view || typeof payload === \"function\") {\n\t\t\t\t\t\tpayload = {}\n\t\t\t\t\t\tupdate(localComp)\n\t\t\t\t\t}\n\t\t\t\t\telse if (payload.onmatch) {\n\t\t\t\t\t\tp.then(function () {\n\t\t\t\t\t\t\treturn payload.onmatch(data.params, path, matchedRoute)\n\t\t\t\t\t\t}).then(update, path === fallbackRoute ? null : reject)\n\t\t\t\t\t}\n\t\t\t\t\telse update(\"div\")\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (path === fallbackRoute) {\n\t\t\t\tthrow new Error(\"Could not resolve default route \" + fallbackRoute + \".\")\n\t\t\t}\n\t\t\tsetPath(fallbackRoute, null, {replace: true})\n\t\t}\n\t}\n\n\t// Set it unconditionally so `m.route.set` and `m.route.Link` both work,\n\t// even if neither `pushState` nor `hashchange` are supported. It's\n\t// cleared if `hashchange` is used, since that makes it automatically\n\t// async.\n\tfunction fireAsync() {\n\t\tif (!scheduled) {\n\t\t\tscheduled = true\n\t\t\t// TODO: just do `mountRedraw.redraw()` here and elide the timer\n\t\t\t// dependency. Note that this will muck with tests a *lot*, so it's\n\t\t\t// not as easy of a change as it sounds.\n\t\t\tcallAsync(resolveRoute)\n\t\t}\n\t}\n\n\tfunction setPath(path, data, options) {\n\t\tpath = buildPathname(path, data)\n\t\tif (ready) {\n\t\t\tfireAsync()\n\t\t\tvar state = options ? options.state : null\n\t\t\tvar title = options ? options.title : null\n\t\t\tif (options && options.replace) $window.history.replaceState(state, title, route.prefix + path)\n\t\t\telse $window.history.pushState(state, title, route.prefix + path)\n\t\t}\n\t\telse {\n\t\t\t$window.location.href = route.prefix + path\n\t\t}\n\t}\n\n\tfunction route(root, defaultRoute, routes) {\n\t\tif (!root) throw new TypeError(\"DOM element being rendered to does not exist.\")\n\n\t\tcompiled = Object.keys(routes).map(function(route) {\n\t\t\tif (route[0] !== \"/\") throw new SyntaxError(\"Routes must start with a '/'.\")\n\t\t\tif ((/:([^\\/\\.-]+)(\\.{3})?:/).test(route)) {\n\t\t\t\tthrow new SyntaxError(\"Route parameter names must be separated with either '/', '.', or '-'.\")\n\t\t\t}\n\t\t\treturn {\n\t\t\t\troute: route,\n\t\t\t\tcomponent: routes[route],\n\t\t\t\tcheck: compileTemplate(route),\n\t\t\t}\n\t\t})\n\t\tfallbackRoute = defaultRoute\n\t\tif (defaultRoute != null) {\n\t\t\tvar defaultData = parsePathname(defaultRoute)\n\n\t\t\tif (!compiled.some(function (i) { return i.check(defaultData) })) {\n\t\t\t\tthrow new ReferenceError(\"Default route doesn't match any known routes.\")\n\t\t\t}\n\t\t}\n\n\t\tif (typeof $window.history.pushState === \"function\") {\n\t\t\t$window.addEventListener(\"popstate\", fireAsync, false)\n\t\t} else if (route.prefix[0] === \"#\") {\n\t\t\t$window.addEventListener(\"hashchange\", resolveRoute, false)\n\t\t}\n\n\t\tready = true\n\t\tmountRedraw.mount(root, RouterRoot)\n\t\tresolveRoute()\n\t}\n\troute.set = function(path, data, options) {\n\t\tif (lastUpdate != null) {\n\t\t\toptions = options || {}\n\t\t\toptions.replace = true\n\t\t}\n\t\tlastUpdate = null\n\t\tsetPath(path, data, options)\n\t}\n\troute.get = function() {return currentPath}\n\troute.prefix = \"#!\"\n\troute.Link = {\n\t\tview: function(vnode) {\n\t\t\t// Omit the used parameters from the rendered element - they are\n\t\t\t// internal. Also, censor the various lifecycle methods.\n\t\t\t//\n\t\t\t// We don't strip the other parameters because for convenience we\n\t\t\t// let them be specified in the selector as well.\n\t\t\tvar child = m(\n\t\t\t\tvnode.attrs.selector || \"a\",\n\t\t\t\tcensor(vnode.attrs, [\"options\", \"params\", \"selector\", \"onclick\"]),\n\t\t\t\tvnode.children\n\t\t\t)\n\t\t\tvar options, onclick, href\n\n\t\t\t// Let's provide a *right* way to disable a route link, rather than\n\t\t\t// letting people screw up accessibility on accident.\n\t\t\t//\n\t\t\t// The attribute is coerced so users don't get surprised over\n\t\t\t// `disabled: 0` resulting in a button that's somehow routable\n\t\t\t// despite being visibly disabled.\n\t\t\tif (child.attrs.disabled = Boolean(child.attrs.disabled)) {\n\t\t\t\tchild.attrs.href = null\n\t\t\t\tchild.attrs[\"aria-disabled\"] = \"true\"\n\t\t\t\t// If you *really* do want add `onclick` on a disabled link, use\n\t\t\t\t// an `oncreate` hook to add it.\n\t\t\t} else {\n\t\t\t\toptions = vnode.attrs.options\n\t\t\t\tonclick = vnode.attrs.onclick\n\t\t\t\t// Easier to build it now to keep it isomorphic.\n\t\t\t\thref = buildPathname(child.attrs.href, vnode.attrs.params)\n\t\t\t\tchild.attrs.href = route.prefix + href\n\t\t\t\tchild.attrs.onclick = function(e) {\n\t\t\t\t\tvar result\n\t\t\t\t\tif (typeof onclick === \"function\") {\n\t\t\t\t\t\tresult = onclick.call(e.currentTarget, e)\n\t\t\t\t\t} else if (onclick == null || typeof onclick !== \"object\") {\n\t\t\t\t\t\t// do nothing\n\t\t\t\t\t} else if (typeof onclick.handleEvent === \"function\") {\n\t\t\t\t\t\tonclick.handleEvent(e)\n\t\t\t\t\t}\n\n\t\t\t\t\t// Adapted from React Router's implementation:\n\t\t\t\t\t// https://github.com/ReactTraining/react-router/blob/520a0acd48ae1b066eb0b07d6d4d1790a1d02482/packages/react-router-dom/modules/Link.js\n\t\t\t\t\t//\n\t\t\t\t\t// Try to be flexible and intuitive in how we handle links.\n\t\t\t\t\t// Fun fact: links aren't as obvious to get right as you\n\t\t\t\t\t// would expect. There's a lot more valid ways to click a\n\t\t\t\t\t// link than this, and one might want to not simply click a\n\t\t\t\t\t// link, but right click or command-click it to copy the\n\t\t\t\t\t// link target, etc. Nope, this isn't just for blind people.\n\t\t\t\t\tif (\n\t\t\t\t\t\t// Skip if `onclick` prevented default\n\t\t\t\t\t\tresult !== false && !e.defaultPrevented &&\n\t\t\t\t\t\t// Ignore everything but left clicks\n\t\t\t\t\t\t(e.button === 0 || e.which === 0 || e.which === 1) &&\n\t\t\t\t\t\t// Let the browser handle `target=_blank`, etc.\n\t\t\t\t\t\t(!e.currentTarget.target || e.currentTarget.target === \"_self\") &&\n\t\t\t\t\t\t// No modifier keys\n\t\t\t\t\t\t!e.ctrlKey && !e.metaKey && !e.shiftKey && !e.altKey\n\t\t\t\t\t) {\n\t\t\t\t\t\te.preventDefault()\n\t\t\t\t\t\te.redraw = false\n\t\t\t\t\t\troute.set(href, null, options)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn child\n\t\t},\n\t}\n\troute.param = function(key) {\n\t\treturn attrs && key != null ? attrs[key] : attrs\n\t}\n\n\treturn route\n}\n", "\"use strict\"\n\nvar mountRedraw = require(\"./mount-redraw\")\n\nmodule.exports = require(\"./api/router\")(typeof window !== \"undefined\" ? window : null, mountRedraw)\n", "\"use strict\"\n\nvar hyperscript = require(\"./hyperscript\")\nvar request = require(\"./request\")\nvar mountRedraw = require(\"./mount-redraw\")\nvar domFor = require(\"./render/domFor\")\n\nvar m = function m() { return hyperscript.apply(this, arguments) }\nm.m = hyperscript\nm.trust = hyperscript.trust\nm.fragment = hyperscript.fragment\nm.Fragment = \"[\"\nm.mount = mountRedraw.mount\nm.route = require(\"./route\")\nm.render = require(\"./render\")\nm.redraw = mountRedraw.redraw\nm.request = request.request\nm.parseQueryString = require(\"./querystring/parse\")\nm.buildQueryString = require(\"./querystring/build\")\nm.parsePathname = require(\"./pathname/parse\")\nm.buildPathname = require(\"./pathname/build\")\nm.vnode = require(\"./render/vnode\")\nm.censor = require(\"./util/censor\")\nm.domFor = domFor.domFor\n\nmodule.exports = m\n", "const urlAlphabet =\r\n\t\"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict\";\r\n\r\nexport const random = (bytes: number): Uint8Array => {\r\n\treturn crypto.getRandomValues(new Uint8Array(bytes));\r\n};\r\n\r\nexport const customRandom = (\r\n\talphabet: string,\r\n\tdefaultSize: number,\r\n\tgetRandom: (bytes: number) => Uint8Array,\r\n): (() => string) => {\r\n\t// First, a bitmask is necessary to generate the ID. The bitmask makes bytes\r\n\t// values closer to the alphabet size. The bitmask calculates the closest\r\n\t// `2^31 - 1` number, which exceeds the alphabet size.\r\n\t// For example, the bitmask for the alphabet size 30 is 31 (00011111).\r\n\t// `Math.clz32` is not used, because it is not available in browsers.\r\n\tconst mask = (2 << (Math.log(alphabet.length - 1) / Math.LN2)) - 1;\r\n\t// Though, the bitmask solution is not perfect since the bytes exceeding\r\n\t// the alphabet size are refused. Therefore, to reliably generate the ID,\r\n\t// the random bytes redundancy has to be satisfied.\r\n\r\n\t// Note: every hardware random generator call is performance expensive,\r\n\t// because the system call for entropy collection takes a lot of time.\r\n\t// So, to avoid additional system calls, extra bytes are requested in advance.\r\n\r\n\t// Next, a step determines how many random bytes to generate.\r\n\t// The number of random bytes gets decided upon the ID size, mask,\r\n\t// alphabet size, and magic number 1.6 (using 1.6 peaks at performance\r\n\t// according to benchmarks).\r\n\r\n\t// `-~f => Math.ceil(f)` if f is a float\r\n\t// `-~i => i + 1` if i is an integer\r\n\tconst step = -~((1.6 * mask * defaultSize) / alphabet.length);\r\n\r\n\treturn (size = defaultSize) => {\r\n\t\tlet id = \"\";\r\n\t\twhile (true) {\r\n\t\t\tconst bytes = getRandom(step);\r\n\t\t\t// A compact alternative for `for (var i = 0; i < step; i++)`.\r\n\t\t\tlet j = step;\r\n\t\t\twhile (j--) {\r\n\t\t\t\t// Adding `|| ''` refuses a random byte that exceeds the alphabet size.\r\n\t\t\t\tid += alphabet[bytes[j] & mask] || \"\";\r\n\t\t\t\tif (id.length === size) return id;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n};\r\n\r\nexport const customAlphabet = (alphabet: string, size = 21): (() => string) => {\r\n\treturn customRandom(alphabet, size, random);\r\n};\r\n\r\nexport const nanoid = (size = 21): string => {\r\n\tlet id = \"\";\r\n\tconst bytes = crypto.getRandomValues(new Uint8Array(size));\r\n\t// biome-ignore lint/style/noParameterAssign: <explanation>\r\n\twhile (size--) {\r\n\t\t// Using the bitwise AND operator to \"cap\" the value of\r\n\t\t// the random byte from 255 to 63, in that way we can make sure\r\n\t\t// that the value will be a valid index for the \"chars\" string.\r\n\t\tid += urlAlphabet[bytes[size] & 63];\r\n\t}\r\n\treturn id;\r\n};\r\n", "import m from \"./mithril\";\r\nimport { nanoid } from \"./nanoid\";\r\n\r\nenum Type {\r\n\tInfo = 0,\r\n\tSuccess = 1,\r\n\tWarning = 2,\r\n\tDanger = 3,\r\n}\r\n\r\ninterface Toast {\r\n\tid: string;\r\n\ttype: Type;\r\n\ttext: string;\r\n\ttimeout: number;\r\n}\r\n\r\ninterface State {\r\n\tlist: Toast[];\r\n\tdestroy: (toast: Toast) => void;\r\n}\r\n\r\nconst state: State = {\r\n\tlist: [],\r\n\tdestroy: (toast: Toast) => {\r\n\t\tconst index = state.list.findIndex((entry) => entry.id === toast.id);\r\n\t\tstate.list.slice(index, 1);\r\n\t},\r\n};\r\n\r\nexport const addSuccess = (text: string, timeout = 3000) => {\r\n\tstate.list.push({ id: nanoid(), type: Type.Success, text, timeout });\r\n};\r\n\r\nexport const addInfo = (text: string, timeout = 3000) => {\r\n\tstate.list.push({ id: nanoid(), type: Type.Info, text, timeout });\r\n};\r\n\r\nexport const addWarning = (text: string, timeout = 3000) => {\r\n\tstate.list.push({ id: nanoid(), type: Type.Warning, text, timeout });\r\n};\r\n\r\nexport const addDanger = (text: string, timeout = 3000) => {\r\n\tstate.list.push({ id: nanoid(), type: Type.Danger, text, timeout });\r\n};\r\n\r\nexport const Drawer: m.ClosureComponent = () => {\r\n\treturn {\r\n\t\tview: () => {\r\n\t\t\treturn m(\r\n\t\t\t\t\"div\",\r\n\t\t\t\tstate.list.map((toast) => {\r\n\t\t\t\t\treturn m(\"div\", { key: toast.id }, m(Bread, { toast: toast }));\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t},\r\n\t};\r\n};\r\n\r\ninterface BreadAttrs extends m.Attributes {\r\n\ttoast: Toast;\r\n}\r\n\r\nconst Bread: m.ClosureComponent<BreadAttrs> = () => {\r\n\treturn {\r\n\t\toninit: (vnode) => {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tstate.destroy(vnode.attrs.toast);\r\n\t\t\t}, vnode.attrs.toast.timeout);\r\n\t\t},\r\n\t\tonbeforeremove: (vnode) => {\r\n\t\t\tvnode.dom.classList.add(\"\");\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tstate.destroy(vnode.attrs.toast);\r\n\t\t\t\tm.redraw();\r\n\t\t\t}, 300);\r\n\t\t},\r\n\t\tview: (vnode) => {\r\n\t\t\treturn m(\"div\");\r\n\t\t},\r\n\t};\r\n};\r\n", "import type m from \"../libraries/mithril\";\r\n\r\nexport const AddBulk: m.ClosureComponent = (vnode) => {\r\n\treturn {\r\n\t\tview: (vnode) => {},\r\n\t};\r\n};\r\n\r\nexport default AddBulk;\r\n", "import type m from \"../libraries/mithril\";\r\n\r\nexport const AddScan: m.ClosureComponent = (vnode) => {\r\n\treturn {\r\n\t\tview: (vnode) => {},\r\n\t};\r\n};\r\n\r\nexport default AddScan;\r\n", "import type m from \"../libraries/mithril\";\r\n\r\nexport const AddSearch: m.ClosureComponent = (vnode) => {\r\n\treturn {\r\n\t\tview: (vnode) => {},\r\n\t};\r\n};\r\n\r\nexport default AddSearch;\r\n", "import m from \"../mithril\";\r\n\r\ntype Sizes = \"small\" | \"medium\" | \"large\";\r\n\r\nexport interface FabAttrs {\r\n\tsize?: Sizes;\r\n}\r\n\r\nconst SIZE: { [KEY in Sizes]: string } = {\r\n\tsmall: \"-small\",\r\n\tmedium: \"-medium\",\r\n\tlarge: \"-large\",\r\n};\r\n\r\nexport const Fab: m.ClosureComponent<\r\n\t(FabAttrs & m.Attributes) | undefined\r\n> = () => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\tconst attrs = vnode.attrs || { size: \"medium\" };\r\n\r\n\t\t\tconst size = SIZE[attrs.size || \"medium\"];\r\n\r\n\t\t\treturn m(\"div\", { class: `a-fab ${size}` }, vnode.children);\r\n\t\t},\r\n\t};\r\n};\r\n", "import m from \"../../libraries/mithril\";\r\n\r\nexport interface IconProps {\r\n\twidth?: string;\r\n\theight?: string;\r\n\tfill?: string;\r\n}\r\n\r\nconst Wrapper: m.ClosureComponent<IconProps | undefined> = (vnode) => {\r\n\tconst props = vnode.attrs || {};\r\n\r\n\tconst width = props.width || \"24px\";\r\n\tconst height = props.height || \"24px\";\r\n\tconst fill = props.fill || \"currentColor\";\r\n\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\treturn m(\r\n\t\t\t\t\"svg\",\r\n\t\t\t\t{\r\n\t\t\t\t\txmlns: \"http://www.w3.org/2000/svg\",\r\n\t\t\t\t\tviewBox: \"0 -960 960 960\",\r\n\t\t\t\t\twidth: width,\r\n\t\t\t\t\theight: height,\r\n\t\t\t\t\tfill: fill,\r\n\t\t\t\t},\r\n\t\t\t\tvnode.children,\r\n\t\t\t);\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const Add: m.ClosureComponent<IconProps | undefined> = () => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\treturn m(\r\n\t\t\t\tWrapper,\r\n\t\t\t\t{ ...vnode.attrs },\r\n\t\t\t\tm(\"path\", {\r\n\t\t\t\t\td: \"M440-440H200v-80h240v-240h80v240h240v80H520v240h-80v-240Z\",\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const Book: m.ClosureComponent<IconProps | undefined> = () => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\treturn m(\r\n\t\t\t\tWrapper,\r\n\t\t\t\t{ ...vnode.attrs },\r\n\t\t\t\tm(\"path\", {\r\n\t\t\t\t\td: \"M240-80q-33 0-56.5-23.5T160-160v-640q0-33 23.5-56.5T240-880h480q33 0 56.5 23.5T800-800v640q0 33-23.5 56.5T720-80H240Zm0-80h480v-640h-80v280l-100-60-100 60v-280H240v640Zm0 0v-640 640Zm200-360 100-60 100 60-100-60-100 60Z\",\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const Shelf: m.ClosureComponent<IconProps | undefined> = () => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\treturn m(\r\n\t\t\t\tWrapper,\r\n\t\t\t\t{ ...vnode.attrs },\r\n\t\t\t\tm(\"path\", {\r\n\t\t\t\t\td: \"M120-40v-880h80v80h560v-80h80v880h-80v-80H200v80h-80Zm80-480h80v-160h240v160h240v-240H200v240Zm0 320h240v-160h240v160h80v-240H200v240Zm160-320h80v-80h-80v80Zm160 320h80v-80h-80v80ZM360-520h80-80Zm160 320h80-80Z\",\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const Tag: m.ClosureComponent<IconProps | undefined> = () => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\treturn m(\r\n\t\t\t\tWrapper,\r\n\t\t\t\t{ ...vnode.attrs },\r\n\t\t\t\tm(\"path\", {\r\n\t\t\t\t\td: \"m240-160 40-160H120l20-80h160l40-160H180l20-80h160l40-160h80l-40 160h160l40-160h80l-40 160h160l-20 80H660l-40 160h160l-20 80H600l-40 160h-80l40-160H360l-40 160h-80Zm140-240h160l40-160H420l-40 160Z\",\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const Wishlist: m.ClosureComponent<IconProps | undefined> = () => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\treturn m(\r\n\t\t\t\tWrapper,\r\n\t\t\t\t{ ...vnode.attrs },\r\n\t\t\t\tm(\"path\", {\r\n\t\t\t\t\td: \"M446-80q-15 0-30-6t-27-18L103-390q-12-12-17.5-26.5T80-446q0-15 5.5-30t17.5-27l352-353q11-11 26-17.5t31-6.5h287q33 0 56.5 23.5T879-800v287q0 16-6 30.5T856-457L503-104q-12 12-27 18t-30 6Zm0-80 353-354v-286H513L160-446l286 286Zm253-480q25 0 42.5-17.5T759-700q0-25-17.5-42.5T699-760q-25 0-42.5 17.5T639-700q0 25 17.5 42.5T699-640ZM480-480Z\",\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const Settings: m.ClosureComponent<IconProps | undefined> = () => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\treturn m(\r\n\t\t\t\tWrapper,\r\n\t\t\t\t{ ...vnode.attrs },\r\n\t\t\t\tm(\"path\", {\r\n\t\t\t\t\td: \"m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-2 13.5l103 78-110 190-118-50q-11 8-23 15t-24 12L590-80H370Zm70-80h79l14-106q31-8 57.5-23.5T639-327l99 41 39-68-86-65q5-14 7-29.5t2-31.5q0-16-2-31.5t-7-29.5l86-65-39-68-99 42q-22-23-48.5-38.5T533-694l-13-106h-79l-14 106q-31 8-57.5 23.5T321-633l-99-41-39 68 86 64q-5 15-7 30t-2 32q0 16 2 31t7 30l-86 65 39 68 99-42q22 23 48.5 38.5T427-266l13 106Zm42-180q58 0 99-41t41-99q0-58-41-99t-99-41q-59 0-99.5 41T342-480q0 58 40.5 99t99.5 41Zm-2-140Z\",\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t},\r\n\t};\r\n};\r\n", "import m from \"../../libraries/mithril\";\r\n\r\ntype Colors = \"default\" | \"error\" | \"success\";\r\ntype Kinds = \"default\" | \"primary\" | \"link\";\r\ntype Sizes = \"default\" | \"block\" | \"large\" | \"small\";\r\ntype States = \"default\" | \"active\" | \"disabled\" | \"loading\";\r\ntype Types = \"default\" | \"action\" | \"circle\";\r\n\r\nexport interface ButtonProps {\r\n\tclass?: string;\r\n\r\n\tcolor?: Colors;\r\n\tkind?: Kinds;\r\n\tsize?: Sizes;\r\n\tstate?: States;\r\n\ttype?: Types;\r\n}\r\n\r\nconst COLOR: { [KEY in Colors]: string } = {\r\n\tdefault: \"\",\r\n\terror: \"btn-error\",\r\n\tsuccess: \"btn-success\",\r\n};\r\n\r\nconst KIND: { [KEY in Kinds]: string } = {\r\n\tdefault: \"\",\r\n\tprimary: \"bg-green-600 active:bg-green-700 text-white\",\r\n\tlink: \"btn-link\",\r\n};\r\n\r\nconst SIZE: { [KEY in Sizes]: string } = {\r\n\tdefault: \"\",\r\n\tblock: \"btn-block\",\r\n\tlarge: \"h-12 min-w-12\",\r\n\tsmall: \"btn-sm\",\r\n};\r\n\r\nconst STATE: { [KEY in States]: string } = {\r\n\tdefault: \"\",\r\n\tactive: \"active\",\r\n\tdisabled: \"disabled\",\r\n\tloading: \"loading\",\r\n};\r\n\r\nconst TYPE: { [KEY in Types]: string } = {\r\n\tdefault: \"\",\r\n\taction: \"\",\r\n\tcircle: \"rounded-full\",\r\n};\r\n\r\nexport const Button: m.ClosureComponent<ButtonProps | undefined> = (vnode) => {\r\n\tconst props = vnode.attrs;\r\n\r\n\tconst className = props?.class || \"\";\r\n\r\n\tconst color = COLOR[props?.color || \"default\"];\r\n\tconst kind = KIND[props?.kind || \"default\"];\r\n\tconst size = SIZE[props?.size || \"default\"];\r\n\tconst state = STATE[props?.state || \"default\"];\r\n\tconst type = TYPE[props?.type || \"default\"];\r\n\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\treturn m(\r\n\t\t\t\t\"button\",\r\n\t\t\t\t{\r\n\t\t\t\t\tclass: `flex items-center justify-center ${color} ${kind} ${size} ${state} ${type} ${className}`,\r\n\t\t\t\t},\r\n\t\t\t\tvnode.children,\r\n\t\t\t);\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default Button;\r\n", "import m from \"../libraries/mithril\";\r\nimport { Fab } from \"../libraries/mithril-material-3/fab\";\r\n\r\nimport { Add } from \"../components/base/icons\";\r\nimport Button from \"../components/base/button\";\r\n\r\nexport const LibraryBooks: m.ClosureComponent = (vnode) => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\treturn [\r\n\t\t\t\tm(Fab, [\r\n\t\t\t\t\tm(Button, { kind: \"primary\", size: \"large\", type: \"circle\" }, m(Add)),\r\n\t\t\t\t]),\r\n\t\t\t\tm(\"h1\", \"Books!\"),\r\n\t\t\t];\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default LibraryBooks;\r\n", "type OptionInner<T> = { some: true; value: T } | { some: false };\r\n\r\ninterface OptionMatcher<T, O> {\r\n\tsome(value: T): O;\r\n\tnone(): O;\r\n}\r\n\r\nexport class Option<T> {\r\n\tprivate readonly inner: OptionInner<T>;\r\n\r\n\tprivate constructor(inner: OptionInner<T>) {\r\n\t\tthis.inner = inner;\r\n\t}\r\n\r\n\tpublic static Some<T>(value: T): Option<T> {\r\n\t\treturn new Option<T>({ some: true, value: value });\r\n\t}\r\n\r\n\tpublic static None<T, E>(): Option<T> {\r\n\t\treturn new Option<T>({ some: false });\r\n\t}\r\n\r\n\tpublic match<O>(matcher: OptionMatcher<T, O>): O {\r\n\t\tif (this.inner.some) {\r\n\t\t\treturn matcher.some(this.inner.value);\r\n\t\t}\r\n\t\treturn matcher.none();\r\n\t}\r\n\r\n\tpublic map<O>(fn: (_: T) => O): Option<O> {\r\n\t\treturn this.match({\r\n\t\t\tsome: (t) => Option.Some(fn(t)),\r\n\t\t\tnone: () => Option.None(),\r\n\t\t});\r\n\t}\r\n\r\n\tpublic andThen<O>(fn: (_: T) => Option<O>): Option<O> {\r\n\t\treturn this.match({\r\n\t\t\tsome: (t) => fn(t),\r\n\t\t\tnone: () => Option.None(),\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport const Some = <T>(value: T): Option<T> => {\r\n\treturn Option.Some(value);\r\n};\r\n\r\nexport const None = <T>(): Option<T> => {\r\n\treturn Option.None();\r\n};\r\n\r\ntype ResultInner<T, E> = { ok: true; value: T } | { ok: false; error: E };\r\n\r\ninterface ResultMatcher<T, E, O> {\r\n\tok(value: T): O;\r\n\terr(error: E): O;\r\n}\r\n\r\nexport class Result<T, E = Error> {\r\n\tprivate readonly inner: ResultInner<T, E>;\r\n\r\n\tprivate constructor(inner: ResultInner<T, E>) {\r\n\t\tthis.inner = inner;\r\n\t}\r\n\r\n\tpublic static Ok<T, E>(value: T): Result<T, E> {\r\n\t\treturn new Result<T, E>({ ok: true, value: value });\r\n\t}\r\n\r\n\tpublic static Err<T, E>(error: E): Result<T, E> {\r\n\t\treturn new Result<T, E>({ ok: false, error: error });\r\n\t}\r\n\r\n\tpublic isOk(): boolean {\r\n\t\treturn this.inner.ok;\r\n\t}\r\n\r\n\tpublic match<O>(matcher: ResultMatcher<T, E, O>): O {\r\n\t\tif (this.inner.ok) {\r\n\t\t\treturn matcher.ok(this.inner.value);\r\n\t\t}\r\n\t\treturn matcher.err(this.inner.error);\r\n\t}\r\n\r\n\tpublic map<O>(fn: (_: T) => O): Result<O, E> {\r\n\t\treturn this.match({\r\n\t\t\tok: (t) => Result.Ok(fn(t)),\r\n\t\t\terr: (e) => Result.Err(e),\r\n\t\t});\r\n\t}\r\n\r\n\tpublic mapErr<O>(fn: (_: E) => O): Result<T, O> {\r\n\t\treturn this.match({\r\n\t\t\tok: (t) => Result.Ok(t),\r\n\t\t\terr: (e) => Result.Err(fn(e)),\r\n\t\t});\r\n\t}\r\n\r\n\tpublic andThen<O>(fn: (_: T) => Result<O, E>): Result<O, E> {\r\n\t\treturn this.match({\r\n\t\t\tok: (t) => fn(t),\r\n\t\t\terr: (e) => Result.Err(e),\r\n\t\t});\r\n\t}\r\n\r\n\tpublic asOk(): Option<T> {\r\n\t\treturn this.match({\r\n\t\t\tok: (t) => Option.Some(t),\r\n\t\t\terr: (_) => Option.None(),\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport const Ok = <T, E = Error>(value: T): Result<T, E> => {\r\n\treturn Result.Ok(value);\r\n};\r\n\r\nexport const Err = <T, E = Error>(error: E): Result<T, E> => {\r\n\treturn Result.Err(error);\r\n};\r\n\r\nexport function to<\r\n\t// biome-ignore lint/suspicious/noExplicitAny: <explanation>\r\n\tT extends { readonly __tag: symbol; value: any } = {\r\n\t\treadonly __tag: unique symbol;\r\n\t\tvalue: never;\r\n\t},\r\n>(value: T[\"value\"]): T {\r\n\t// biome-ignore lint/suspicious/noExplicitAny: <explanation>\r\n\treturn value as any as T;\r\n}\r\n\r\nexport function from<\r\n\t// biome-ignore lint/suspicious/noExplicitAny: <explanation>\r\n\tT extends { readonly __tag: symbol; value: any },\r\n>(value: T): T[\"value\"] {\r\n\t// biome-ignore lint/suspicious/noExplicitAny: <explanation>\r\n\treturn value as any as T[\"value\"];\r\n}\r\n\r\nexport function arrayShuffle<T>(array: T[], seed: number): T[] {\r\n\tlet currentIndex = array.length;\r\n\tlet temporaryValue: T;\r\n\tlet randomIndex: number;\r\n\r\n\tconst random = (seed: number) => {\r\n\t\t// biome-ignore lint/style/noParameterAssign: <explanation>\r\n\t\tconst x = Math.sin(seed++) * 10000;\r\n\t\treturn x - Math.floor(x);\r\n\t};\r\n\r\n\t// While there remain elements to shuffle...\r\n\twhile (0 !== currentIndex) {\r\n\t\t// Pick a remaining element...\r\n\t\trandomIndex = Math.floor(random(seed) * currentIndex--);\r\n\r\n\t\t// And swap it with the current element.\r\n\t\ttemporaryValue = array[currentIndex];\r\n\t\tarray[currentIndex] = array[randomIndex];\r\n\t\tarray[randomIndex] = temporaryValue;\r\n\r\n\t\t// biome-ignore lint/style/noParameterAssign: <explanation>\r\n\t\t++seed;\r\n\t}\r\n\r\n\treturn array;\r\n}\r\n", "import m from \"../../../libraries/mithril\";\r\n\r\nexport interface IconProps {\r\n\twidth?: string;\r\n\theight?: string;\r\n\tfill?: string;\r\n\tfilled?: boolean;\r\n}\r\n\r\nexport const IconBase: m.ClosureComponent<IconProps | undefined> = (vnode) => {\r\n\tconst attrs = vnode.attrs || {};\r\n\r\n\tconst width = attrs.width || \"24px\";\r\n\tconst height = attrs.height || \"24px\";\r\n\tconst fill = attrs.fill || \"currentColor\";\r\n\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\treturn m(\r\n\t\t\t\t\"svg\",\r\n\t\t\t\t{\r\n\t\t\t\t\txmlns: \"http://www.w3.org/2000/svg\",\r\n\t\t\t\t\tviewBox: \"0 -960 960 960\",\r\n\t\t\t\t\twidth: width,\r\n\t\t\t\t\theight: height,\r\n\t\t\t\t\tfill: fill,\r\n\t\t\t\t},\r\n\t\t\t\tvnode.children,\r\n\t\t\t);\r\n\t\t},\r\n\t};\r\n};\r\n", "import m from \"../../../libraries/mithril\";\r\n\r\nimport { IconBase, type IconProps } from \"./base\";\r\n\r\nexport const MoreVert: m.ClosureComponent<IconProps | undefined> = () => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\treturn m(\r\n\t\t\t\tIconBase,\r\n\t\t\t\t{ ...vnode.attrs },\r\n\t\t\t\tm(\"path\", {\r\n\t\t\t\t\td: \"M480-160q-33 0-56.5-23.5T400-240q0-33 23.5-56.5T480-320q33 0 56.5 23.5T560-240q0 33-23.5 56.5T480-160Zm0-240q-33 0-56.5-23.5T400-480q0-33 23.5-56.5T480-560q33 0 56.5 23.5T560-480q0 33-23.5 56.5T480-400Zm0-240q-33 0-56.5-23.5T400-720q0-33 23.5-56.5T480-800q33 0 56.5 23.5T560-720q0 33-23.5 56.5T480-640Z\",\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t},\r\n\t};\r\n};\r\n", "import m from \"../libraries/mithril\";\r\nimport { MoreVert } from \"../libraries/mithril-material-3/icon/more-vert\";\r\n\r\nexport interface HeaderAttrs extends m.Attributes {\r\n\ttitle: string;\r\n\tsubtitle?: string;\r\n}\r\n\r\nexport const Header: m.ClosureComponent<HeaderAttrs> = () => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\tconst attrs = vnode.attrs;\r\n\r\n\t\t\treturn m(\"div\", { class: \"flex items-center\" }, [\r\n\t\t\t\tm(\"span\", { class: \"flex flex-grow items-center\" }, [\r\n\t\t\t\t\tm(\"h2\", { class: \"text-2xl m-2 text-on-surface\" }, attrs.title),\r\n\t\t\t\t\tattrs.subtitle\r\n\t\t\t\t\t\t? m(\"h2\", { class: \"text-on-surface-variant\" }, attrs.subtitle)\r\n\t\t\t\t\t\t: [],\r\n\t\t\t\t]),\r\n\t\t\t\tm(MoreVert),\r\n\t\t\t]);\r\n\t\t},\r\n\t};\r\n};\r\n", "import m from \"../libraries/mithril\";\r\n\r\nimport type { Book } from \"../models/database\";\r\nimport { from } from \"../utils\";\r\n\r\nexport interface BookCoverProps {\r\n\tentry: Book;\r\n}\r\n\r\nexport const BookCover: m.ClosureComponent<BookCoverProps> = () => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\tconst attrs = vnode.attrs;\r\n\r\n\t\t\treturn m(\r\n\t\t\t\t\"div\",\r\n\t\t\t\t{\r\n\t\t\t\t\tkey: from(attrs.entry.id),\r\n\t\t\t\t\tclass: \"bg-surface-bright rounded h-64 w-36 flex content-center\",\r\n\t\t\t\t},\r\n\t\t\t\t[\r\n\t\t\t\t\tm(\"img\", {\r\n\t\t\t\t\t\tclass: \"aspect-[9/16] max-h-64 max-w-36 object-contain my-auto\",\r\n\t\t\t\t\t\tsrc: attrs.entry.cover,\r\n\t\t\t\t\t}),\r\n\t\t\t\t],\r\n\t\t\t);\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default BookCover;\r\n", "import m from \"../libraries/mithril\";\r\nimport type { ApiResponse } from \"../models/api\";\r\nimport type { Bookshelf, BookshelfId, UserBook } from \"../models/database\";\r\nimport { Err, from, Ok, type Result } from \"../utils\";\r\n\r\nconst responseToResult = <T>(response: ApiResponse<T>): Result<T> => {\r\n\tif (response.code === undefined) {\r\n\t\treturn Ok(response.data);\r\n\t}\r\n\r\n\treturn Err(new Error(response.message));\r\n};\r\n\r\nexport const getBookshelves = async (): Promise<Result<Bookshelf[]>> => {\r\n\treturn responseToResult(\r\n\t\tawait m.request<ApiResponse<Bookshelf[]>>(\"/api/bookshelves\", {\r\n\t\t\tmethod: \"GET\",\r\n\t\t}),\r\n\t);\r\n};\r\n\r\nexport const getBooks = async (\r\n\tid: BookshelfId,\r\n): Promise<Result<UserBook[]>> => {\r\n\treturn responseToResult(\r\n\t\tawait m.request<ApiResponse<UserBook[]>>(\"/api/bookshelves/:id\", {\r\n\t\t\tparams: {\r\n\t\t\t\tid: from(id),\r\n\t\t\t},\r\n\t\t\tmethod: \"GET\",\r\n\t\t}),\r\n\t);\r\n};\r\n", "import m from \"../libraries/mithril\";\r\n\r\nimport { Header } from \"./header\";\r\nimport { BookCover } from \"./bookcover\";\r\n\r\nimport { getBooks } from \"../database/client\";\r\nimport type { UserBook, Bookshelf } from \"../models/database\";\r\nimport { Err, from, type Result } from \"../utils\";\r\n\r\nexport interface BookshelfEntryProps {\r\n\tentry: Bookshelf;\r\n}\r\n\r\nexport const BookshelfEntry: m.ClosureComponent<BookshelfEntryProps> = () => {\r\n\tlet books: Result<UserBook[]> = Err(new Error(\"book cover didn't load\"));\r\n\r\n\treturn {\r\n\t\toninit: async (vnode) => {\r\n\t\t\tconst attrs = vnode.attrs;\r\n\r\n\t\t\tbooks = await getBooks(attrs.entry.id);\r\n\t\t},\r\n\t\tview: (vnode) => {\r\n\t\t\tconst attrs = vnode.attrs;\r\n\r\n\t\t\treturn books.match({\r\n\t\t\t\tok: (books) => {\r\n\t\t\t\t\treturn m(\"div\", { key: from(attrs.entry.id) }, [\r\n\t\t\t\t\t\tm(Header, { title: attrs.entry.name }),\r\n\t\t\t\t\t\tm(\"div\", { class: \"flex flex-row gap-3.5 overflow-x-scroll\" }, [\r\n\t\t\t\t\t\t\tbooks.map((book) => {\r\n\t\t\t\t\t\t\t\treturn m(BookCover, { entry: book.book });\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t]),\r\n\t\t\t\t\t]);\r\n\t\t\t\t},\r\n\t\t\t\terr: (_) => {\r\n\t\t\t\t\treturn m(\"h1\", \"Error!\");\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default BookshelfEntry;\r\n", "interface State {\r\n    serviceWorker: boolean;\r\n    settings: Settings;\r\n}\r\n\r\ninterface Settings {\r\n    camera: CameraSettings;\r\n    database: DatabaseSettings;\r\n    search: SearchSettings;\r\n}\r\n\r\ninterface CameraSettings {\r\n    list: boolean[];\r\n    selection: boolean | null;\r\n}\r\n\r\n// biome-ignore lint/suspicious/noEmptyInterface: There until dynamic settings are added\r\ninterface DatabaseSettings {\r\n}\r\n\r\ninterface SearchSettings {\r\n    provider: \"bookbrainz\" | \"google\" | \"isbndb\" | \"openlibrary\" | \"worldcat\";\r\n    worldcatToken: string | null;\r\n}\r\n\r\nexport const state: State = {\r\n    serviceWorker: false,\r\n    settings: {\r\n        camera: {\r\n            list: [],\r\n            selection: null,\r\n        },\r\n        database: {},\r\n        search: {\r\n            provider: \"openlibrary\",\r\n            worldcatToken: null,\r\n        },\r\n    },\r\n};\r\n\r\nexport const loadState = () => {};\r\n\r\nexport const saveState = () => {};\r\n", "import m from \"../libraries/mithril\";\r\nimport { Fab } from \"../libraries/mithril-material-3/fab\";\r\n\r\nimport type { Bookshelf } from \"../models/database\";\r\nimport { Err, type Result } from \"../utils\";\r\n\r\nimport { Add } from \"../components/base/icons\";\r\nimport Button from \"../components/base/button\";\r\nimport BookshelfEntry from \"../components/bookshelf\";\r\nimport { getBookshelves } from \"../database/client\";\r\nimport { state } from \"../shared/state\";\r\n\r\nexport const LibraryBookshelves: m.ClosureComponent = () => {\r\n\tlet bookshelves: Result<Bookshelf[]> = Err(\r\n\t\tnew Error(\"bookshelves didn't load\"),\r\n\t);\r\n\r\n\treturn {\r\n\t\toninit: async (_) => {\r\n\t\t\tbookshelves = await getBookshelves();\r\n\t\t},\r\n\t\tview: (vnode) => {\r\n\t\t\tif (!state.serviceWorker) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\treturn bookshelves.match({\r\n\t\t\t\tok: (bookshelves) => {\r\n\t\t\t\t\treturn m(\"div\", { class: \"bg-zinc-100 px-4\" }, [\r\n\t\t\t\t\t\tm(Fab, [\r\n\t\t\t\t\t\t\tm(Button, { kind: \"primary\", size: \"large\", type: \"circle\" }, [\r\n\t\t\t\t\t\t\t\tm(Add),\r\n\t\t\t\t\t\t\t]),\r\n\t\t\t\t\t\t]),\r\n\t\t\t\t\t\tm(\"div\", { class: \"flex flex-col py-4 gap-y-2 md:gap-y-4\" }, [\r\n\t\t\t\t\t\t\tbookshelves.map((bookshelf) => {\r\n\t\t\t\t\t\t\t\treturn m(BookshelfEntry, { entry: bookshelf }, []);\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t]),\r\n\t\t\t\t\t]);\r\n\t\t\t\t},\r\n\t\t\t\terr: (_) => {\r\n\t\t\t\t\treturn m(\"h1\", \"Error!\");\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default LibraryBookshelves;\r\n", "import m from \"../libraries/mithril\";\r\n\r\nexport const LibraryTags: m.ClosureComponent = (vnode) => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\treturn m(\"h1\", \"Tags!\");\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default LibraryTags;\r\n", "import m from \"../libraries/mithril\";\r\nimport { Fab } from \"../libraries/mithril-material-3/fab\";\r\n\r\nimport { Add } from \"../components/base/icons\";\r\nimport Button from \"../components/base/button\";\r\n\r\nexport const LibraryWishlist: m.ClosureComponent = (vnode) => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\treturn [\r\n\t\t\t\tm(Fab, [\r\n\t\t\t\t\tm(Button, { kind: \"primary\", size: \"large\", type: \"circle\" }, m(Add)),\r\n\t\t\t\t]),\r\n\t\t\t\tm(\"h1\", \"Wishlist!\"),\r\n\t\t\t];\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default LibraryWishlist;\r\n", "import m from \"../../libraries/mithril\";\r\n\r\nexport const Label: m.ClosureComponent<m.Attributes | undefined> = () => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\treturn m(\r\n\t\t\t\t\"label\",\r\n\t\t\t\t{\r\n\t\t\t\t\t...(vnode.attrs || {}),\r\n\t\t\t\t\tclass: \"block text-lg font-semibold leading-normal py-1\",\r\n\t\t\t\t},\r\n\t\t\t\tvnode.children,\r\n\t\t\t);\r\n\t\t},\r\n\t};\r\n};\r\n", "import m from \"../../libraries/mithril\";\r\n\r\nexport const Select: m.ClosureComponent<m.Attributes | undefined> = () => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\treturn m(\r\n\t\t\t\t\"select\",\r\n\t\t\t\t{\r\n\t\t\t\t\t...(vnode.attrs || {}),\r\n\t\t\t\t\tclass:\r\n\t\t\t\t\t\t\"bg-white border border-zinc-400 leading-normal text-base rounded-sm h-9 max-w-64 py-1.5 pl-2 pr-6\",\r\n\t\t\t\t},\r\n\t\t\t\tvnode.children,\r\n\t\t\t);\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const Option: m.ClosureComponent = () => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\treturn m(\"option\", vnode.children);\r\n\t\t},\r\n\t};\r\n};\r\n", "import m from \"../libraries/mithril\";\r\n\r\nimport { Label } from \"../components/base/label\";\r\nimport { Select, Option } from \"../components/base/select\";\r\n\r\nexport const Settings: m.ClosureComponent = () => {\r\n\treturn {\r\n\t\tview: (_vnode) => {\r\n\t\t\treturn [\r\n\t\t\t\tm(\"h2\", { class: \"text-2xl m-2\" }, \"Camera\"),\r\n\t\t\t\tm(\"div\", { class: \"p-2 mx-2 rounded-md shadow-sm\" }, [\r\n\t\t\t\t\tm(Label, { for: \"settings-camera-selection\" }, \"Camera Selection\"),\r\n\t\t\t\t\tm(Select, { id: \"settings-camera-selection\" }, [\r\n\t\t\t\t\t\tm(Option, \"Choose an option\"),\r\n\t\t\t\t\t\tm(Option, \"Slack\"),\r\n\t\t\t\t\t\tm(Option, \"Skype\"),\r\n\t\t\t\t\t\tm(Option, \"Hipchat\"),\r\n\t\t\t\t\t]),\r\n\t\t\t\t]),\r\n\t\t\t\tm(\"h2\", { class: \"text-2xl m-2\" }, \"Database\"),\r\n\t\t\t\tm(\"div\", { class: \" p-2 mx-2 rounded-md shadow-sm\" }, []),\r\n\t\t\t\tm(\"h2\", { class: \"text-2xl m-2\" }, \"Search\"),\r\n\t\t\t\tm(\"div\", { class: \"p-2 mx-2 rounded-md shadow-sm\" }, [\r\n\t\t\t\t\tm(Label, { for: \"settings-search-provider\" }, \"Search Provider\"),\r\n\t\t\t\t\tm(Select, { id: \"settings-search-provider\" }, [\r\n\t\t\t\t\t\tm(Option, \"Choose an option\"),\r\n\t\t\t\t\t\tm(Option, \"Slack\"),\r\n\t\t\t\t\t\tm(Option, \"Skype\"),\r\n\t\t\t\t\t\tm(Option, \"Hipchat\"),\r\n\t\t\t\t\t]),\r\n\t\t\t\t]),\r\n\t\t\t];\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default Settings;\r\n", "import m from \"../mithril\";\r\nimport type { IconProps } from \"./icon/base\";\r\n\r\nexport interface TabsAttr extends m.Attributes {\r\n\titems: NavItemAttr[];\r\n}\r\n\r\nexport const Nav: m.ClosureComponent<TabsAttr> = () => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\tconst attrs = vnode.attrs;\r\n\r\n\t\t\treturn m(\"div\", { class: \"a-nav\" }, [\r\n\t\t\t\tm(\r\n\t\t\t\t\t\"div\",\r\n\t\t\t\t\t{ class: \"a-nav--container\" },\r\n\t\t\t\t\tattrs.items.map((item) => {\r\n\t\t\t\t\t\treturn m(NavItem, { ...item }, []);\r\n\t\t\t\t\t}),\r\n\t\t\t\t),\r\n\t\t\t]);\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport interface NavItemAttr extends m.RouteLinkAttrs {\r\n\ticon: m.ClosureComponent<IconProps>;\r\n\tbadge?: string;\r\n\tlabel: string;\r\n}\r\n\r\nexport const NavItem: m.ClosureComponent<NavItemAttr> = () => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\tconst attrs = vnode.attrs;\r\n\r\n\t\t\tconst isActive = m.route.get() === attrs.href;\r\n\r\n\t\t\treturn m(\r\n\t\t\t\tm.route.Link,\r\n\t\t\t\t{ ...attrs, class: `a-nav_item${isActive ? \" -active\" : \"\"}` },\r\n\t\t\t\t[\r\n\t\t\t\t\tm(\"div\", { class: \"a-nav_item--icon\" }, [\r\n\t\t\t\t\t\tm(attrs.icon, { filled: isActive }),\r\n\t\t\t\t\t\tattrs.badge ? m(\"div\", { class: \"a-nav_item--badge\" }, []) : [],\r\n\t\t\t\t\t]),\r\n\t\t\t\t\tm(\"div\", { class: \"a-nav_item--text\" }, attrs.label),\r\n\t\t\t\t],\r\n\t\t\t);\r\n\t\t},\r\n\t};\r\n};\r\n", "import m from \"../../../libraries/mithril\";\r\n\r\nimport { IconBase, type IconProps } from \"./base\";\r\n\r\nexport const Label: m.ClosureComponent<IconProps | undefined> = () => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\tconst attrs = vnode.attrs || {};\r\n\r\n\t\t\tconst filled = attrs.filled || false;\r\n\r\n\t\t\tconst OUTLINED =\r\n\t\t\t\t\"M840-480 666-234q-11 16-28.5 25t-37.5 9H200q-33 0-56.5-23.5T120-280v-400q0-33 23.5-56.5T200-760h400q20 0 37.5 9t28.5 25l174 246Zm-98 0L600-680H200v400h400l142-200Zm-542 0v200-400 200Z\";\r\n\t\t\tconst FILLED =\r\n\t\t\t\t\"M840-480 666-234q-11 16-28.5 25t-37.5 9H200q-33 0-56.5-23.5T120-280v-400q0-33 23.5-56.5T200-760h400q20 0 37.5 9t28.5 25l174 246Z\";\r\n\r\n\t\t\treturn m(\r\n\t\t\t\tIconBase,\r\n\t\t\t\t{ ...vnode.attrs },\r\n\t\t\t\tm(\"path\", {\r\n\t\t\t\t\td: filled ? FILLED : OUTLINED,\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t},\r\n\t};\r\n};\r\n", "import m from \"../../../libraries/mithril\";\r\n\r\nimport { IconBase, type IconProps } from \"./base\";\r\n\r\nexport const Shelves: m.ClosureComponent<IconProps | undefined> = () => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\tconst attrs = vnode.attrs || {};\r\n\r\n\t\t\tconst filled = attrs.filled || false;\r\n\r\n\t\t\tconst OUTLINED =\r\n\t\t\t\t\"M120-40v-880h80v80h560v-80h80v880h-80v-80H200v80h-80Zm80-480h80v-160h240v160h240v-240H200v240Zm0 320h240v-160h240v160h80v-240H200v240Zm160-320h80v-80h-80v80Zm160 320h80v-80h-80v80ZM360-520h80-80Zm160 320h80-80Z\";\r\n\t\t\tconst FILLED =\r\n\t\t\t\t\"M120-40v-880h80v80h560v-80h80v880h-80v-80H200v80h-80Zm80-480h80v-160h240v160h240v-240H200v240Zm0 320h240v-160h240v160h80v-240H200v240Z\";\r\n\r\n\t\t\treturn m(\r\n\t\t\t\tIconBase,\r\n\t\t\t\t{ ...vnode.attrs },\r\n\t\t\t\tm(\"path\", {\r\n\t\t\t\t\td: filled ? FILLED : OUTLINED,\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t},\r\n\t};\r\n};\r\n", "import m from \"../../../libraries/mithril\";\r\n\r\nimport { IconBase, type IconProps } from \"./base\";\r\n\r\nexport const ShoppingMode: m.ClosureComponent<IconProps | undefined> = () => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\tconst attrs = vnode.attrs || {};\r\n\r\n\t\t\tconst filled = attrs.filled || false;\r\n\r\n\t\t\tconst OUTLINED =\r\n\t\t\t\t\"M446-80q-15 0-30-6t-27-18L103-390q-12-12-17.5-26.5T80-446q0-15 5.5-30t17.5-27l352-353q11-11 26-17.5t31-6.5h287q33 0 56.5 23.5T879-800v287q0 16-6 30.5T856-457L503-104q-12 12-27 18t-30 6Zm0-80 353-354v-286H513L160-446l286 286Zm253-480q25 0 42.5-17.5T759-700q0-25-17.5-42.5T699-760q-25 0-42.5 17.5T639-700q0 25 17.5 42.5T699-640ZM480-480Z\";\r\n\t\t\tconst FILLED =\r\n\t\t\t\t\"M447-80q-15 0-30-6t-27-18L104-390q-12-12-17.5-26.5T81-446q0-15 5.5-30t17.5-27l352-353q11-11 26-17.5t31-6.5h287q33 0 56.5 23.5T880-800v287q0 16-6 30.5T857-457L504-104q-12 12-27 18t-30 6Zm253-560q25 0 42.5-17.5T760-700q0-25-17.5-42.5T700-760q-25 0-42.5 17.5T640-700q0 25 17.5 42.5T700-640Z\";\r\n\r\n\t\t\treturn m(\r\n\t\t\t\tIconBase,\r\n\t\t\t\t{ ...vnode.attrs },\r\n\t\t\t\tm(\"path\", {\r\n\t\t\t\t\td: filled ? FILLED : OUTLINED,\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t},\r\n\t};\r\n};\r\n", "import m from \"../../../libraries/mithril\";\r\n\r\nimport { IconBase, type IconProps } from \"./base\";\r\n\r\nexport const Settings: m.ClosureComponent<IconProps | undefined> = () => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\tconst attrs = vnode.attrs || {};\r\n\r\n\t\t\tconst filled = attrs.filled || false;\r\n\r\n\t\t\tconst OUTLINED =\r\n\t\t\t\t\"m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-2 13.5l103 78-110 190-118-50q-11 8-23 15t-24 12L590-80H370Zm70-80h79l14-106q31-8 57.5-23.5T639-327l99 41 39-68-86-65q5-14 7-29.5t2-31.5q0-16-2-31.5t-7-29.5l86-65-39-68-99 42q-22-23-48.5-38.5T533-694l-13-106h-79l-14 106q-31 8-57.5 23.5T321-633l-99-41-39 68 86 64q-5 15-7 30t-2 32q0 16 2 31t7 30l-86 65 39 68 99-42q22 23 48.5 38.5T427-266l13 106Zm42-180q58 0 99-41t41-99q0-58-41-99t-99-41q-59 0-99.5 41T342-480q0 58 40.5 99t99.5 41Zm-2-140Z\";\r\n\t\t\tconst FILLED =\r\n\t\t\t\t\"m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-2 13.5l103 78-110 190-118-50q-11 8-23 15t-24 12L590-80H370Zm112-260q58 0 99-41t41-99q0-58-41-99t-99-41q-59 0-99.5 41T342-480q0 58 40.5 99t99.5 41Z\";\r\n\r\n\t\t\treturn m(\r\n\t\t\t\tIconBase,\r\n\t\t\t\t{ ...vnode.attrs },\r\n\t\t\t\tm(\"path\", {\r\n\t\t\t\t\td: filled ? FILLED : OUTLINED,\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t},\r\n\t};\r\n};\r\n", "import m from \"../libraries/mithril\";\r\nimport * as Toast from \"../libraries/mithril-toast\";\r\n\r\nimport { Nav } from \"../libraries/mithril-material-3/nav\";\r\nimport { Label } from \"../libraries/mithril-material-3/icon/label\";\r\nimport { Shelves } from \"../libraries/mithril-material-3/icon/shelves\";\r\nimport { ShoppingMode } from \"../libraries/mithril-material-3/icon/shopping-mode\";\r\nimport { Settings } from \"../libraries/mithril-material-3/icon/settings\";\r\n\r\nexport const Layout: m.ClosureComponent = (_vnode) => {\r\n\treturn {\r\n\t\tview: (vnode) => {\r\n\t\t\tconst items = [\r\n\t\t\t\t{\r\n\t\t\t\t\thref: \"/library/bookshelves\",\r\n\t\t\t\t\ticon: Shelves,\r\n\t\t\t\t\tlabel: \"Bookshelves\",\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\thref: \"/library/tags\",\r\n\t\t\t\t\ticon: Label,\r\n\t\t\t\t\tlabel: \"Tags\",\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\thref: \"/library/wishlist\",\r\n\t\t\t\t\ticon: ShoppingMode,\r\n\t\t\t\t\tlabel: \"Wishlist\",\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\thref: \"/settings\",\r\n\t\t\t\t\ticon: Settings,\r\n\t\t\t\t\tlabel: \"Settings\",\r\n\t\t\t\t},\r\n\t\t\t];\r\n\r\n\t\t\treturn m.fragment({}, [\r\n\t\t\t\tm(Toast.Drawer),\r\n\t\t\t\tm(\"div\", { class: \"flex-1 overflow-y-scroll\" }, vnode.children),\r\n\t\t\t\tm(Nav, { items: items }, []),\r\n\t\t\t]);\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default Layout;\r\n", "import m from \"./libraries/mithril\";\r\nimport * as Toast from \"./libraries/mithril-toast\";\r\n\r\nimport AddBulk from \"./pages/add-bulk\";\r\nimport AddScan from \"./pages/add-scan\";\r\nimport AddSearch from \"./pages/add-search\";\r\nimport LibraryBookshelf from \"./pages/library-bookshelf\";\r\nimport LibraryBookshelves from \"./pages/library-bookshelves\";\r\nimport LibraryTags from \"./pages/library-tags\";\r\nimport LibraryWishlist from \"./pages/library-wishlist\";\r\nimport Settings from \"./pages/settings\";\r\n\r\nimport Layout from \"./shared/layout\";\r\nimport { state } from \"./shared/state\";\r\n\r\nconst wrapper = (comp: m.ClosureComponent): m.RouteResolver => {\r\n\treturn {\r\n\t\trender: () => {\r\n\t\t\treturn m(Layout, m(comp));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nconst registerServiceWorker = async () => {\r\n\tif (\"serviceWorker\" in navigator) {\r\n\t\ttry {\r\n\t\t\tconst registration = await navigator.serviceWorker.register(\r\n\t\t\t\t\"./service-worker.js\",\r\n\t\t\t);\r\n\t\t\tif (registration.waiting && registration.active) {\r\n\t\t\t\tToast.addInfo(\"Please reload the tab to get updates.\");\r\n\t\t\t} else if (registration.active) {\r\n\t\t\t\tstate.serviceWorker = true;\r\n\t\t\t} else {\r\n\t\t\t\tregistration.addEventListener(\"updatefound\", () => {\r\n\t\t\t\t\tif (registration.installing == null) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tregistration.installing.addEventListener(\"statechange\", (event) => {\r\n\t\t\t\t\t\tif (event.target == null) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tconst worker = event.target as ServiceWorker;\r\n\t\t\t\t\t\tif (worker.state === \"installed\") {\r\n\t\t\t\t\t\t\tif (registration.active) {\r\n\t\t\t\t\t\t\t\tToast.addInfo(\"Please reload the tab to get updates.\");\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tstate.serviceWorker = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(`Registration failed with ${error}`);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nwindow.addEventListener(\"load\", () => {\r\n\tregisterServiceWorker();\r\n\r\n\tnew EventSource(\"/esbuild\").addEventListener(\"change\", () =>\r\n\t\tlocation.reload(),\r\n\t);\r\n\r\n\tm.route(document.body, \"/library/bookshelves\", {\r\n\t\t\"/add/bulk\": AddBulk,\r\n\t\t\"/add/scan\": AddScan,\r\n\t\t\"/add/search\": AddSearch,\r\n\t\t\"/library/bookshelves\": wrapper(LibraryBookshelves),\r\n\t\t\"/library/bookshelves/:bookshelfId\": wrapper(LibraryBookshelf),\r\n\t\t\"/library/tags\": wrapper(LibraryTags),\r\n\t\t\"/library/wishlist\": wrapper(LibraryWishlist),\r\n\t\t\"/settings\": wrapper(Settings),\r\n\t});\r\n});\r\n"],
  "mappings": "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",
  "names": ["e", "t", "n", "r", "o", "l", "a", "i", "s", "u", "f", "q", "k", "d", "c", "C", "S", "p", "E", "w", "b", "x", "m", "y", "g", "j", "A", "O", "T", "N", "$", "L", "P", "v", "R", "h", "I", "z", "D", "_", "F", "vnode", "vnode", "vnode", "vnode", "SIZE", "state", "vnode", "vnode", "t", "t", "e", "_", "vnode", "books", "_", "state", "_", "state", "bookshelves", "vnode", "vnode", "Option", "Option", "Label", "Settings", "Label", "Settings", "state"]
}
